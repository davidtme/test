!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return null!=e&&(Array.isArray(e)||ArrayBuffer.isView(e))}function o(e){return null!=e&&"function"==typeof e.Dispose}n.r(t),n.d(t,"holder",(function(){return Uc})),n.d(t,"canvas",(function(){return Ic})),n.d(t,"context",(function(){return kc})),n.d(t,"getAudio",(function(){return Nc})),n.d(t,"getTexure",(function(){return zc})),n.d(t,"postponedQueue",(function(){return Vc})),n.d(t,"postponedQueueMinTime",(function(){return Hc})),n.d(t,"messageQueue",(function(){return jc})),n.d(t,"gameState",(function(){return Wc})),n.d(t,"hostState",(function(){return Yc})),n.d(t,"redraw",(function(){return Xc})),n.d(t,"renderer",(function(){return Gc})),n.d(t,"resize",(function(){return qc})),n.d(t,"updateFrame",(function(){return $c})),n.d(t,"renderFrame",(function(){return Zc})),n.d(t,"mainLoop",(function(){return Jc}));function i(e,t,n){return e.has(t)?[!0,e.get(t)]:[!1,n]}function u(e,t){return!t.has(e)&&(t.add(e),!0)}class s{constructor(e){this.factory=e,this.isValueCreated=!1}get Value(){return this.isValueCreated||(this.createdValue=this.factory(),this.isValueCreated=!0),this.createdValue}get IsValueCreated(){return this.isValueCreated}}function a(e,t){let n=e.toString(10);for(;n.length<t;)n="0"+n;return n}function c(e){const t=e;return"number"==typeof t.offset?t.offset:1===e.kind?0:-6e4*e.getTimezoneOffset()}function f(e,t){return(e=e<0&&null!=t&&10!==t?4294967295+e+1:e).toString(t)}class l{static id(e){return l.idMap.has(e)||l.idMap.set(e,++l.count),l.idMap.get(e)}}function d(e){let t=0,n=5381;const r=e.length;for(;t<r;)n=33*n^e.charCodeAt(t++);return n}function h(e){return 2654435761*e|0}function v(e){return 0===e.length?0:e.reduce((e,t)=>(e<<5)+e^t)}function g(e){if(null==e)return 0;switch(typeof e){case"boolean":return e?1:0;case"number":return h(e);case"string":return d(e);default:return h(l.id(e))}}function w(e){if(null==e)return 0;switch(typeof e){case"boolean":return e?1:0;case"number":return h(e);case"string":return d(e);default:if(function(e){return null!=e&&"function"==typeof e.GetHashCode}(e))return e.GetHashCode();if(r(e)){const t=e.length,n=new Array(t);for(let r=0;r<t;r++)n[r]=w(e[r]);return v(n)}return d(String(e))}}function p(e,t,n){if(null==e)return null==t;if(null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function m(e,t){return p(e,t,x)}function x(e,t){return e===t||(null==e?null==t:null!=t&&("object"==typeof e&&(function(e){return null!=e&&"function"==typeof e.Equals}(e)?e.Equals(t):r(e)?r(t)&&m(e,t):e instanceof Date&&(t instanceof Date&&0===A(e,t)))))}function A(e,t){let n,r;return"offset"in e&&"offset"in t?(n=e.getTime(),r=t.getTime()):(n=e.getTime()+c(e),r=t.getTime()+c(t)),n===r?0:n<r?-1:1}function S(e,t){return e===t?0:e<t?-1:1}function b(e,t,n){if(null==e)return null==t?0:1;if(null==t)return-1;if(e.length!==t.length)return e.length<t.length?-1:1;for(let r=0,o=0;r<e.length;r++)if(o=n(e[r],t[r]),0!==o)return o;return 0}function y(e,t){return b(e,t,T)}function T(e,t){return e===t?0:null==e?null==t?0:-1:null==t?1:"object"!=typeof e?e<t?-1:1:function(e){return null!=e&&"function"==typeof e.CompareTo}(e)?e.CompareTo(t):r(e)&&r(t)?y(e,t):e instanceof Date&&t instanceof Date?A(e,t):1}function E(e,t,n){return e(t,n)<0?t:n}function R(e,t,n){return e(t,n)>0?t:n}function C(e){let t=e;return e=>void 0===e?t:void(t=e)}l.idMap=new WeakMap,l.count=0;const P=0,M=1,F=2,B=3,D=4;function L(e,t){return e.replace(/[a-z]?[A-Z]/g,e=>1===e.length?e.toLowerCase():e.charAt(0)+t+e.charAt(1).toLowerCase())}function _(e,t){switch(t){case M:return e.charAt(0).toLowerCase()+e.slice(1);case F:return L(e,"_");case B:return L(e,"_").toUpperCase();case D:return L(e,"-");case P:default:return e}}function O(e){r(e)?e.splice(0):e.clear()}function U(e,t){if(null==t)return;if(t.length>1)return t;let n;switch(e){case 2:n=(e,n)=>t(e)(n);break;case 3:n=(e,n,r)=>t(e)(n)(r);break;case 4:n=(e,n,r,o)=>t(e)(n)(r)(o);break;case 5:n=(e,n,r,o,i)=>t(e)(n)(r)(o)(i);break;case 6:n=(e,n,r,o,i,u)=>t(e)(n)(r)(o)(i)(u);break;case 7:n=(e,n,r,o,i,u,s)=>t(e)(n)(r)(o)(i)(u)(s);break;case 8:n=(e,n,r,o,i,u,s,a)=>t(e)(n)(r)(o)(i)(u)(s)(a);break;default:throw new Error("Uncurrying to more than 8-arity is not supported: "+e)}return n.__CURRIED__=t,n}function I(e,t,n){if(null!=t){if("__CURRIED__"in t){t=t.__CURRIED__;for(let e=0;e<n.length;e++)t=t(n[e]);return t}switch(e){case 1:return e=>t.apply(void 0,n.concat([e]));case 2:return e=>r=>t.apply(void 0,n.concat([e,r]));case 3:return e=>r=>o=>t.apply(void 0,n.concat([e,r,o]));case 4:return e=>r=>o=>i=>t.apply(void 0,n.concat([e,r,o,i]));case 5:return e=>r=>o=>i=>u=>t.apply(void 0,n.concat([e,r,o,i,u]));case 6:return e=>r=>o=>i=>u=>s=>t.apply(void 0,n.concat([e,r,o,i,u,s]));case 7:return e=>r=>o=>i=>u=>s=>a=>t.apply(void 0,n.concat([e,r,o,i,u,s,a]));case 8:return e=>r=>o=>i=>u=>s=>a=>c=>t.apply(void 0,n.concat([e,r,o,i,u,s,a,c]));default:throw new Error("Partially applying to more than 8-arity is not supported: "+e)}}}function k(e,t){function n(e,t,r,o){const i=r[o];if(0!==i){const e=i[0],n=i[1];e>1&&(t=function(e,t){if(null!=t){if("__CURRIED__"in t)return t.__CURRIED__;switch(e){case 2:return e=>n=>t(e,n);case 3:return e=>n=>r=>t(e,n,r);case 4:return e=>n=>r=>o=>t(e,n,r,o);case 5:return e=>n=>r=>o=>i=>t(e,n,r,o,i);case 6:return e=>n=>r=>o=>i=>u=>t(e,n,r,o,i,u);case 7:return e=>n=>r=>o=>i=>u=>s=>t(e,n,r,o,i,u,s);case 8:return e=>n=>r=>o=>i=>u=>s=>a=>t(e,n,r,o,i,u,s,a);default:throw new Error("Currying to more than 8-arity is not supported: "+e)}}}(e,t)),n>1&&(t=U(n,t))}const u=e(t);return o+1===r.length?u:e=>n(u,e,r,o+1)}return r=>n(e,r,t,0)}function N(e,t,n){if(e.has(t))throw new Error("An item with the same key has already been added. Key: "+t);e.set(t,n)}function z(e,t){if(e.has(t))return e.get(t);throw new Error(`The given key '${t}' was not present in the dictionary.`)}function V(e,t){return null!=t&&Object.getPrototypeOf(e).constructor===Object.getPrototypeOf(t).constructor}function H(e,t){return function(e,t){e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}(e,t||j),e}class j{toString(){return"{"+Object.entries(this).map(([e,t])=>e+" = "+String(t)).join(";\n ")+"}"}GetHashCode(){return g(this)}Equals(e){return this===e}}function W(e,t){if(e===t)return 0;if(null==t)return-1;for(;null!=e.tail;){if(null==t.tail)return 1;const n=T(e.head,t.head);if(0!==n)return n;e=e.tail,t=t.tail}return null==t.tail?0:-1}class Y{constructor(e,t){this.head=e,this.tail=t}toString(){return"["+Array.from(this).join("; ")+"]"}toJSON(){return Array.from(this)}[Symbol.iterator](){let e=this;return{next:()=>{const t=null==e?void 0:e.head,n=null==(null==e?void 0:e.tail);return e=null==e?void 0:e.tail,{done:n,value:t}}}}GetHashCode(){return v(Array.from(this).map(w))}Equals(e){return 0===W(this,e)}CompareTo(e){return W(this,e)}}class X extends j{constructor(e,t,...n){super(),this.tag=0|e,this.name=t,this.fields=n}toString(){const e=this.fields.length;return 0===e?this.name:1===e?this.name+" "+String(this.fields[0]):this.name+" ("+this.fields.map(e=>String(e)).join(",")+")"}toJSON(){return 0===this.fields.length?this.name:[this.name].concat(this.fields)}GetHashCode(){const e=this.fields.map(e=>w(e));return e.splice(0,0,h(this.tag)),v(e)}Equals(e){return this===e||V(this,e)&&this.tag===e.tag&&m(this.fields,e.fields)}CompareTo(e){return this===e?0:V(this,e)?this.tag===e.tag?y(this.fields,e.fields):this.tag<e.tag?-1:1:-1}}function G(e,t){const n={},r=null==t?Object.keys(e):t(e);for(let t=0;t<r.length;t++)n[r[t]]=e[r[t]];return n}function q(e,t,n){if(e===t)return!0;if(V(e,t)){const r=null==n?Object.keys(e):n(e);for(let n=0;n<r.length;n++)if(!x(e[r[n]],t[r[n]]))return!1;return!0}return!1}function $(e,t,n){if(e===t)return 0;if(V(e,t)){const r=null==n?Object.keys(e):n(e);for(let n=0;n<r.length;n++){const o=T(e[r[n]],t[r[n]]);if(0!==o)return o}return 0}return-1}class Z extends j{toString(){return"{"+Object.entries(this).map(([e,t])=>e+" = "+String(t)).join(";\n ")+"}"}toJSON(){return G(this)}GetHashCode(){return v(Object.values(this).map(e=>w(e)))}Equals(e){return q(this,e)}CompareTo(e){return $(this,e)}}function J(e){return Object.assign(Object.create(Z.prototype),e)}class K extends Z{constructor(e){super(),this.contents=e}}H((function(e){this.stack=Error().stack,this.message=e}),j);H((function(){}),j);class Q{constructor(e,t,n,r){this.declaringType=e,this.tag=t,this.name=n,this.fields=r}}class ee{constructor(e,t,n,r,o,i){this.fullname=e,this.generics=t,this.construct=n,this.fields=r,this.cases=o,this.enumCases=i}toString(){return ve(this)}Equals(e){return ne(this,e)}CompareTo(e){return re(this,e)}}function te(e){return null!=e.generics?e.generics:[]}function ne(e,t){return""===e.fullname?""===t.fullname&&p(Ee(e),Ee(t),([e,t],[n,r])=>e===n&&ne(t,r)):e.fullname===t.fullname&&p(te(e),te(t),ne)}function re(e,t){return e.fullname!==t.fullname?e.fullname<t.fullname?-1:1:b(te(e),te(t),re)}function oe(e,t,n){return new ee(e,t,n)}function ie(e,t,n,r){return new ee(e,t,n,r)}function ue(e,t,n,r){const o=new ee(e,t,n,void 0,()=>r().map((e,t)=>"string"==typeof e?new Q(o,t,e):new Q(o,t,e[0],e[1])));return o}function se(e){return new ee("Microsoft.FSharp.Core.FSharpOption`1",[e])}function ae(e){return new ee("Microsoft.FSharp.Collections.FSharpList`1",[e])}function ce(e){return new ee(e.fullname+"[]",[e])}const fe=new ee("System.Object"),le=(new ee("Microsoft.FSharp.Core.Unit"),new ee("System.Char"),new ee("System.String")),de=(new ee("System.Boolean"),new ee("System.SByte"),new ee("System.Byte"),new ee("System.Int16"),new ee("System.UInt16"),new ee("System.Int32"));new ee("System.UInt32"),new ee("System.Single"),new ee("System.Double"),new ee("System.Decimal");function he(e){if(Array.isArray(e))return e[0];if(e instanceof Q)return e.name;{const t=e.fullname.lastIndexOf(".");return-1===t?e.fullname:e.fullname.substr(t+1)}}function ve(e){const t=null==e.generics||ge(e)?[]:e.generics;return t.length>0?e.fullname+"["+t.map(e=>ve(e)).join(",")+"]":e.fullname}function ge(e){return e.fullname.endsWith("[]")}function we(e){var t;return ge(e)?null===(t=e.generics)||void 0===t?void 0:t[0]:void 0}function pe(e){return null!=e.generics&&e.generics.length>0}function me(e){return null!=e.enumCases&&e.enumCases.length>0}function xe(e){return null==e.generics?e:new ee(e.fullname,e.generics.map(()=>fe))}function Ae(e){var t;return null===(t=e.generics)||void 0===t?void 0:t[0]}function Se(e){if(me(e)&&null!=e.enumCases)return e.enumCases.map(e=>e[1]);throw new Error(e.fullname+" is not an enum type")}function be(e,t){if(null!=e.enumCases){if("string"==typeof t){for(const n of e.enumCases)if(n[0]===t)return n;throw new Error(`'${t}' was not found in ${e.fullname}`)}for(const n of e.enumCases)if(n[1]===t)return n;return["",t]}throw new Error(e.fullname+" is not an enum type")}function ye(e,t){const n=parseInt(t,10);return be(e,isNaN(n)?t:n)[1]}function Te(e){if(null!=e.cases)return e.cases();throw new Error(e.fullname+" is not an F# union type")}function Ee(e){if(null!=e.fields)return e.fields();throw new Error(e.fullname+" is not an F# record type")}function Re(e){if(Me(e)&&null!=e.generics)return e.generics;throw new Error(e.fullname+" is not a tuple type")}function Ce(e){return e instanceof ee?null!=e.cases:e instanceof X}function Pe(e){return e instanceof ee?null!=e.fields:e instanceof Z}function Me(e){return e.fullname.startsWith("System.Tuple")}function Fe(e){return null==e.fields?[]:e.fields}function Be(e,t){const n=(e.fields||[]).length;if(t.length!==n)throw new Error(`Expected an array of length ${n} but got ${t.length}`);return null!=e.declaringType.construct?new e.declaringType.construct(e.tag,e.name,...t):{}}class De{constructor(e){this.value=e}toString(){return String(this.value)}toJSON(){return this.value}GetHashCode(){return w(this.value)}Equals(e){return null!=e&&x(this.value,e instanceof De?e.value:e)}CompareTo(e){return null==e?1:T(this.value,e instanceof De?e.value:e)}}function Le(e){return null==e||e instanceof De?new De(e):e}function _e(e){if(null==e)throw new Error("Option has no value");return e instanceof De?e.value:e}function Oe(e,t){return null!=e?_e(e):t}function Ue(e,t){return null!=e?_e(e):t()}function Ie(e,t){return null!=t?Le(e(_e(t))):void 0}class ke extends X{}class Ne extends X{}function ze(e,t){return 0===t.tag?(n=e(t.fields[0]),new Ne(0,"Ok",n)):t;var n}const Ve=H((function(e,t){this.width=e,this.height=t}),Z);function He(){return oe("Models.Size",void 0,Ve)}function je(e,t){return this instanceof Ve?Ve.call(this,e,t):new Ve(e,t)}function We(e){return e.width}function Ye(e){return e.height}Ve.prototype.toString=function(){return"("+(f(0|We(this))+",")+(f(0|Ye(this))+")")};const Xe=H((function(e,t){this.x=e,this.y=t}),Z);function Ge(){return oe("Models.Position",void 0,Xe)}function qe(e,t){return this instanceof Xe?Xe.call(this,e,t):new Xe(e,t)}function $e(e){return e.x}function Ze(e){return e.y}function Je(){return qe(0,0)}Xe.prototype.toString=function(){return"("+(f(0|$e(this))+",")+(f(0|Ze(this))+")")};const Ke=H((function(e,t){this.name=e,this.smooth=t,this.data=new ke(0,"Choice1Of4",void 0)}));function Qe(e,t){return this instanceof Ke?Ke.call(this,e,t):new Ke(e,t)}function et(e){return e.name}const tt=H((function(e){this.name=e,this.data=new ke(0,"Choice1Of4",void 0)}));function nt(e){return e.name}const rt=H((function(e,t,n){this.Texture=e,this.TextureSliceSize=t,this.TextureSlicePosition=n}),Z);const ot=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const it=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const ut=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const st=H((function(e,t,n,r,o,i,u){this.Position=e,this.Size=t,this.Texture=n,this.TextureSliceSize=r,this.TextureSlicePosition=o,this.HeightMap=i,this.Effect=u}),Z);const at=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const ct=H((function(e,t,n,r,o,i,u,s,a,c,f){this.Position=e,this.Children=t,this.Shader=n,this.Mode=r,this.Scale=o,this.ActiveArea=i,this.Enter=u,this.Clicked=s,this.Dragging=a,this.Blur=c,this.Leave=f}),Z);const ft=H((function(e,t,n,r){this.Size=e,this.Children=t,this.Shader=n,this.ActiveArea=r}),Z);const lt=H((function(e,t){this.Key=e,this.Last=t}),Z);const dt=H((function(e,t){this.Render=e,this.Last=t}),Z);const ht=H((function(e,t,n){this.Render=e,this.Rendered=t,this.Last=n}),Z);H((function(e,t,n,r,o){this.Count=0|e,this.Texture=t,this.HeightMapTexture=n,this.Size=r,this.Child=o}),Z);const vt=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const gt=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const wt=H((function(e,t,n,r){this.Point=e,this.Start=t,this.End=n,this.Direction=r}),Z);H((function(e,t,n,r){this.Point=e,this.Start=t,this.End=n,this.Direction=r}),Z);const pt=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const mt=H((function(e,t){this.Id=e,this.Actions=t}),Z);const xt=H((function(e,t){this.Position=e,this.Items=t}),Z);const At=H((function(e,t,n,r,o){this.Visible=e,this.Items=t,this.Offset=0|n,this.Hover=r,this.Selected=o}),Z);const St=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const bt=H((function(e,t,n,r){this.Type=e,this.Name=t,this.Start=n,this.End=r}),Z);const yt=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const Tt=H((function(e,t,n,r,o,i,u,s,a,c){this.SomeValue=e,this.Dragger=t,this.WorldMapSize=n,this.WorldMap=r,this.ActivePoint=o,this.HoverPoint=i,this.Players=u,this.Menu=s,this.Weather=a,this.Audio=c}),Z);const Et=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const Rt=H((function(e,t,n,r,o,i,u,s){this.Scale=0|e,this.Resolution=t,this.Content=n,this.MouseItem=r,this.DragItem=o,this.ClickItem=i,this.HoverItem=u,this.BlurItem=s}),Z);const Ct=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const Pt=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const Mt=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const Ft=H((function(e,t,n,r){this.TextureName=e,this.SlicePosition=t,this.SliceSize=n,this.RenderOffset=r}),Z);const Bt=H((function(e,t,n,r,o,i){this.Options=e,this.TextureName=t,this.SlicePosition=n,this.SliceSize=r,this.RenderOffset=o,this.HeightMap=i}),Z);const Dt=H((function(e){this.Layers=e}),Z);const Lt=H((function(e,t,n){this.Name=e,this.Frames=t,this.Size=n}),Z);function _t(){return ie("Models.SpriteResource",[],Lt,()=>[["Name",le],["Frames",ce(ie("Models.Frame",[],Dt,()=>[["Layers",ce(ie("Models.Layer",[],Bt,()=>[["Options",ce(ue("Models.LayerOption",[],Mt,()=>["NoHighlight",["Shadow",[["Item1",de],["Item2",de]]],"Ground","Leaf","Grass",["AutoHeightMap",[["Item",de]]]]))],["TextureName",le],["SlicePosition",Ge()],["SliceSize",He()],["RenderOffset",Ge()],["HeightMap",se(ie("Models.LayerHeightMap",[],Ft,()=>[["TextureName",le],["SlicePosition",Ge()],["SliceSize",He()],["RenderOffset",Ge()]]))]]))]]))],["Size",He()]])}const Ot=H((function(e,t){this.Name=e,this.Duration=t}),Z);var Ut;function It(e,t){switch(t){case 8:return e?[0,255]:[-128,127];case 16:return e?[0,65535]:[-32768,32767];case 32:return e?[0,4294967295]:[-2147483648,2147483647];default:throw new Error("Invalid bit size.")}}function kt(e,t,n){const r=/^\s*([\+\-])?(0[xXoObB])?([0-9a-fA-F]+)\s*$/.exec(e.replace(/_/g,""));if(null!=r){const[,,e,o]=r;if(!function(e){switch(e){case 2:return/[^0-1]/;case 8:return/[^0-7]/;case 10:return/[^0-9]/;case 16:return/[^0-9a-fA-F]/;default:throw new Error("Invalid Base.")}}(n=n||function(e,t){if(t&Ut.AllowHexSpecifier)return 16;switch(e){case"0b":case"0B":return 2;case"0o":case"0O":return 8;case"0x":case"0X":return 16;default:return 10}}(e,t)).test(o))return function(e,t){const[,n,r,o]=e;return{sign:n||"",prefix:r||"",digits:o,radix:t}}(r,n)}return null}function Nt(e,t,n,r){try{return[!0,function(e,t,n,r,o){const i=kt(e,t,o);if(null!=i){let e=Number.parseInt(i.sign+i.digits,i.radix);if(!Number.isNaN(e)){const[t,o]=It(!0,r);!n&&10!==i.radix&&e>=t&&e<=o&&(e=e<<32-r>>32-r);const[u,s]=It(n,r);if(e>=u&&e<=s)return e}}throw new Error("Input string was not in a correct format.")}(e,t,n,r)]}catch(e){}return[!1,0]}function zt(e){return-2147483648===e?e:-e}!function(e){e[e.AllowHexSpecifier=512]="AllowHexSpecifier"}(Ut||(Ut={}));var Vt=null;try{Vt=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function Ht(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function jt(e){return!0===(e&&e.__isLong__)}Ht.prototype.GetHashCode=function(){let e=this.unsigned?1:0;return e=(e<<5)+e^this.high,e=(e<<5)+e^this.low,e},Ht.prototype.Equals=function(e){return pn(this,e)},Ht.prototype.CompareTo=function(e){return Sn(this,e)},Ht.prototype.toString=function(e){return hn(this,e)},Ht.prototype.toJSON=function(){return hn(this)},Ht.prototype.__isLong__,Object.defineProperty(Ht.prototype,"__isLong__",{value:!0});var Wt={},Yt={};function Xt(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=Yt[e])?r:(n=qt(e,(0|e)<0?-1:0,!0),o&&(Yt[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=Wt[e])?r:(n=qt(e,e<0?-1:0,!1),o&&(Wt[e]=n),n)}function Gt(e,t){if(isNaN(e))return t?rn:nn;if(t){if(e<0)return rn;if(e>=Qt)return cn}else{if(e<=-en)return fn;if(e+1>=en)return an}return e<0?bn(Gt(-e,t)):qt(e%Kt|0,e/Kt|0,t)}function qt(e,t,n){return new Ht(e,t,n)}var $t=Math.pow;function Zt(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return nn;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r=e.indexOf("-");if(r>0)throw Error("interior hyphen");if(0===r)return bn(Zt(e.substring(1),t,n));for(var o=Gt($t(n,8)),i=nn,u=0;u<e.length;u+=8){var s=Math.min(8,e.length-u),a=parseInt(e.substring(u,u+s),n);if(s<8)i=yn(En(i,Gt($t(n,s))),Gt(a));else i=yn(i=En(i,o),Gt(a))}return i.unsigned=t,i}function Jt(e,t){return"number"==typeof e?Gt(e,t):"string"==typeof e?Zt(e,t):qt(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}var Kt=4294967296,Qt=Kt*Kt,en=Qt/2,tn=Xt(1<<24),nn=Xt(0),rn=Xt(0,!0),on=Xt(1),un=Xt(1,!0),sn=Xt(-1),an=qt(-1,2147483647,!1),cn=qt(-1,-1,!0),fn=qt(0,-2147483648,!1);function ln(e){return e.unsigned?e.low>>>0:e.low}function dn(e){return e.unsigned?(e.high>>>0)*Kt+(e.low>>>0):e.high*Kt+(e.low>>>0)}function hn(e,t){if((t=t||10)<2||36<t)throw RangeError("radix");if(vn(e))return"0";if(gn(e)){if(pn(e,fn)){var n=Gt(t),r=Rn(e,n),o=Tn(En(r,n),e);return hn(r,t)+ln(o).toString(t)}return"-"+hn(bn(e),t)}for(var i=Gt($t(t,6),e.unsigned),u=e,s="";;){var a=Rn(u,i),c=(ln(Tn(u,En(a,i)))>>>0).toString(t);if(vn(u=a))return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}}function vn(e){return 0===e.high&&0===e.low}function gn(e){return!e.unsigned&&e.high<0}function wn(e){return 1==(1&e.low)}function pn(e,t){return jt(t)||(t=Jt(t)),(e.unsigned===t.unsigned||e.high>>>31!=1||t.high>>>31!=1)&&(e.high===t.high&&e.low===t.low)}function mn(e,t){return Sn(e,t)<0}function xn(e,t){return Sn(e,t)>0}function An(e,t){return Sn(e,t)>=0}function Sn(e,t){if(jt(t)||(t=Jt(t)),pn(e,t))return 0;var n=gn(e),r=gn(t);return n&&!r?-1:!n&&r?1:e.unsigned?t.high>>>0>e.high>>>0||t.high===e.high&&t.low>>>0>e.low>>>0?-1:1:gn(Tn(e,t))?-1:1}function bn(e){return!e.unsigned&&pn(e,fn)?fn:yn(Cn(e),on)}function yn(e,t){jt(t)||(t=Jt(t));var n=e.high>>>16,r=65535&e.high,o=e.low>>>16,i=65535&e.low,u=t.high>>>16,s=65535&t.high,a=t.low>>>16,c=0,f=0,l=0,d=0;return l+=(d+=i+(65535&t.low))>>>16,f+=(l+=o+a)>>>16,c+=(f+=r+s)>>>16,c+=n+u,qt((l&=65535)<<16|(d&=65535),(c&=65535)<<16|(f&=65535),e.unsigned)}function Tn(e,t){return jt(t)||(t=Jt(t)),yn(e,bn(t))}function En(e,t){if(vn(e))return e.unsigned?rn:nn;if(jt(t)||(t=Jt(t)),Vt)return qt(Vt.mul(e.low,e.high,t.low,t.high),Vt.get_high(),e.unsigned);if(vn(t))return e.unsigned?rn:nn;if(pn(e,fn))return wn(t)?fn:nn;if(pn(t,fn))return wn(e)?fn:nn;if(gn(e))return gn(t)?En(bn(e),bn(t)):bn(En(bn(e),t));if(gn(t))return bn(En(e,bn(t)));if(mn(e,tn)&&mn(t,tn))return Gt(dn(e)*dn(t),e.unsigned);var n=e.high>>>16,r=65535&e.high,o=e.low>>>16,i=65535&e.low,u=t.high>>>16,s=65535&t.high,a=t.low>>>16,c=65535&t.low,f=0,l=0,d=0,h=0;return d+=(h+=i*c)>>>16,l+=(d+=o*c)>>>16,d&=65535,l+=(d+=i*a)>>>16,f+=(l+=r*c)>>>16,l&=65535,f+=(l+=o*a)>>>16,l&=65535,f+=(l+=i*s)>>>16,f+=n*c+r*a+o*s+i*u,qt((d&=65535)<<16|(h&=65535),(f&=65535)<<16|(l&=65535),e.unsigned)}function Rn(e,t){if(jt(t)||(t=Jt(t)),vn(t))throw Error("division by zero");var n,r,o;if(Vt)return e.unsigned||-2147483648!==e.high||-1!==t.low||-1!==t.high?qt((e.unsigned?Vt.div_u:Vt.div_s)(e.low,e.high,t.low,t.high),Vt.get_high(),e.unsigned):e;if(vn(e))return e.unsigned?rn:nn;if(e.unsigned){if(t.unsigned||(t=function(e){return e.unsigned?e:qt(e.low,e.high,!0)}(t)),xn(t,e))return rn;if(xn(t,Fn(e,1)))return un;o=rn}else{if(pn(e,fn))return pn(t,on)||pn(t,sn)?fn:pn(t,fn)?on:pn(n=Pn(Rn(Mn(e,1),t),1),nn)?gn(t)?on:sn:o=yn(n,Rn(r=Tn(e,En(t,n)),t));if(pn(t,fn))return e.unsigned?rn:nn;if(gn(e))return gn(t)?Rn(bn(e),bn(t)):bn(Rn(bn(e),t));if(gn(t))return bn(Rn(e,bn(t)));o=nn}for(r=e;An(r,t);){n=Math.max(1,Math.floor(dn(r)/dn(t)));for(var i=Math.ceil(Math.log(n)/Math.LN2),u=i<=48?1:$t(2,i-48),s=Gt(n),a=En(s,t);gn(a)||xn(a,r);)a=En(s=Gt(n-=u,e.unsigned),t);vn(s)&&(s=on),o=yn(o,s),r=Tn(r,a)}return o}function Cn(e){return qt(~e.low,~e.high,e.unsigned)}function Pn(e,t){return jt(t)&&(t=ln(t)),0==(t&=63)?e:t<32?qt(e.low<<t,e.high<<t|e.low>>>32-t,e.unsigned):qt(0,e.low<<t-32,e.unsigned)}function Mn(e,t){return jt(t)&&(t=ln(t)),0==(t&=63)?e:t<32?qt(e.low>>>t|e.high<<32-t,e.high>>t,e.unsigned):qt(e.high>>t-32,e.high>=0?0:-1,e.unsigned)}function Fn(e,t){if(jt(t)&&(t=ln(t)),0===(t&=63))return e;var n=e.high;return t<32?qt(e.low>>>t|n<<32-t,n>>>t,e.unsigned):qt(32===t?n:n>>>t-32,0,e.unsigned)}var Bn=Ht;const Dn=yn,Ln=En,_n=Rn,On=function(e,t){return jt(t)||(t=Jt(t)),Vt?qt((e.unsigned?Vt.rem_u:Vt.rem_s)(e.low,e.high,t.low,t.high),Vt.get_high(),e.unsigned):Tn(e,En(Rn(e,t),t))},Un=bn,In=function(e,t){return jt(t)||(t=Jt(t)),qt(e.low&t.low,e.high&t.high,e.unsigned)},kn=Sn,Nn=qt,zn=function(e,t,n){return n?function(e,t){return new Ht(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)}(e,t):function(e,t){return new Ht(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}(e,t)},Vn=Gt,Hn=ln,jn=function(e,t){return t?function(e){var t=e.high,n=e.low;return[255&n,n>>>8&255,n>>>16&255,n>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]}(e):function(e){var t=e.high,n=e.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,n>>>24,n>>>16&255,n>>>8&255,255&n]}(e)},Wn=dn,Yn=hn;function Xn(e,t,n){let r=e,o=0;switch(n){case 0:r=e<<24>>24,o=r;break;case 4:r=e<<24>>>24;break;case 1:r=e<<16>>16,o=r;break;case 5:r=e<<16>>>16;break;case 2:r=e>>0,o=r;break;case 6:r=e>>>0}return qt(r,o>>31,t)}function Gn(e,t,n,r,o){const i=kt(e,t,o);if(null!=i){const t=(e,t)=>{const n=Math.max(e.length,t.length);return e.padStart(n,"0")<=t.padStart(n,"0")},r="-"===i.sign,o=function(e,t,n){switch(t){case 2:return e?"1111111111111111111111111111111111111111111111111111111111111111":n?"1000000000000000000000000000000000000000000000000000000000000000":"111111111111111111111111111111111111111111111111111111111111111";case 8:return e?"1777777777777777777777":n?"1000000000000000000000":"777777777777777777777";case 10:return e?"18446744073709551615":n?"9223372036854775808":"9223372036854775807";case 16:return e?"FFFFFFFFFFFFFFFF":n?"8000000000000000":"7FFFFFFFFFFFFFFF";default:throw new Error("Invalid radix.")}}(n||10!==i.radix,i.radix,r);if(t(i.digits.toUpperCase(),o))return Zt(e=r?i.sign+i.digits:i.digits,n,i.radix)}throw new Error("Input string was not in a correct format.")}function qn(e,t,n,r){try{return[!0,Gn(e,t,n)]}catch(e){}return[!1,nn]}const $n=/(?:Z|[+-](\d+):?([0-5]?\d)?)\s*$/;function Zn(e){const t=e<0,n=(e=Math.abs(e))%36e5/6e4;return(t?"-":"+")+a(~~(e/36e5),2)+":"+a(n,2)}function Jn(e,t){const n=e.toISOString();return"first"===t?n.substring(0,n.indexOf("T")):n.substring(n.indexOf("T")+1,n.length-1)}function Kn(e,t,n){return t.replace(/(\w)\1*/g,t=>{let r=Number.NaN;switch(t.substring(0,1)){case"y":const o=n?e.getUTCFullYear():e.getFullYear();r=t.length<4?o%100:o;break;case"M":r=(n?e.getUTCMonth():e.getMonth())+1;break;case"d":r=n?e.getUTCDate():e.getDate();break;case"H":r=n?e.getUTCHours():e.getHours();break;case"h":const i=n?e.getUTCHours():e.getHours();r=i>12?i%12:i;break;case"m":r=n?e.getUTCMinutes():e.getMinutes();break;case"s":r=n?e.getUTCSeconds():e.getSeconds();break;case"f":r=n?e.getUTCMilliseconds():e.getMilliseconds()}return Number.isNaN(r)?t:r<10&&t.length>1?"0"+r:""+r})}function Qn(e,t){var n,r,o;const i=new Date(e.getTime()+(null!==(n=e.offset)&&void 0!==n?n:0));if("string"!=typeof t)return i.toISOString().replace(/\.\d+/,"").replace(/[A-Z]|\.\d+/g," ")+Zn(null!==(r=e.offset)&&void 0!==r?r:0);if(1!==t.length)return Kn(i,t,!0);switch(t){case"D":case"d":return Jn(i,"first");case"T":case"t":return Jn(i,"second");case"O":case"o":return function(e,t){const n=e.toISOString();return n.substring(0,n.length-1)+Zn(t)}(i,null!==(o=e.offset)&&void 0!==o?o:0);default:throw new Error("Unrecognized Date print format")}}function er(e,t){const n=1===e.kind;if("string"!=typeof t)return n?e.toUTCString():e.toLocaleString();if(1!==t.length)return Kn(e,t,n);switch(t){case"D":case"d":return n?Jn(e,"first"):e.toLocaleDateString();case"T":case"t":return n?Jn(e,"second"):e.toLocaleTimeString();case"O":case"o":return function(e,t){if(t)return e.toISOString();{const t=null==e.kind||2===e.kind;return a(e.getFullYear(),4)+"-"+a(e.getMonth()+1,2)+"-"+a(e.getDate(),2)+"T"+a(e.getHours(),2)+":"+a(e.getMinutes(),2)+":"+a(e.getSeconds(),2)+"."+a(e.getMilliseconds(),3)+(t?Zn(-6e4*e.getTimezoneOffset()):"")}}(e,n);default:throw new Error("Unrecognized Date print format")}}function tr(e,t,n){return null!=e.offset?Qn(e,t):er(e,t)}function nr(e,t){const n=new Date(e);return n.kind=0|(null==t?0:t),n}function rr(){return nr(-621355968e5,0)}function or(e){let t=new Date(e);if(isNaN(t.getTime())){const n=/^\s*(\d+[^\w\s:]\d+[^\w\s:]\d+)?\s*(\d+:\d+(?::\d+(?:\.\d+)?)?)?\s*([AaPp][Mm])?\s*([+-]\d+(?::\d+)?)?\s*$/.exec(e);if(null==n)throw new Error("The string is not a valid Date.");{let e,r=0;if(null!=n[2]){const e=n[2].split(":");r=3600*parseInt(e[0],10)+60*parseInt(e[1]||"0",10)+parseFloat(e[2]||"0"),null!=n[3]&&"PM"===n[3].toUpperCase()&&(r+=720)}if(null!=n[4]){if(null!=n[1])e=new Date(n[1]+" UTC");else{const t=new Date;e=new Date(t.getUTCFullYear()+"/"+(t.getUTCMonth()+1)+"/"+t.getUTCDate())}const t=n[4].substr(1).split(":");let o=60*parseInt(t[0],10)+parseInt(t[1]||"0",10);"+"===n[4][0]&&(o*=-1),r+=60*o}else if(null!=n[1])e=new Date(n[1]);else{const t=new Date;e=new Date(t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate())}t=new Date(e.getTime()+1e3*r),t=new Date(t.getTime()+6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))}}return t}function ir(e,t=!1){const n=or(e),r=$n.exec(e),o=null!=r?t&&"Z"===r[0]?1:2:0;return nr(n.getTime(),o)}function ur(){return nr(Date.now(),2)}function sr(e,t){const n=nr(e.getTime()+t,e.kind);if(2===e.kind){const t=e.getTimezoneOffset(),r=n.getTimezoneOffset();return t!==r?nr(n.getTime()+6e4*(r-t),e.kind):n}return n}function ar(e,t){return sr(e,1e3*t)}function cr(e,t){return e.getTime()===t.getTime()}const fr=A;function lr(e,t){return sr(e,t)}function dr(e,t){return n=e,"number"==typeof(r=t)?sr(n,-r):n.getTime()-r.getTime();var n,r}var hr={GetHashCode(){return v([this.s,this.e].concat(this.c))},Equals(e){return!this.cmp(e)},CompareTo(e){return this.cmp(e)}},vr="[big.js] ",gr=vr+"Invalid ",wr=gr+"decimal places",pr=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function mr(e,t){var n,r,o;if(0===t&&1/t<0)t="-0";else if(!pr.test(t+=""))throw Error(gr+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),o=t.length,r=0;r<n&&r<o&&"0"==t.charAt(r);)++r;if(r==o)e.c=[e.e=0];else for(e.e=n-r-1,e.c=[],n=0;r<o;)e.c[n++]=+t.charAt(r++);return e=xr(e,Sr.DP,Sr.RM)}function xr(e,t,n,r){var o=e.c,i=e.e+t+1;if(i<o.length){if(1===n)r=o[i]>=5;else if(2===n)r=o[i]>5||5==o[i]&&(r||i<0||void 0!==o[i+1]||1&o[i-1]);else if(3===n)r=r||!!o[0];else if(r=!1,0!==n)throw Error("[big.js] Invalid rounding mode");if(i<1)o.length=1,r?(e.e=-t,o[0]=1):o[0]=e.e=0;else{if(o.length=i--,r)for(;++o[i]>9;)o[i]=0,i--||(++e.e,o.unshift(1));for(i=o.length;!o[--i];)o.pop()}}else if(n<0||n>3||n!==~~n)throw Error("[big.js] Invalid rounding mode");return e}function Ar(e,t,n,r){var o,i,u=e.constructor,s=!e.c[0];if(void 0!==n){if(n!==~~n||n<(3==t)||n>1e6)throw Error(3==t?gr+"precision":wr);for(n=r-(e=new u(e)).e,e.c.length>++r&&xr(e,n,u.RM),2==t&&(r=e.e+n+1);e.c.length<r;)e.c.push(0)}if(o=e.e,n=(i=e.c.join("")).length,2!=t&&(1==t||3==t&&r<=o||o<=u.NE||o>=u.PE))i=i.charAt(0)+(n>1?"."+i.slice(1):"")+(o<0?"e":"e+")+o;else if(o<0){for(;++o;)i="0"+i;i="0."+i}else if(o>0)if(++o>n)for(o-=n;o--;)i+="0";else o<n&&(i=i.slice(0,o)+"."+i.slice(o));else n>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&(!s||4==t)?"-"+i:i}hr.abs=function(){var e=new this.constructor(this);return e.s=1,e},hr.cmp=function(e){var t,n=this.constructor,r=new n(this),o=(e=new n(e),r.c),i=e.c,u=r.s,s=e.s,a=r.e,c=e.e;if(!o[0]||!i[0])return o[0]?u:i[0]?-s:0;if(u!=s)return u;if(t=u<0,a!=c)return a>c^t?1:-1;for(s=Math.max(o.length,i.length),u=0;u<s;u++)if((a=u<o.length?o[u]:0)!=(c=u<i.length?i[u]:0))return a>c^t?1:-1;return 0},hr.div=function(e){var t=this.constructor,n=new t(this),r=(e=new t(e),n.c),o=e.c,i=n.s==e.s?1:-1,u=t.DP;if(u!==~~u||u<0||u>1e6)throw Error(wr);if(!o[0])throw Error("[big.js] Division by zero");if(!r[0])return new t(0*i);var s,a,c,f,l,d=o.slice(),h=s=o.length,v=r.length,g=r.slice(0,s),w=g.length,p=e,m=p.c=[],x=0,A=u+(p.e=n.e-e.e)+1;for(p.s=i,i=A<0?0:A,d.unshift(0);w++<s;)g.push(0);do{for(c=0;c<10;c++){if(s!=(w=g.length))f=s>w?1:-1;else for(l=-1,f=0;++l<s;)if(o[l]!=g[l]){f=o[l]>g[l]?1:-1;break}if(!(f<0))break;for(a=w==s?o:d;w;){if(g[--w]<a[w]){for(l=w;l&&!g[--l];)g[l]=9;--g[l],g[w]+=10}g[w]-=a[w]}for(;!g[0];)g.shift()}m[x++]=f?c:++c,g[0]&&f?g[w]=r[h]||0:g=[r[h]]}while((h++<v||void 0!==g[0])&&i--);return m[0]||1==x||(m.shift(),p.e--),x>A&&xr(p,u,t.RM,void 0!==g[0]),p},hr.eq=function(e){return!this.cmp(e)},hr.gt=function(e){return this.cmp(e)>0},hr.gte=function(e){return this.cmp(e)>-1},hr.lt=function(e){return this.cmp(e)<0},hr.lte=function(e){return this.cmp(e)<1},hr.minus=hr.sub=function(e){var t,n,r,o,i=this.constructor,u=new i(this),s=(e=new i(e),u.s),a=e.s;if(s!=a)return e.s=-a,u.plus(e);var c=u.c.slice(),f=u.e,l=e.c,d=e.e;if(!c[0]||!l[0])return l[0]?(e.s=-a,e):new i(c[0]?u:0);if(s=f-d){for((o=s<0)?(s=-s,r=c):(d=f,r=l),r.reverse(),a=s;a--;)r.push(0);r.reverse()}else for(n=((o=c.length<l.length)?c:l).length,s=a=0;a<n;a++)if(c[a]!=l[a]){o=c[a]<l[a];break}if(o&&(r=c,c=l,l=r,e.s=-e.s),(a=(n=l.length)-(t=c.length))>0)for(;a--;)c[t++]=0;for(a=t;n>s;){if(c[--n]<l[n]){for(t=n;t&&!c[--t];)c[t]=9;--c[t],c[n]+=10}c[n]-=l[n]}for(;0===c[--a];)c.pop();for(;0===c[0];)c.shift(),--d;return c[0]||(e.s=1,c=[d=0]),e.c=c,e.e=d,e},hr.mod=function(e){var t,n=this.constructor,r=new n(this),o=(e=new n(e),r.s),i=e.s;if(!e.c[0])throw Error("[big.js] Division by zero");return r.s=e.s=1,t=1==e.cmp(r),r.s=o,e.s=i,t?new n(r):(o=n.DP,i=n.RM,n.DP=n.RM=0,r=r.div(e),n.DP=o,n.RM=i,this.minus(r.times(e)))},hr.plus=hr.add=function(e){var t,n=this.constructor,r=new n(this),o=(e=new n(e),r.s),i=e.s;if(o!=i)return e.s=-i,r.minus(e);var u=r.e,s=r.c,a=e.e,c=e.c;if(!s[0]||!c[0])return c[0]?e:new n(s[0]?r:0*o);if(s=s.slice(),o=u-a){for(o>0?(a=u,t=c):(o=-o,t=s),t.reverse();o--;)t.push(0);t.reverse()}for(s.length-c.length<0&&(t=c,c=s,s=t),o=c.length,i=0;o;s[o]%=10)i=(s[--o]=s[o]+c[o]+i)/10|0;for(i&&(s.unshift(i),++a),o=s.length;0===s[--o];)s.pop();return e.c=s,e.e=a,e},hr.pow=function(e){var t=this.constructor,n=new t(this),r=new t(1),o=new t(1),i=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(gr+"exponent");for(i&&(e=-e);1&e&&(r=r.times(n)),e>>=1;)n=n.times(n);return i?o.div(r):r},hr.round=function(e,t){var n=this.constructor;if(void 0===e)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(wr);return xr(new n(this),e,void 0===t?n.RM:t)},hr.sqrt=function(){var e,t,n,r=this.constructor,o=new r(this),i=o.s,u=o.e,s=new r(.5);if(!o.c[0])return new r(o);if(i<0)throw Error(vr+"No square root");0===(i=Math.sqrt(o+""))||i===1/0?((t=o.c.join("")).length+u&1||(t+="0"),u=((u+1)/2|0)-(u<0||1&u),e=new r(((i=Math.sqrt(t))==1/0?"1e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+u)):e=new r(i),u=e.e+(r.DP+=4);do{n=e,e=s.times(n.plus(o.div(n)))}while(n.c.slice(0,u).join("")!==e.c.slice(0,u).join(""));return xr(e,r.DP-=4,r.RM)},hr.times=hr.mul=function(e){var t,n=this.constructor,r=new n(this),o=(e=new n(e),r.c),i=e.c,u=o.length,s=i.length,a=r.e,c=e.e;if(e.s=r.s==e.s?1:-1,!o[0]||!i[0])return new n(0*e.s);for(e.e=a+c,u<s&&(t=o,o=i,i=t,c=u,u=s,s=c),t=new Array(c=u+s);c--;)t[c]=0;for(a=s;a--;){for(s=0,c=u+a;c>a;)s=t[c]+i[a]*o[c-a-1]+s,t[c--]=s%10,s=s/10|0;t[c]=(t[c]+s)%10}for(s?++e.e:t.shift(),a=t.length;!t[--a];)t.pop();return e.c=t,e},hr.toExponential=function(e){return Ar(this,1,e,e)},hr.toFixed=function(e){return Ar(this,2,e,this.e+e)},hr.toPrecision=function(e){return Ar(this,3,e,e-1)},hr.toString=function(){return Ar(this)},hr.valueOf=hr.toJSON=function(){return Ar(this,4)};var Sr=function e(){function t(n){var r=this;if(!(r instanceof t))return void 0===n?e():new t(n);n instanceof t?(r.s=n.s,r.e=n.e,r.c=n.c.slice(),function(e){if((e=xr(e,28,0)).c.length>1&&!e.c[0]){let t=e.c.findIndex(e=>e);e.c=e.c.slice(t),e.e=e.e-t}}(r)):mr(r,n),r.constructor=t}return t.prototype=hr,t.DP=28,t.RM=1,t.NE=-29,t.PE=29,t.version="5.2.2",t}(),br=Sr,yr=br;const Tr=new br(0);new br(1),new br(-1),new br("79228162514264337593543950335"),new br("-79228162514264337593543950335");function Er(e){try{return[!0,new br(e.trim())]}catch(e){return[!1,Tr]}}function Rr(e,t=0){if(0!=(-276&t))throw new Error("RegexOptions only supports: IgnoreCase, Multiline, Singleline and ECMAScript");let n="g";return n+=1&t?"i":"",n+=2&t?"m":"",n+=16&t?"s":"",new RegExp(e,n)}function Cr(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function Pr(e,t,n=0){let r;if(r=e instanceof RegExp?(r=e,e=t,r.lastIndex=n,r):r=Rr(t,n),!r.global)throw new Error("Non-global RegExp");let o=r.exec(e);const i=[];for(;null!==o;)i.push(o),o=r.exec(e);return i}const Mr=/(^|[^%])%([0+\- ]*)(\d+)?(?:\.(\d+))?(\w)/,Fr=/\{(\d+)(,-?\d+)?(?:\:([a-zA-Z])(\d{0,2})|\:(.+?))?\}/g,Br=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Dr(e){return"number"==typeof e||e instanceof Bn||e instanceof yr}function Lr(e,t){return e instanceof Bn?kn(e,t)<0:e instanceof yr?e.cmp(t)<0:e<t}function _r(e,t){return e instanceof Bn?Ln(e,t):e instanceof yr?e.mul(t):e*t}function Or(e,t){return e instanceof Bn?String(e)+(0).toFixed(t).substr(1):e.toFixed(t)}function Ur(e,t){return e instanceof Bn?String(e)+(0).toPrecision(t).substr(1):e.toPrecision(t)}function Ir(e,t){return e instanceof Bn?String(e)+(0).toExponential(t).substr(1):e.toExponential(t)}function kr(e){return e instanceof Bn?Yn(e.unsigned?e:zn(jn(e),!0),16):(Number(e)>>>0).toString(16)}function Nr(e){return{input:e,cont:(t=e,e=>Mr.test(t)?function e(t,n){return(...r)=>{let o=t;for(const e of r)o=jr(o,e);return Mr.test(o)?e(o,n):n(o.replace(/%%/g,"%"))}}(t,e):e(t))};var t}function zr(e){return e.cont(e=>{console.log(e)})}function Vr(e){return e.cont(e=>e)}function Hr(e){return e.cont(e=>{throw new Error(e)})}function jr(e,t){return e.replace(Mr,(e,n,r,o,i,u)=>{let s="";if(Dr(t))switch("x"!==u.toLowerCase()&&(Lr(t,0)?(t=_r(t,-1),s="-"):r.indexOf(" ")>=0?s=" ":r.indexOf("+")>=0&&(s="+")),i=null==i?null:parseInt(i,10),u){case"f":case"F":t=Or(t,i=null!=i?i:6);break;case"g":case"G":t=null!=i?Ur(t,i):Ur(t);break;case"e":case"E":t=null!=i?Ir(t,i):Ir(t);break;case"x":t=kr(t);break;case"X":t=kr(t).toUpperCase();break;default:t=String(t)}if(o=parseInt(o,10),isNaN(o))t=s+t;else{const e=r.indexOf("0")>=0,n=r.indexOf("-")>=0,i=n||!e?" ":"0";t="0"===i?s+(t=qr(t,o-s.length,i,n)):qr(s+t,o,i,n)}return(n+t).replace(/%/g,"%%")})}function Wr(e,...t){return"object"==typeof e&&t.length>0&&(e=t[0],t.shift()),e.replace(Fr,(e,n,r,o,i,u)=>{let s=t[n];if(Dr(s))switch(i=null==i?null:parseInt(i,10),o){case"f":case"F":s=Or(s,i=null!=i?i:2);break;case"g":case"G":s=null!=i?Ur(s,i):Ur(s);break;case"e":case"E":s=null!=i?Ir(s,i):Ir(s);break;case"p":case"P":i=null!=i?i:2,s=Or(_r(s,100),i)+" %";break;case"d":case"D":s=null!=i?qr(String(s),i,"0"):String(s);break;case"x":case"X":s=null!=i?qr(kr(s),i,"0"):kr(s),"X"===o&&(s=s.toUpperCase());break;default:if(u){let e="";s=u.replace(/(0+)(\.0+)?/,(t,n,r)=>(Lr(s,0)&&(s=_r(s,-1),e="-"),s=Or(s,null!=r?r.length-1:0),qr(s,(n||"").length-e.length+(null!=r?r.length:0),"0"))),s=e+s}}else s instanceof Date&&(s=tr(s,u||o));return r=parseInt((r||" ").substring(1),10),isNaN(r)||(s=qr(String(s),Math.abs(r)," ",r<0)),s})}function Yr(e,t){return Array.isArray(t)?t.join(e):Array.from(t).join(e)}function Xr(e,t){const n=function(e,...t){if(0===t.length)return e.trim();const n="["+Cr(t.join(""))+"]+";return e.replace(new RegExp("^"+n),"").replace(new RegExp(n+"$"),"")}(e,"{","}").toLowerCase();if(Br.test(n))return t?[!0,n]:n;if(t)return[!1,"00000000-0000-0000-0000-000000000000"];throw new Error("Guid should contain 32 digits with 4 dashes: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx")}function Gr(){let e="";for(let t=0;t++<36;)e+=51*t&52?(15^t?8^Math.random()*(20^t?16:4):4).toString(16):"-";return e}function qr(e,t,n,r){n=n||" ",t-=e.length;for(let o=0;o<t;o++)e=r?e+n:n+e;return e}function $r(e,t,n,r){if(r="number"==typeof r?r:void 0,(n="number"==typeof n?n:void 0)&&n<0)throw new Error("Count cannot be less than zero");if(0===n)return[];if(!Array.isArray(t)){if(0===r)return e.split(t,n);const o=arguments.length;t=Array(o-1);for(let e=1;e<o;e++)t[e-1]=arguments[e]}t=(t=t.map(e=>Cr(e))).length>0?t:[" "];let o=0;const i=[],u=new RegExp(t.join("|"),"g");for(;null==n||n>1;){const t=u.exec(e);if(null===t)break;(!r||t.index-o>0)&&(n=null!=n?n-1:n,i.push(e.substring(o,t.index))),o=u.lastIndex}return(!r||e.length-o>0)&&i.push(e.substring(o)),i}class Zr{constructor(e){this.iter=e}MoveNext(){const e=this.iter.next();return this.current=e.value,!e.done}get Current(){return this.current}Reset(){throw new Error("JS iterators cannot be reset")}Dispose(){}}function Jr(e){return new Zr(e[Symbol.iterator]())}function Kr(e){return{next:()=>e.MoveNext()?{done:!1,value:e.Current}:{done:!0,value:void 0}}}function Qr(e){const t={[Symbol.iterator]:e,toString:()=>"seq ["+Array.from(t).join("; ")+"]"};return t}function eo(e){return oo(()=>So(t=>null!=t&&t<e.length?[e[t],t+1]:void 0,0))}function to(e,t){return oo(()=>{let n=!1;let r=[e[Symbol.iterator](),void 0];return So(()=>{var e,o;let i;if(!n){if(i=null===(e=r[0])||void 0===e?void 0:e.next(),null!=i&&!i.done)return[i.value,r];n=!0,r=[void 0,t[Symbol.iterator]()]}return i=null===(o=r[1])||void 0===o?void 0:o.next(),null==i||i.done?void 0:[i.value,r]},r)})}function no(e){return oo(()=>{const t=e[Symbol.iterator]();let n;return So(e=>{let r=!1;for(;!r;)if(null==e){const n=t.next();n.done?r=!0:e=n.value[Symbol.iterator]()}else{const t=e.next();t.done?e=void 0:(n=t.value,r=!0)}return null!=e?[n,e]:void 0},void 0)})}function ro(e,t){return no(vo(e,t))}function oo(e){return Qr(()=>e()[Symbol.iterator]())}function io(e){return[e]}function uo(e,t){let n;for(const r=t[Symbol.iterator]();n=r.next(),!n.done;)if(e(n.value))return!0;return!1}function so(e,t){return uo(t=>x(t,e),t)}function ao(e,t){return oo(()=>So(t=>{let n=t.next();for(;!n.done;){if(e(n.value))return[n.value,t];n=t.next()}},t[Symbol.iterator]()))}function co(e,t,n){if(Array.isArray(n)||ArrayBuffer.isView(n))return n.reduce(e,t);{let r;for(let o=0,i=n[Symbol.iterator]();r=i.next(),!r.done;o++)t=e(t,r.value,o);return t}}function fo(e){const t=e[Symbol.iterator]().next();return t.done?void 0:Le(t.value)}function lo(e,t){co((t,n)=>{e(n)},void 0,t)}function ho(e,t){co((t,n,r)=>{e(null!=r?r:0,n)},void 0,t)}function vo(e,t){return oo(()=>So(t=>{const n=t.next();return n.done?void 0:[e(n.value),t]},t[Symbol.iterator]()))}function go(e,t){return oo(()=>{let n=0;return So(t=>{const r=t.next();return r.done?void 0:[e(n++,r.value),t]},t[Symbol.iterator]())})}function wo(e,t,n){const r=null!=n?n.Compare:T;return mo((t,n)=>-1===r(e(t),e(n))?t:n,t)}function po(e,t,n){if(0===t)throw new Error("Step cannot be 0");return oo(()=>So(e=>t>0&&e<=n||t<0&&e>=n?[e,e+t]:void 0,e))}function mo(e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))return t.reduce(e);const n=t[Symbol.iterator]();let r=n.next();if(r.done)throw new Error("Seq was empty");let o=r.value;for(;r=n.next(),!r.done;)o=e(o,r.value);return o}function xo(e){return eo((Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):Array.from(e)).reverse())}function Ao(e,t,n){return co((t,r)=>n.Add(t,e(r)),n.GetZero(),t)}function So(e,t){return Qr(()=>{let n=t;return{next(){const t=e(n);if(null!=t){const e=_e(t);if(null!=e)return n=e[1],{done:!1,value:e[0]}}return{done:!0,value:void 0}}}})}const bo=H((function(){}));function yo(e,t){return{then(e,n){try{return t().then(e,n)}catch(e){if(x(n,null)){return Promise.reject(e)}try{return Promise.resolve(n(e))}catch(e){return Promise.reject(e)}}},catch(e){try{return t().catch(e)}catch(t){try{return Promise.resolve(e(t))}catch(e){return Promise.reject(e)}}}}}function To(e,t){return new Promise((function(e,n){try{let r;r=Promise.resolve(t),r.then(e,n)}catch(e){n(e)}}))}H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);function Eo(e,t){return fetch(e,function(e,t=P){function n(e){throw new Error("Cannot infer key and value of "+String(e))}const r={},o=t;for(let t of e){let e=P;if(null==t&&n(t),"function"==typeof t.toJSON&&(t=t.toJSON(),e=o),Array.isArray(t))switch(t.length){case 0:n(t);break;case 1:r[_(t[0],e)]=!0;break;case 2:const o=t[1];r[_(t[0],e)]=o;break;default:r[_(t[0],e)]=t.slice(1)}else"string"==typeof t?r[_(t,e)]=!0:n(t)}return r}(t,1)).then((function(e){if(e.ok)return e;{const n=f((t=e).status)+" "+t.statusText+" for URL "+t.url;throw new Error(n)}var t}))}const Ro=C(null);!function(){this instanceof bo?bo.call(this):new bo}();function Co(e,t,n,r,o,i,u){e.clearColor(r,o,i,u),e.clear(~~e.COLOR_BUFFER_BIT|~~e.DEPTH_BUFFER_BIT)}function Po(e){return 0!==e&&0==(e&e-1)}function Mo(e){return e.createFramebuffer()}function Fo(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t)}function Bo(e,t,n){let r;switch(t){case 0:r=e.COLOR_ATTACHMENT0;break;case 1:r=e.COLOR_ATTACHMENT1;break;case 2:r=e.COLOR_ATTACHMENT2;break;case 3:r=e.COLOR_ATTACHMENT3;break;case 4:r=e.COLOR_ATTACHMENT4;break;default:throw new Error(">4")}e.framebufferTexture2D(e.FRAMEBUFFER,r,e.TEXTURE_2D,n,0)}function Do(e){e.bindFramebuffer(e.FRAMEBUFFER,null)}const Lo=C((function(e){throw new Error("Dispatch not set")}));function _o(e){Lo()(new Pt(1,"Game",e))}function Oo(e){Lo()(new Pt(0,"Host",e))}const Uo=C((function(e){throw new Error("getSprite not set")})),Io=C((function(e){throw new Error("getAudio not set")}));function ko(e,t){return Math.random()*(t-e)+e}function No(e,t){return function(e,t){return Math.floor(Math.random()*(t-e))+e}(e,t)}const zo=H((function(e,t){const n=new K(null);this.comparer=t,n.contents=this,this.hashMap=new Map([]),this["init@20-1"]=1,lo((function(e){Yo(n.contents,e[0],e[1])}),e)}));function Vo(e,t){const n=0|e.comparer.GetHashCode(t),r=i(e.hashMap,n,null);return r[0]?[!0,n,r[1].findIndex((function(n){return e.comparer.Equals(t,n[0])}))]:[!1,n,-1]}function Ho(e,t){const n=Vo(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return z(e.hashMap,n[1])[n[2]];case 1:return}}function jo(e){e.hashMap.clear()}function Wo(e){return 0|Ao((function(e){return e.length}),e.hashMap.values(),{GetZero:()=>0,Add:(e,t)=>e+t})}function Yo(e,t,n){const r=Vo(e,t);switch(r[0]&&r[2]>-1?0:1){case 0:{const e=Wr("An item with the same key has already been added. Key: {0}",t);throw new Error(e)}case 1:if(r[0]){z(e.hashMap,r[1]).push([t,n])}else e.hashMap.set(r[1],[[t,n]])}}function Xo(e,t){const n=Vo(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return z(e.hashMap,n[1]).splice(n[2],1),!0;case 1:return!1}}zo.prototype[Symbol.iterator]=function(){const e=this;return Kr(Jr(oo((function(){return ro((function(e){return vo((function(e){return e}),e)}),e.hashMap.values())}))))},zo.prototype.Add=function(e){Yo(this,e[0],e[1])},zo.prototype.Clear=function(){jo(this)},zo.prototype.Contains=function(e){const t=Ho(this,e[0]);switch(null!=t&&x(t[1],e[1])?0:1){case 0:return!0;case 1:return!1}},zo.prototype.CopyTo=function(e,t){ho((function(n,r){e[t+n]=r}),this)},Object.defineProperty(zo.prototype,"Count",{get:function(){return 0|Wo(this)}}),Object.defineProperty(zo.prototype,"IsReadOnly",{get:function(){return!1}}),zo.prototype.Remove=function(e){const t=this,n=Ho(t,e[0]);if(null!=n){if(x(n[1],e[1])){Xo(t,e[0])}return!0}return!1},Object.defineProperty(zo.prototype,"size",{get:function(){return 0|Wo(this)}}),zo.prototype.clear=function(){jo(this)},zo.prototype.delete=function(e){return Xo(this,e)},zo.prototype.entries=function(){return vo((function(e){return e}),this)},zo.prototype.get=function(e){return function(e,t){const n=Ho(e,t);if(null!=n){return n[1]}throw new Error("The item was not found in collection")}(this,e)},zo.prototype.has=function(e){return function(e,t){const n=Vo(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return!0;case 1:return!1}}(this,e)},zo.prototype.keys=function(){return vo((function(e){return e[0]}),this)},zo.prototype.set=function(e,t){return function(e,t,n){const r=Vo(e,t);switch(r[0]&&r[2]>-1?0:1){case 0:z(e.hashMap,r[1])[r[2]]=[t,n];break;case 1:if(r[0]){z(e.hashMap,r[1]).push([t,n])}else e.hashMap.set(r[1],[[t,n]])}}(this,e,t),this},zo.prototype.values=function(){return vo((function(e){return e[1]}),this)};const Go=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);function qo(e){return function e(t,n){e:for(;;){const r=t,o=n;switch(o.tag){case 1:return r+1|0;case 2:t=e(r+1,o.fields[2]),n=o.fields[3];continue e;default:return 0|r}break}}(0,e)}function $o(){return new Go(0,"MapEmpty")}function Zo(e){switch(e.tag){case 1:return 1;case 2:return 0|e.fields[4];default:return 0}}function Jo(e,t,n,r){switch(0===e.tag&&0===r.tag?0:1){case 0:return new Go(1,"MapOne",t,n);case 1:{const o=0|Zo(e),i=0|Zo(r);return new Go(2,"MapNode",t,n,e,r,(0|(o<i?i:o))+1)}}}function Ko(e,t,n,r){const o=0|Zo(e),i=0|Zo(r);if(i>o+2){if(2===r.tag){if(Zo(r.fields[2])>o+1){if(2===r.fields[2].tag)return Jo(Jo(e,t,n,r.fields[2].fields[2]),r.fields[2].fields[0],r.fields[2].fields[1],Jo(r.fields[2].fields[3],r.fields[0],r.fields[1],r.fields[3]));throw new Error("rebalance")}return Jo(Jo(e,t,n,r.fields[2]),r.fields[0],r.fields[1],r.fields[3])}throw new Error("rebalance")}if(o>i+2){if(2===e.tag){if(Zo(e.fields[3])>i+1){if(2===e.fields[3].tag)return Jo(Jo(e.fields[2],e.fields[0],e.fields[1],e.fields[3].fields[2]),e.fields[3].fields[0],e.fields[3].fields[1],Jo(e.fields[3].fields[3],t,n,r));throw new Error("re  balance")}return Jo(e.fields[2],e.fields[0],e.fields[1],Jo(e.fields[3],t,n,r))}throw new Error("rebalance")}return Jo(e,t,n,r)}function Qo(e,t,n,r){switch(r.tag){case 1:{const o=0|e.Compare(t,r.fields[0]);return o<0?new Go(2,"MapNode",t,n,new Go(0,"MapEmpty"),r,2):0===o?new Go(1,"MapOne",t,n):new Go(2,"MapNode",t,n,r,new Go(0,"MapEmpty"),2)}case 2:{const o=0|e.Compare(t,r.fields[0]);return o<0?Ko(Qo(e,t,n,r.fields[2]),r.fields[0],r.fields[1],r.fields[3]):0===o?new Go(2,"MapNode",t,n,r.fields[2],r.fields[3],r.fields[4]):Ko(r.fields[2],r.fields[0],r.fields[1],Qo(e,t,n,r.fields[3]))}default:return new Go(1,"MapOne",t,n)}}function ei(e,t,n){e:for(;;){const r=e,o=t,i=n;switch(i.tag){case 1:return 0===(0|r.Compare(o,i.fields[0]))?Le(i.fields[1]):void 0;case 2:{const u=0|r.Compare(o,i.fields[0]);if(u<0){e=r,t=o,n=i.fields[2];continue e}if(0===u)return Le(i.fields[1]);e=r,t=o,n=i.fields[3];continue e}default:return}break}}function ti(e,t){e:for(;;){const n=e,r=t;switch(r.tag){case 1:n(r.fields[0],r.fields[1]);break;case 2:ti(n,r.fields[2]),n(r.fields[0],r.fields[1]),e=n,t=r.fields[3];continue e}break}}function ni(e,t){const n=Jr(t);try{return function(e,t,n){for(;;){const r=e,o=t,i=n;if(!i.MoveNext())return o;{const u=i.Current;e=r,t=Qo(r,u[0],u[1],o),n=i}}}(e,$o(),n)}finally{o(n)&&n.Dispose()}}const ri=H((function(e,t){this.stack=e,this.started=t}),Z);function oi(e){for(;;){const t=e;if(null==t.tail)return new Y;if(1===t.head.tag)return t;2!==t.head.tag?e=t.tail:e=new Y(t.head.fields[2],new Y(new Go(1,"MapOne",t.head.fields[0],t.head.fields[1]),new Y(t.head.fields[3],t.tail)))}}function ii(e){return new ri(oi(new Y(e,new Y)),!1)}function ui(e){if(e.started){const t=e.stack;if(null==t.tail)return function(){throw new Error("enumeration already finished")}();if(1===t.head.tag)return[t.head.fields[0],t.head.fields[1]];throw new Error("Please report error: Map iterator, unexpected stack for current")}return function(){throw new Error("enumeration not started")}()}const si=H((function(e){this.s=e,this.i=ii(this.s)}));function ai(e){return function(e){return this instanceof si?si.call(this,e):new si(e)}(e)}function ci(e){return So((function(e){return e.MoveNext()?[e.Current,e]:void 0}),ai(e))}Object.defineProperty(si.prototype,"Current",{get:function(){return ui(this.i)}}),si.prototype.MoveNext=function(){return function(e){if(e.started){const t=e.stack;if(null==t.tail)return!1;if(1===t.head.tag)return e.stack=oi(t.tail),!(null==e.stack.tail);throw new Error("Please report error: Map iterator, unexpected stack for moveNext")}return e.started=!0,!(null==e.stack.tail)}(this.i)},si.prototype.Reset=function(){this.i=ii(this.s)},si.prototype.Dispose=function(){};const fi=H((function(e,t){this.comparer=e,this.tree=t}));function li(e,t){return this instanceof fi?fi.call(this,e,t):new fi(e,t)}function di(e){return e.tree}function hi(e,t){return function(e,t,n){e:for(;;){const r=e,o=t,i=n;switch(i.tag){case 1:if(0===(0|r.Compare(o,i.fields[0])))return i.fields[1];throw new Error("key not found");case 2:{const u=0|r.Compare(o,i.fields[0]);if(u<0){e=r,t=o,n=i.fields[2];continue e}if(0===u)return i.fields[1];e=r,t=o,n=i.fields[3];continue e}default:throw new Error("key not found")}break}}(e.comparer,t,e.tree)}function vi(e,t){return li(e.comparer,function e(t,n){switch(n.tag){case 1:return new Go(1,"MapOne",n.fields[0],t(n.fields[0],n.fields[1]));case 2:{const r=e(t,n.fields[2]),o=t(n.fields[0],n.fields[1]),i=e(t,n.fields[3]);return new Go(2,"MapNode",n.fields[0],o,r,i,n.fields[4])}default:return $o()}}(t,e.tree))}function gi(e){return qo(e.tree)}function wi(e,t){return function(e,t,n){e:for(;;){const r=e,o=t,i=n;switch(i.tag){case 1:return 0===r.Compare(o,i.fields[0]);case 2:{const u=0|r.Compare(o,i.fields[0]);if(u<0){e=r,t=o,n=i.fields[2];continue e}if(0===u)return!0;e=r,t=o,n=i.fields[3];continue e}default:return!1}break}}(e.comparer,t,e.tree)}function pi(e,t,n){return o=e,i=t,li((r=n).comparer,Qo(r.comparer,o,i,r.tree));var r,o,i}function mi(e,t){return hi(t,e)}function xi(e,t){return r=e,ei((n=t).comparer,r,n.tree);var n,r}function Ai(e,t){ti(e,t.tree)}function Si(e,t){return vi(t,e)}function bi(e,t){return li(t,(n=t,r=e,co((function(e,t){return Qo(n,t[0],t[1],e)}),$o(),r)));var n,r}function yi(e,t){return li(t,function(e,t){let n=$o();for(let r=0;r<=t.length-1;r++){const o=t[r];n=Qo(e,o[0],o[1],n)}return n}(t,e))}function Ti(e){return li(e,new Go(0,"MapEmpty"))}function Ei(e,t){return function(e,t){return this instanceof zo?zo.call(this,e,t):new zo(e,t)}(e,t)}fi.prototype.toString=function(){let e,t;return t=vo((function(e){return Wr("({0}, {1})",e[0],e[1])}),this),e=Yr("; ",t),"map ["+e+"]"},fi.prototype.GetHashCode=function(){const e=function(e,t){return(e<<1)+t+631};let t=0;const n=ai(di(this));for(;n.MoveNext();){const r=n.Current;t=e(t,w(r[0])),t=e(t,w(r[1]))}return 0|Math.abs(t)},fi.prototype.Equals=function(e){return 0===this.CompareTo(e)},fi.prototype[Symbol.iterator]=function(){return Kr(ai(this.tree))},fi.prototype.CompareTo=function(e){const t=this;let n=0,r=!1;const i=ai(di(t));try{const u=ai(di(e));try{for(;!r&&0===n;){const e=[i.MoveNext(),u.MoveNext()];if(e[0])if(e[1]){const e=i.Current,r=u.Current,o=0|t.comparer.Compare(e[0],r[0]);n=0!==o?o:T(e[1],r[1])}else n=1;else e[1]?n=-1:r=!0}return 0|n}finally{o(u)&&u.Dispose()}}finally{o(i)&&i.Dispose()}},Object.defineProperty(fi.prototype,"size",{get:function(){return 0|gi(this)}}),fi.prototype.clear=function(){throw new Error("Map cannot be mutated")},fi.prototype.delete=function(e){throw new Error("Map cannot be mutated")},fi.prototype.entries=function(){return ci(di(this))},fi.prototype.get=function(e){return hi(this,e)},fi.prototype.has=function(e){return wi(this,e)},fi.prototype.keys=function(){return vo((function(e){return e[0]}),ci(di(this)))},fi.prototype.set=function(e,t){throw new Error("Map cannot be mutated")},fi.prototype.values=function(){return vo((function(e){return e[1]}),ci(di(this)))};const Ri=H((function(e,t){const n=new K(null);this.comparer=t,n.contents=this,this.hashMap=new Map([]),this["init@21-2"]=1,lo((function(e){Bi(n.contents,e)}),e)}));function Ci(e,t){return this instanceof Ri?Ri.call(this,e,t):new Ri(e,t)}function Pi(e,t){const n=0|e.comparer.GetHashCode(t),r=i(e.hashMap,n,null);return r[0]?[!0,n,r[1].findIndex((function(n){return e.comparer.Equals(t,n)}))]:[!1,n,-1]}function Mi(e){e.hashMap.clear()}function Fi(e){return 0|Ao((function(e){return e.length}),e.hashMap.values(),{GetZero:()=>0,Add:(e,t)=>e+t})}function Bi(e,t){const n=Pi(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return!1;case 1:if(n[0]){z(e.hashMap,n[1]).push(t);return!0}return e.hashMap.set(n[1],[t]),!0}}function Di(e,t){const n=Pi(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return!0;case 1:return!1}}function Li(e,t){const n=Pi(e,t);switch(n[0]&&n[2]>-1?0:1){case 0:return z(e.hashMap,n[1]).splice(n[2],1),!0;case 1:return!1}}Ri.prototype[Symbol.iterator]=function(){const e=this;return Kr(Jr(oo((function(){return ro((function(e){return vo((function(e){return e}),e)}),e.hashMap.values())}))))},Ri.prototype.Add=function(e){Bi(this,e)},Ri.prototype.Clear=function(){Mi(this)},Ri.prototype.Contains=function(e){return Di(this,e)},Ri.prototype.CopyTo=function(e,t){ho((function(n,r){e[t+n]=r}),this)},Object.defineProperty(Ri.prototype,"Count",{get:function(){return 0|Fi(this)}}),Object.defineProperty(Ri.prototype,"IsReadOnly",{get:function(){return!1}}),Ri.prototype.Remove=function(e){return Li(this,e)},Object.defineProperty(Ri.prototype,"size",{get:function(){return 0|Fi(this)}}),Ri.prototype.add=function(e){Bi(this,e);return this},Ri.prototype.add_=function(e){return Bi(this,e)},Ri.prototype.clear=function(){Mi(this)},Ri.prototype.delete=function(e){return Li(this,e)},Ri.prototype.has=function(e){return Di(this,e)},Ri.prototype.keys=function(){return vo((function(e){return e}),this)},Ri.prototype.values=function(){return vo((function(e){return e}),this)},Ri.prototype.entries=function(){return vo((function(e){return[e,e]}),this)};const _i=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);function Oi(e){return new _i(2,"SetOne",e)}function Ui(e,t,n,r){return new _i(1,"SetNode",e,t,n,r)}function Ii(e){switch(e.tag){case 2:return 1;case 1:return 0|e.fields[3];default:return 0}}function ki(e,t,n){switch(0===e.tag&&0===n.tag?0:1){case 0:return Oi(t);case 1:{const r=0|Ii(e),o=0|Ii(n);return Ui(t,e,n,(0|(r<o?o:r))+1)}}}function Ni(e,t,n){const r=0|Ii(e),o=0|Ii(n);if(o>r+2){if(1===n.tag){if(Ii(n.fields[1])>r+1){if(1===n.fields[1].tag)return ki(ki(e,t,n.fields[1].fields[1]),n.fields[1].fields[0],ki(n.fields[1].fields[2],n.fields[0],n.fields[2]));throw new Error("rebalance")}return ki(ki(e,t,n.fields[1]),n.fields[0],n.fields[2])}throw new Error("rebalance")}if(r>o+2){if(1===e.tag){if(Ii(e.fields[2])>o+1){if(1===e.fields[2].tag)return ki(ki(e.fields[1],e.fields[0],e.fields[2].fields[1]),e.fields[2].fields[0],ki(e.fields[2].fields[2],t,n));throw new Error("rebalance")}return ki(e.fields[1],e.fields[0],ki(e.fields[2],t,n))}throw new Error("rebalance")}return ki(e,t,n)}function zi(e,t,n){switch(n.tag){case 2:{const r=0|e.Compare(t,n.fields[0]);return r<0?Ui(t,new _i(0,"SetEmpty"),n,2):0===r?n:Ui(t,n,new _i(0,"SetEmpty"),2)}case 0:return Oi(t);default:{const r=0|e.Compare(t,n.fields[0]);return r<0?Ni(zi(e,t,n.fields[1]),n.fields[0],n.fields[2]):0===r?n:Ni(n.fields[1],n.fields[0],zi(e,t,n.fields[2]))}}}const Vi=H((function(e,t){this.stack=e,this.started=t}),Z);function Hi(e){for(;;){const t=e;if(null==t.tail)return new Y;if(2===t.head.tag)return t;1!==t.head.tag?e=t.tail:e=new Y(t.head.fields[1],new Y(Oi(t.head.fields[0]),new Y(t.head.fields[2],t.tail)))}}function ji(e){return new Vi(Hi(new Y(e,new Y)),!1)}function Wi(e){if(e.started){const t=e.stack;if(null==t.tail)return function(){throw new Error("Enumeration already started")}();if(2===t.head.tag)return t.head.fields[0];throw new Error("Please report error: Set iterator, unexpected stack for current")}return function(){throw new Error("Enumeration not started")}()}const Yi=H((function(e){this.s=e,this.i=ji(this.s)}));function Xi(e){return function(e){return this instanceof Yi?Yi.call(this,e):new Yi(e)}(e)}function Gi(e,t,n){return 0===t.tag?0===n.tag?0:-1:0===n.tag?1:0|function(e,t,n){e:for(;;){const N=e,z=t,V=n;var r,o,i,u,s,a,c,f,l,d,h,v,g,w,p,m,x,A,S,b,y,T,E,R,C,P,M,F,B,D,L,_,O,U,I,k;switch(null!=z.tail?null!=V.tail?2===V.head.tag?2===z.head.tag?(r=4,u=z.head.fields[0],s=V.head.fields[0],a=z.tail,c=V.tail):1===z.head.tag?0===z.head.fields[1].tag?(r=6,g=z.head.fields[1],w=z.head.fields[0],p=z.head.fields[2],m=V.head.fields[0],x=z.tail,A=V.tail):(r=9,M=z.head.fields[0],F=z.head.fields[1],B=z.head.fields[2],D=z.tail):(r=10,L=V.head.fields[0],_=V.tail):1===V.head.tag?0===V.head.fields[1].tag?2===z.head.tag?(r=5,f=z.head.fields[0],l=V.head.fields[0],d=V.head.fields[2],h=z.tail,v=V.tail):1===z.head.tag?0===z.head.fields[1].tag?(r=7,S=z.head.fields[0],b=z.head.fields[2],y=V.head.fields[0],T=V.head.fields[2],E=z.tail,R=V.tail):(r=9,M=z.head.fields[0],F=z.head.fields[1],B=z.head.fields[2],D=z.tail):(r=11,O=V.head.fields[0],U=V.head.fields[1],I=V.head.fields[2],k=V.tail):2===z.head.tag?(r=8,C=z.head.fields[0],P=z.tail):1===z.head.tag?(r=9,M=z.head.fields[0],F=z.head.fields[1],B=z.head.fields[2],D=z.tail):(r=11,O=V.head.fields[0],U=V.head.fields[1],I=V.head.fields[2],k=V.tail):2===z.head.tag?(r=8,C=z.head.fields[0],P=z.tail):1===z.head.tag?(r=9,M=z.head.fields[0],F=z.head.fields[1],B=z.head.fields[2],D=z.tail):(r=3,o=z.tail,i=V.tail):r=2:r=null!=V.tail?1:0,r){case 0:return 0;case 1:return-1;case 2:return 1;case 3:e=N,t=o,n=i;continue e;case 4:{const r=0|N.Compare(u,s);if(0!==r)return 0|r;e=N,t=a,n=c;continue e}case 5:{const r=0|N.Compare(f,l);if(0!==r)return 0|r;e=N,t=new Y(new _i(0,"SetEmpty"),h),n=new Y(d,v);continue e}case 6:{const r=0|N.Compare(w,m);if(0!==r)return 0|r;e=N,t=new Y(p,x),n=new Y(g,A);continue e}case 7:{const r=0|N.Compare(S,y);if(0!==r)return 0|r;e=N,t=new Y(b,E),n=new Y(T,R);continue e}case 8:e=N,t=new Y(new _i(0,"SetEmpty"),new Y(Oi(C),P)),n=V;continue e;case 9:e=N,t=new Y(F,new Y(Ui(M,new _i(0,"SetEmpty"),B,0),D)),n=V;continue e;case 10:e=N,t=z,n=new Y(new _i(0,"SetEmpty"),new Y(Oi(L),_));continue e;case 11:e=N,t=z,n=new Y(U,new Y(Ui(O,new _i(0,"SetEmpty"),I,0),k));continue e}break}}(e,new Y(t,new Y),new Y(n,new Y))}function qi(e,t){const n=Jr(t);try{return function(e,t,n){for(;;){const r=e,o=t,i=n;if(!i.MoveNext())return o;e=r,t=zi(r,i.Current,o),n=i}}(e,new _i(0,"SetEmpty"),n)}finally{o(n)&&n.Dispose()}}Object.defineProperty(Yi.prototype,"Current",{get:function(){return Wi(this.i)}}),Yi.prototype.MoveNext=function(){return function(e){if(e.started){const t=e.stack;if(null==t.tail)return!1;if(2===t.head.tag)return e.stack=Hi(t.tail),!(null==e.stack.tail);throw new Error("Please report error: Set iterator, unexpected stack for moveNext")}return e.started=!0,!(null==e.stack.tail)}(this.i)},Yi.prototype.Reset=function(){this.i=ji(this.s)},Yi.prototype.Dispose=function(){};const $i=H((function(e,t){this.comparer=e,this.tree=t}));function Zi(e,t){return this instanceof $i?$i.call(this,e,t):new $i(e,t)}function Ji(e){return e.comparer}function Ki(e){return e.tree}function Qi(e,t){return Zi(t,qi(t,e))}function eu(e,t){return Ci(e,t)}$i.prototype.toString=function(){return"set ["+(Yr("; ",vo((function(e){return String(e)}),this))+"]")},$i.prototype.GetHashCode=function(){let e=0;const t=Xi(Ki(this));for(;t.MoveNext();){e=((0|e)<<1)+(0|w(t.Current))+631}return 0|Math.abs(e)},$i.prototype.Equals=function(e){return 0===Gi(Ji(this),Ki(this),Ki(e))},$i.prototype.CompareTo=function(e){return 0|Gi(Ji(this),Ki(this),Ki(e))},$i.prototype[Symbol.iterator]=function(){return Kr(Xi(Ki(this)))};const tu="An index satisfying the predicate was not found in the collection.";function nu(e,t,n,r){return e.fill(r,t,t+n),e}function ru(e,t,n){if(ArrayBuffer.isView(t)){const r=0|t.length,o=new n(r);for(let n=0;n<=r-1;n++)o[n]=e(t[n]);return o}return t.map((function(t){return e(t)}))}function ou(e,t,n){if(e<0)throw new Error("The input must be non-negative\\nParameter name: count");const r=new n(e);for(let n=0;n<=e-1;n++)r[n]=t(n);return r}function iu(e,t,n){return n.reduce((function(t,n){return e(t,n)}),t)}function uu(e,t,n,r){return function(e,t,n,r){let o=r;if(t.length!==n.length)throw new Error("Arrays had different lengths");const i=0|t.length;for(let r=1;r<=i;r++)o=e(r-1,t[i-r],n[i-r],o);return o}((function(t,n,r,o){return e(n,r,o)}),t,n,r)}function su(e,t,n){let r=n.GetZero();for(let o=0;o<=t.length-1;o++)r=n.Add(r,e(t[o]));return r}function au(e,t){return t.from(e)}function cu(e){for(;;){const t=e;if(null==t.tail)return;if(null==t.tail.tail)return Le(t.head);e=t.tail}}function fu(e,t,n){for(;;){const r=e,o=t,i=n;if(null==i.tail)return o;e=r,t=r(o,i.head),n=i.tail}}function lu(e){return fu((function(e,t){return new Y(t,e)}),new Y,e)}function du(e){return lu(co((function(e,t){return new Y(t,e)}),new Y,e))}function hu(e){return fu((function(e,t){return e+1}),0,e)}function vu(e,t){return fu((function(e,t){return new Y(t,e)}),t,lu(e))}function gu(e,t){return lu(fu((function(t,n){return new Y(e(n),t)}),new Y,t))}function wu(e,t){fu((function(t,n){e(n)}),void 0,t)}function pu(e){let t=new Y;for(let n=function(e){if(r(e))return e.length;{let t=0;for(const n of e)t++;return t}}(e)-1;n>=0;n--)t=new Y(e[n],t);return t}function mu(e,t){return function(e,t,n){e:for(;;){const r=e,o=t,i=n;if(null!=i.tail){const u=r(o,i.head);if(null==u){e=r,t=o+1,n=i.tail;continue e}return u}return}}(e,0,t)}function xu(e,t){return mu((function(t,n){return e(t,n)?Le(n):void 0}),t)}function Au(e,t){const n=xu(e,t);if(null!=n){return _e(n)}throw new Error("List did not contain any matching elements")}function Su(e,t){const n=au(t,Array);return 0|(r=e,0|function(e){for(;;){const t=e;if(t<0)throw new Error(tu);if(r(o[t]))return 0|t;e=t-1}}((o=n).length-1));var r,o}function bu(e,t){return Au((function(t,n){return e===t}),t)}function yu(e,t){return xu((function(t,n){return e===t}),t)}function Tu(e,t){return lu(fu((function(t,n){return e(n)?new Y(n,t):t}),new Y,t))}function Eu(e,t){let n=new Y;for(let r=0;r<=e-1;r++)n=new Y(t(r),n);return lu(n)}function Ru(e,t){if(null!=t.tail)return fu(e,t.head,t.tail);throw new Error("List was empty")}function Cu(e,t){for(;;){const n=e,r=t;if(null==r.tail)return!1;if(n(r.head))return!0;e=n,t=r.tail}}function Pu(e=0,t=0,n=0,r=0,o=0){switch(arguments.length){case 1:return Mu(arguments[0]);case 3:e=0,t=arguments[0],n=arguments[1],r=arguments[2],o=0}return 864e5*e+36e5*t+6e4*n+1e3*r+o}function Mu(e){return Wn(_n(e,1e4))}function Fu(e){return e/1e3}function Bu(e){const t=e.search("\\."),n=e.search("\\:");if(-1===t&&-1===n){const t=parseInt(e,0);if(isNaN(t))throw new Error(`String '${e}' was not recognized as a valid TimeSpan.`);return Pu(t,0,0,0,0)}if(n>0){const t=/^(-?)((\d+)\.)?(?:0*)([0-9]|0[0-9]|1[0-9]|2[0-3]):(?:0*)([0-5][0-9]|[0-9])(:(?:0*)([0-5][0-9]|[0-9]))?\.?(\d+)?$/.exec(e);if(null!=t&&null!=t[4]&&null!=t[5]){let n=0,r=0,o=0;const i=null!=t[1]&&"-"===t[1]?-1:1,u=+t[4],s=+t[5];if(null!=t[3]&&(n=+t[3]),null!=t[7]&&(o=+t[7]),null!=t[8])switch(t[8].length){case 1:r=100*+t[8];break;case 2:r=10*+t[8];break;case 3:r=+t[8];break;case 4:r=+t[8]/10;break;case 5:r=+t[8]/100;break;case 6:r=+t[8]/1e3;break;case 7:r=+t[8]/1e4;break;default:throw new Error(`String '${e}' was not recognized as a valid TimeSpan.`)}return i*Pu(n,u,s,o,r)}}throw new Error(`String '${e}' was not recognized as a valid TimeSpan.`)}function Du(){let e=ur();const t=function(t){const n=lr(e,t);return e=n,n};let n;const r=new Y,o=new ot(2,"Rain",rr(),0),i=new At(!1,pu(["Build Fence","Pick Apple","Chop Down Tree","Collect Rock","Run"]),-46,void 0,void 0);let u,s;var a;return s=gu((function(e){return[e.Id,e]}),new Y(new mt("Player1",pu([new pt(1,"Idle",new wt([0,1],rr(),rr(),new gt(2,"East"))),new pt(1,"Idle",new wt([0,1],e,t((a=5,Pu(0,0,a))),new gt(2,"East"))),new pt(0,"Move",new wt([1,1],e,t(2400),new gt(2,"East"))),new pt(0,"Move",new wt([2,1],e,t(2400),new gt(2,"East"))),new pt(0,"Move",new wt([2,2],e,t(2400),new gt(1,"South"))),new pt(0,"Move",new wt([1,2],e,t(2400),new gt(3,"West"))),new pt(0,"Move",new wt([1,1],e,t(2400),new gt(0,"North"))),new pt(1,"Idle",new wt([1,1],e,nr(0xe677d21fdbff,0),new gt(2,"East")))])),new Y)),u=bi(s,{Compare:S}),n=new Tt("Hello world",[0,0],[10,10],bi(Tu((function(e){return hu(e[1].Items)>0}),function(e){return lu(co((function(e,t){return fu((function(e,t){return new Y(t,e)}),e,t)}),new Y,e))}(Eu(10,(function(e){return Eu(10,(function(t){const n=5===t&&5===e?pu(["Temp Floor","Tree - Main"]):1===t&&1===e?pu(["Temp Floor","Grass1"]):du(oo((function(){return to(io("Temp Floor"),oo((function(){let e,t,n;switch(n=3*Math.random()+0,t=Math.floor(n),e=~~t,e){case 1:return io("Grass1");case 2:return io("Grass2");default:return[]}})))})));return[[t,e],new xt([t,e],n)]}))})))),{Compare:y}),void 0,void 0,u,i,o,r),[n,pu([new Et(5,"UpdatePlayer","Player1"),new Et(5,"UpdatePlayer","Player2"),new Et(11,"Audio",new yt(0,"Update"))])]}function Lu(e,t,n){var r,o,i,u,s,a,c,f,l,d,h,v,g,w,p,m,A;switch(n.tag){case 1:return[(r=[t.Dragger[0]+n.fields[0],t.Dragger[1]+n.fields[1]],o=new At(!1,t.Menu.Items,t.Menu.Offset,t.Menu.Hover,t.Menu.Selected),new Tt(t.SomeValue,r,t.WorldMapSize,t.WorldMap,t.ActivePoint,t.HoverPoint,t.Players,o,t.Weather,t.Audio)),new Y];case 3:return[(void 0,new Tt(t.SomeValue,t.Dragger,t.WorldMapSize,t.WorldMap,t.ActivePoint,void 0,t.Players,t.Menu,t.Weather,t.Audio)),new Y];case 2:return[(i=[n.fields[0],n.fields[1]],new Tt(t.SomeValue,t.Dragger,t.WorldMapSize,t.WorldMap,t.ActivePoint,i,t.Players,t.Menu,t.Weather,t.Audio)),new Y];case 4:return[(u=[n.fields[0],n.fields[1]],s=[n.fields[0],n.fields[1]],a=new At(!0,t.Menu.Items,t.Menu.Offset,t.Menu.Hover,t.Menu.Selected),new Tt(t.SomeValue,t.Dragger,t.WorldMapSize,t.WorldMap,s,u,t.Players,a,t.Weather,t.Audio)),new Y];case 5:{let r;if(r=xi(n.fields[0],t.Players),null!=r){const o=r;let i;if(i=Tu((function(t){return t.tag,fr(e,t.fields[0].End)<=0}),o.Actions),x(i,o.Actions))return[t,new Y];{const e=new mt(o.Id,i);return[(c=pi(n.fields[0],e,t.Players),new Tt(t.SomeValue,t.Dragger,t.WorldMapSize,t.WorldMap,t.ActivePoint,t.HoverPoint,c,t.Menu,t.Weather,t.Audio)),du(oo((function(){let e;var t,r,o;return t=function(e){return e.tag,e.fields[0].End},r=i,e=lu(fu((function(e,n){const r=t(n);if(null==r)return e;{const t=_e(r);return new Y(t,e)}}),new Y,r)),null==e.tail?[]:io(new Et(6,"Postponed",(o={Compare:fr},Ru((function(e,t){return o.Compare(t,e)>0?e:t}),e)),new Et(5,"UpdatePlayer",n.fields[0])))})))]}}return[t,new Y]}case 7:return[(l=t.Menu.Offset+n.fields[0]|0,f=new At(t.Menu.Visible,t.Menu.Items,l,t.Menu.Hover,t.Menu.Selected),new Tt(t.SomeValue,t.Dragger,t.WorldMapSize,t.WorldMap,t.ActivePoint,t.HoverPoint,t.Players,f,t.Weather,t.Audio)),new Y];case 8:return x(n.fields[0],t.Menu.Selected)?[(d=new At(!1,t.Menu.Items,t.Menu.Offset,t.Menu.Hover,t.Menu.Selected),new Tt(t.SomeValue,t.Dragger,t.WorldMapSize,t.WorldMap,t.ActivePoint,t.HoverPoint,t.Players,d,t.Weather,t.Audio)),new Y]:[(g=0|(w=0|R(S,0,n.fields[0]),p=hu(t.Menu.Items)-1|0,E(S,p,w)),v=g,h=new At(t.Menu.Visible,t.Menu.Items,t.Menu.Offset,t.Menu.Hover,v),new Tt(t.SomeValue,t.Dragger,t.WorldMapSize,t.WorldMap,t.ActivePoint,t.HoverPoint,t.Players,h,t.Weather,t.Audio)),new Y];case 9:return[(m=new At(t.Menu.Visible,t.Menu.Items,t.Menu.Offset,n.fields[0],t.Menu.Selected),new Tt(t.SomeValue,t.Dragger,t.WorldMapSize,t.WorldMap,t.ActivePoint,t.HoverPoint,t.Players,m,t.Weather,t.Audio)),new Y];case 6:return[t,new Y];case 10:return[(A=1===t.Weather.tag?new ot(0,"Fog"):0===t.Weather.tag?new ot(3,"Normal"):3===t.Weather.tag?new ot(2,"Rain",ur(),0):new ot(1,"Snow"),new Tt(t.SomeValue,t.Dragger,t.WorldMapSize,t.WorldMap,t.ActivePoint,t.HoverPoint,t.Players,t.Menu,A,t.Audio)),new Y];case 11:return function(e,t,n){var r,o,i,u,s,a,c,f,l,d,h,v,g;let w,p;if(p=Tu((function(t){return fr(e,t.End)<0}),t.Audio),w=hu(p)===hu(t.Audio)?t:new Tt(t.SomeValue,t.Dragger,t.WorldMapSize,t.WorldMap,t.ActivePoint,t.HoverPoint,t.Players,t.Menu,t.Weather,p),1===n.tag){const t=Io()(n.fields[0]),i=lr(e,t.Duration);return[(r=du(oo((function(){return to(w.Audio,oo((function(){return io(new bt(n.fields[1],n.fields[0],e,i))})))}))),new Tt(w.SomeValue,w.Dragger,w.WorldMapSize,w.WorldMap,w.ActivePoint,w.HoverPoint,w.Players,w.Menu,w.Weather,r)),new Y(new Et(6,"Postponed",i,(o=new yt(0,"Update"),new Et(11,"Audio",o))),new Y)]}if(Cu((function(e){return 0===e.Type.tag}),w.Audio)){if(Cu((function(e){return 1===e.Type.tag}),w.Audio))return Cu((function(e){return 2===e.Type.tag}),w.Audio)?[w,new Y]:[(l=vu(w.Audio,new Y(new bt(new St(2,"Bird"),"",e,ar(e,ko(2,30))),new Y)),new Tt(w.SomeValue,w.Dragger,w.WorldMapSize,w.WorldMap,w.ActivePoint,w.HoverPoint,w.Players,w.Menu,w.Weather,l)),(h=0|No(1,3),d=1===h?"Crow":2===h?"Owl":(()=>{throw new Error("Bang")})(),pu([(v=new yt(1,"Play",d,new St(2,"Bird")),new Et(11,"Audio",v)),(g=new yt(0,"Update"),new Et(11,"Audio",g))]))];if(2===w.Weather.tag){const t=0|function e(){const t=ko(0,3),n=0|(t<1?1:t<2?2:3);return n===w.Weather.fields[1]?0|e():0|n}();let n;switch(t){case 1:n="Thunder1";break;case 2:n="Thunder2";break;case 3:n="Thunder3";break;default:throw new Error("Bang")}return[(s=new ot(2,"Rain",e,t),a=vu(w.Audio,new Y(new bt(new St(1,"WeatherIncident"),"",e,ar(e,ko(2,10))),new Y)),new Tt(w.SomeValue,w.Dragger,w.WorldMapSize,w.WorldMap,w.ActivePoint,w.HoverPoint,w.Players,w.Menu,s,a)),pu([(c=new yt(1,"Play",n,new St(1,"WeatherIncident")),new Et(11,"Audio",c)),(f=new yt(0,"Update"),new Et(11,"Audio",f))])]}return[w,new Y]}return 2===w.Weather.tag?[w,pu([(i=new yt(1,"Play","Rain",new St(0,"Weather")),new Et(11,"Audio",i)),(u=new yt(0,"Update"),new Et(11,"Audio",u))])]:[w,new Y]}(e,t,n.fields[0]);default:return[t,new Y]}}function _u(e,t){return{Equals:(e,n)=>t(e,n),GetHashCode:t=>e(t)}}function Ou(){return _u(w,x)}const Uu=new Map([]),Iu=new Map([]),ku=new Map([]),Nu=Ei([],Ou()),zu=Ei([],Ou()),Vu=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const Hu=H((function(e,t,n,r){this.PerRow=0|e,this.DefaultWidth=0|t,this.Height=0|n,this.Widths=r}),Z);new Hu(25,20,22,new Int32Array([6,6,10,14,13,15,15,6,9,9,12,11,6,11,6,11,13,7,12,13,11,12,13,10,12,13,6,6,12,11,12,12,12,12,13,13,13,10,9,13,13,5,11,12,9,17,13,13,13,13,13,13,10,13,12,17,12,12,11,8,11,8,12,11,8,11,11,10,11,10,9,11,12,6,6,10,5,18,12,11,11,11,9,10,6,12,10,18,9,12,9,8,6,8,11])),new Hu(7,65,65,new Int32Array([19,25,31,38,38,62,58,14,25,25,38,42,19,25,19,21,38,38,38,38,38,38,38,38,38,38,21,21,42,42,42,33,69,54,50,50,54,46,42,54,54,25,29,54,46,67,54,54,42,54,50,42,46,54,54,71,54,54,46,25,21,25,35,38,25,33,38,33,38,33,25,38,38,21,21,38,21,58,38,38,38,38,25,29,21,38,38,54,38,38,33,36,15,36,41]));const ju=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const Wu=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);H((function(){}));function Yu(e,t,n){return function(r){let o;o=$u(r,0,0);const i=je($e(o[1])-$e(o[0]),Ze(o[1])-Ze(o[0]));let u,s;const a=new ju(0,"Left");switch(s=Oe(t,a),s.tag){case 1:u=~~((We(e)-We(i))/2);break;case 2:u=We(e)-We(i);break;default:u=0}let c,f;const l=new Wu(0,"Top");switch(f=Oe(n,l),f.tag){case 1:c=~~((Ye(e)-Ye(i))/2);break;case 2:c=Ye(e)-Ye(i);break;default:c=0}return Zu(u,c)(r)}}function Xu(e){let t;const n=i(Uu,e,null);if(t=n[0]?Le(n[1]):void 0,null!=t){return t}{const t=Qe(e,!1);return N(Uu,e,t),t}}function Gu(e){let t;const n=i(Iu,e,null);if(t=n[0]?Le(n[1]):void 0,null!=t){return t}{const t=function(e){return this instanceof tt?tt.call(this,e):new tt(e)}(e);return N(Iu,e,t),t}}function qu(e,t,n,r,o,i,u,s,a){var c,f;let l,d;if(l=Oe(e,0),d=Oe(t,0),null!=s){const e=s,t=new st(qe(l+$e(e.RenderOffset),d+Ze(e.RenderOffset)),je(0|Oe(r,0|We(e.SliceSize)),0|Oe(o,0|Ye(e.SliceSize))),Xu(e.TextureName),e.SliceSize,e.SlicePosition,null!=e.HeightMap?(c=e.HeightMap,new rt(Xu(c.TextureName),c.SliceSize,c.SlicePosition)):void 0,(h=function(e){switch(e.tag){case 3:return new ut(0,"Leaf");case 4:return new ut(1,"Grass",Oe(a,0));case 1:return new ut(2,"Shadow",e.fields[0],e.fields[1]);default:return}},v=e.Options,null!=(f=function(e){e:for(;;){const t=e;if(t>=v.length)return;{const n=h(v[t]);if(null==n){e=t+1;continue e}return n}}}(0))?f:void 0));return new vt(0,"Sprite",t)}{let e,t,s;e=Oe(r,32),t=Oe(o,32),s=Oe(n,"");const a=new st(qe(l,d),je(e,t),Xu(s),Ue(i,(function(){return je(e,t)})),Ue(u,(function(){return qe(0,0)})),void 0,void 0);return new vt(0,"Sprite",a)}var h,v}function $u(e,t,n){let r=qe(0,0),o=qe(0,0);return wu((function(e){var i,u,s,a,c,f,l,d,h,v,g,w;e:for(;;){const p=e;switch(p.tag){case 1:r=qe((i=0|$e(r),E(S,0|$e(p.fields[0].ActiveArea[0])+t,i)),(u=0|Ze(r),E(S,0|Ze(p.fields[0].ActiveArea[0])+n,u))),o=qe((s=0|$e(o),R(S,0|$e(p.fields[0].ActiveArea[1])+t,s)),(a=0|Ze(o),R(S,0|Ze(p.fields[0].ActiveArea[1])+n,a)));break;case 2:e=p.fields[0].Last;continue e;case 3:r=qe((c=0|$e(r),E(S,0|$e(p.fields[0].ActiveArea[0])+t,c)),(f=0|Ze(r),E(S,0|Ze(p.fields[0].ActiveArea[0])+n,f))),o=qe((l=0|$e(o),R(S,0|$e(p.fields[0].ActiveArea[1])+t,l)),(d=0|Ze(o),R(S,0|Ze(p.fields[0].ActiveArea[1])+n,d)));break;case 4:case 5:e=p.fields[0].Last;continue e;case 6:break;default:r=qe((h=0|$e(r),E(S,$e(p.fields[0].Position)+t|0,h)),(v=0|Ze(r),E(S,Ze(p.fields[0].Position)+n|0,v))),o=qe((g=0|$e(o),R(S,$e(p.fields[0].Position)+We(p.fields[0].Size)+t|0,g)),(w=0|Ze(o),R(S,Ze(p.fields[0].Position)+Ye(p.fields[0].Size)+n|0,w)))}break}}),e),[r,o]}function Zu(e,t,n,r,o,i,u,s,a,c){return function(f){let l,d,h,v,g;l=Tu((function(e){return 6!==e.tag}),f),d=Oe(e,0),h=Oe(t,0),v=$u(l,d,h);const w=qe(d,h),p=au(l,Array);return g=new ct(w,p,n,c,r,[v[0],v[1]],o,u,s,a,i),new vt(1,"Relative",g)}}function Ju(e){return new vt(2,"Dynamic",new dt(e,e(ur())))}function Ku(e,t,n){return function(r){let o;const i=new it(0,"Default");let u,s;return o=Oe(n,i),s=au(r,Array),u=new ft(je(e,t),s,o,[qe(0,0),qe(e,t)]),new vt(3,"SubRender",u)}}function Qu(e,t){return function(n){return r=function(){let r,o;const u=i(ku,e,null);if(o=u[0]?Le(u[1]):void 0,null!=o)r=_e(o);else{let n;n=t(),ku.set(e,n),r=n}return new vt(4,"Stateful",new lt(e,n(r)))},new vt(5,"NoCache",new ht(r,!0,r()));var r}}function es(e){return function(t){const n=i(Nu,e,null);if(n[0])return n[1];{const n=t(new Vu(0,"DoNotUseModelInsideDependsOn"),e);return r=e,o=n,Nu.size>5e4&&Nu.clear(),Nu.set(r,o),n}var r,o}}const ts=C(je(0,0)),ns=C(je(0,0)),rs=C(1),os=C(void 0);function is(e,t,n,r){const o=[];let i;if(function t(r,i,u,s){e:for(;;){const a=r,c=i,f=u,l=s;switch(l.tag){case 1:{let r,o;r=Oe(l.fields[0].Scale,f);const i=qe($e(l.fields[0].ActiveArea[0])*r,Ze(l.fields[0].ActiveArea[0])*r);let u;o=qe($e(i)+$e(c),Ze(i)+Ze(c));const s=qe($e(l.fields[0].ActiveArea[1])*r,Ze(l.fields[0].ActiveArea[1])*r);if(u=qe($e(s)+$e(c),Ze(s)+Ze(c)),$e(e)>=$e(o)&&Ze(e)>=Ze(o)&&$e(e)<$e(u)&&Ze(e)<Ze(u)){let e;const o=qe($e(l.fields[0].Position)*r,Ze(l.fields[0].Position)*r);let i;e=qe($e(o)+$e(c),Ze(o)+Ze(c));const u=n(l.fields[0]);if(null!=u){const e=_e(u);i=vu(new Y([e,l.fields[0]],new Y),a)}else i=a;const s=I(1,t,[i,e,r]);l.fields[0].Children.forEach(s)}break}case 3:{const n=je(We(l.fields[0].Size)*f,Ye(l.fields[0].Size)*f);if($e(e)>=$e(c)&&Ze(e)>=Ze(c)&&$e(e)<$e(c)+We(n)&&Ze(e)<Ze(c)+Ye(n)){const e=I(1,t,[a,c,f]);l.fields[0].Children.forEach(e)}break}case 2:case 4:case 5:r=a,i=c,u=f,s=l.fields[0].Last;continue e;case 6:break;default:if(hu(a)>0){let t;const n=qe($e(l.fields[0].Position)*f,Ze(l.fields[0].Position)*f);t=qe($e(n)+$e(c),Ze(n)+Ze(c));const r=je(We(l.fields[0].Size)*f,Ye(l.fields[0].Size)*f);$e(e)>=$e(t)&&Ze(e)>=Ze(t)&&$e(e)<$e(t)+We(r)&&Ze(e)<Ze(t)+Ye(r)&&o.splice(0,0,a)}}break}}(new Y,qe(0,0),t,r),i=fo(o),null!=i){return fo(i)}}function us(e,t){var n,r;const o=function(e,t,n,r,o,i){const u=n-o|0,s=r-i|0,a=0|~~(u/e.Scale),c=0|(u>=0?n-u%e.Scale:n+(0-u)%e.Scale),f=0|~~(s/e.Scale),l=0|(s>=0?r-s%e.Scale:r+(0-s)%e.Scale);t([a,f]);const d=new ke(2,"Choice3Of3",[c,l]);return new Rt(e.Scale,e.Resolution,e.Content,d,e.DragItem,e.ClickItem,e.HoverItem,e.BlurItem)},i=function(e,t){var n,r,o;switch(null==e?n=null==t?1:2:null!=t?(n=0,r=_e(e),o=_e(t)):n=2,n){case 0:return r===o;case 1:return!0;case 2:return!1}};switch(t.tag){case 1:var u,s,a,c;switch(null!=e.DragItem&&null!=e.DragItem.Dragging&&1===e.MouseItem.tag?(e.DragItem.Dragging,Math.abs(e.MouseItem.fields[0][0]-t.fields[0])>2||Math.abs(e.MouseItem.fields[0][1]-t.fields[1])>2||t.fields[2]?(u=0,s=e.DragItem.Dragging,a=e.MouseItem.fields[0][0],c=e.MouseItem.fields[0][1]):u=1):u=1,u){case 0:return[o(e,s,t.fields[0],t.fields[1],a,c),new Y];case 1:var f,l,d,h;switch(null!=e.DragItem&&null!=e.DragItem.Dragging&&2===e.MouseItem.tag?(f=0,l=e.DragItem.Dragging,d=e.MouseItem.fields[0][0],h=e.MouseItem.fields[0][1]):f=1,f){case 0:return[o(e,l,t.fields[0],t.fields[1],d,h),new Y];case 1:{let n,r;if(r=is(qe(t.fields[0],t.fields[1]),e.Scale,(function(e){return e.Enter}),e.Content),n=Ie((function(e){return e[1]}),r),i(e.HoverItem,n))return[e,new Y];var v,g,w,p;switch(null!=e.HoverItem&&null!=e.HoverItem.Leave?(v=0,g=e.HoverItem.Leave):v=1,v){case 0:g()}switch(null!=n&&null!=n.Enter?(w=0,p=n.Enter):w=1,w){case 0:p()}return[new Rt(e.Scale,e.Resolution,e.Content,e.MouseItem,e.DragItem,e.ClickItem,n,e.BlurItem),new Y]}}}case 2:var m,x,A,b;if(!i(e.ClickItem,e.BlurItem))switch(null!=e.ClickItem&&null!=e.ClickItem.Blur?(m=0,x=e.ClickItem.Blur):m=1,m){case 0:x()}switch(null!=e.ClickItem&&null!=e.ClickItem.Clicked&&1===e.MouseItem.tag?(A=0,b=e.ClickItem.Clicked):A=1,A){case 0:b()}return[(void 0,n=new ke(0,"Choice1Of3",void 0),new Rt(e.Scale,e.Resolution,e.Content,n,e.DragItem,e.ClickItem,e.HoverItem,void 0)),new Y];case 3:{const n=je(t.fields[0],t.fields[1]);let r;return r=(0|R(S,t.fields[0],t.fields[1]))>1e3?2:1,ts(n),ns(je(~~(We(n)/r),~~(Ye(n)/r))),rs(r),Nu.clear(),[new Rt(r,n,e.Content,e.MouseItem,e.DragItem,e.ClickItem,e.HoverItem,e.BlurItem),new Y(new Ct(4,"Redraw"),new Y)]}case 4:case 5:case 6:return[e,new Y];default:{const n=qe(t.fields[0],t.fields[1]);let o,i,u,s;return i=is(n,e.Scale,(function(e){return e.Dragging}),e.Content),o=Ie((function(e){return e[1]}),i),s=is(n,e.Scale,(function(e){return e.Clicked}),e.Content),u=Ie((function(e){return e[1]}),s),[(r=new ke(1,"Choice2Of3",[t.fields[0],t.fields[1]]),new Rt(e.Scale,e.Resolution,e.Content,r,o,u,e.HoverItem,e.ClickItem)),new Y]}}}const ss=H((function(e,t){this.Texture=e,this.TextureSlice=t}),Z);H((function(e,t,n){this.Size=e,this.GroupTexture=t,this.HeightMapTexture=n}),Z);function as(e,t,n){return e*(1-n)+t*n}function cs(e,t,n){let r;return r=E(T,t,n),R(T,e,r)}const fs=3.141592653589793;function ls(e,t,n){return[e/255,t/255,n/255]}const ds=[0,0,0,0],hs=ls(49,49,70),vs=ls(255,255,255),gs=pu([[0,hs],[.04,ls(254,233,106)],[.08,vs],[.42,vs],[.46,ls(255,110,47)],[.5,hs],[1,hs]]),ws=(()=>{const e=ls(49,49,49),t=ls(160,160,160);return pu([[0,e],[.08,t],[.42,t],[.5,e],[1,e]])})(),ps=ws,ms=ls(140,86,34);function xs(e,t){let n;n=Su((function(e){return t>=e[0]}),e);const r=bu(n,e),o=bu(n+1,e),i=function(e,t,n){return(n-e)/(t-e)}(r[0],o[0],t);return[as(r[1][0],o[1][0],i),as(r[1][1],o[1][1],i),as(r[1][2],o[1][2],i)]}function As(e){return Zu()(du(oo((function(){return vo((function(e){return qu(void 0,void 0,void 0,void 0,void 0,void 0,void 0,e)}),e.Frames[0].Layers)}))))}const Ss=H((function(e,t,n,r){this.Start=e,this.Sprite=t,this.Slot=0|n,this.Result=r}),Z);const bs=new s((function(){let e;return e=ru((function(e){var t,n;return[e,Uo()((t="'"===e?"Apostrophe":"("===e?"Open Parenthesis":")"===e?"Close Parenthesis":"-"===e?"Minus":e,n=Vr(Nr("Menu Font - %s")),n(t)))]}),"ABCDEFGHIJKLMNOPQRSTUVWXYZ-'()".split(""),Array),yi(e,{Compare:S})}));function ys(e,t){return es([e,t])((function(e,t){const n=function(e){return mi(e,bs.Value)};let r,o,i=0,u=0;o=$r(t[1].toUpperCase(),["\r\n"],null,0),r=ru((function(e){return $r(e,[" "],null,0)}),o,Array);const s=[];s.push([]);for(let e=0;e<=r.length-1;e++){const o=r[e];for(let e=0;e<=o.length-1;e++){const r=o[e],a=r.length-1+su((function(e){return 0|We(n(e).Size)}),r.split(""),{GetZero:()=>0,Add:(e,t)=>e+t})|0;i+a>t[0]&&(u+=10,i=0,s.push([]));lo((function(e){if(" "===e)i+=4;else{const t=n(e),r=0|We(t.Size),o=0|i;i=i+r+1;s[s.length-1].push(qu(o,void 0,void 0,void 0,void 0,void 0,void 0,t.Frames[0].Layers[0]))}}),(r+" ").split(""))}}let a;return a=go((function(e,t){return Zu(void 0,10*e)(du(t))}),s),du(a)}))}H((function(e){this.Start=e}),Z);H((function(e,t){this.Value=e,this.Active=t}),Z);const Ts=H((function(e,t,n,r,o,i){this.Point=e,this.Start=t,this.End=n,this.SpriteResource=r,this.Slot=0|o,this.Result=i}),Z);function Es(e){return e.filter((function(e){if(0===e.Options.length)return!0;{let t;return t=e.Options.some((function(e){return 1===e.tag})),!t}}))}function Rs(e){return e.filter((function(e){return e.Options.some((function(e){return 1===e.tag}))}))}function Cs(e,t,n){var r,o,i;let u,s;var a;if(s=null!=(a=n.Actions).tail?Le(a.head):void 0,null!=s){const e=s,t=1===e.tag?[e.fields[0].Point,e.fields[0].Start,e.fields[0].End,e.fields[0].Direction,"Idle"]:[e.fields[0].Point,e.fields[0].Start,e.fields[0].End,e.fields[0].Direction,"Walk"];u=[t[0],t[1],t[2],(r=1===t[3].tag?"South":2===t[3].tag?"East":3===t[3].tag?"West":"North",o=Vr(Nr("Player - %s - %s")),i=o(r),i(t[4]))]}else u=void 0;if(null!=u){const n=u[1],r=u[3],o=u[0],i=u[2];return Qu(e,(function(){return new Ts(o,n,i,Uo()(r),-1,new vt(6,"Empty"))}))((function(e){return Ju((function(u){m(e.Point,o)&&cr(e.Start,n)&&cr(e.End,i)&&e.SpriteResource.Name===r||(e.Point=o,e.Start=n,e.End=i,e.SpriteResource=Uo()(r),e.Slot=-1);const s=0|e.SpriteResource.Frames.length;let a;a=dr(e.End,e.Start);let c,f,l,d;const h=dr(u,e.Start)/a*s;d=Math.floor(h),l=~~d;if(f=E(S,s-1|0,l),c=R(S,0,f),e.Slot!==c){let n;if(t){const t=e.SpriteResource.Frames[c].Layers;n=Rs(t)}else{const t=e.SpriteResource.Frames[c].Layers;n=Es(t)}e.Result=Zu()(du(oo((function(){return vo((function(e){return qu(void 0,void 0,void 0,void 0,void 0,void 0,void 0,e)}),n)}))))}return e.Result}))}))}return new vt(6,"Empty")}const Ps=[.5,.5,.5,1];function Ms(e){return es("hud")((function(e,t){return Zu(void 0,void 0,void 0,1)(new Y(Zu(void 0,void 0,void 0,void 0,void 0,void 0,(function(){_o(new Et(10,"ChangeWeather"))}))(du(oo((function(){const e=ys(100,"Change Weather");let t,n;var r,o;return n=$u(e,0,0),r=n[0],t=je($e(o=n[1])-$e(r),Ze(o)-Ze(r)+6),to(io(Zu(void 0,void 0,new it(4,"BlockColor",Ps))(new Y(qu(void 0,void 0,void 0,We(t)+10,Ye(t)+5),new Y))),oo((function(){return io(Zu(5,5,new it(3,"Color",0,0,0,1))(du(oo((function(){return e})))))})))})))),new Y))}))}const Fs=eu([],{Equals:x,GetHashCode:w});function Bs(e,t,n){0===hu(n.Audio)&&Fs.size>0&&Fs.clear(),wu((function(t){if(!Fs.has(t)){const n=Gu(t.Name),r=e(n);if(null!=r){!function(e){const t=Ro().createBufferSource();t.buffer=e,t.connect(Ro().destination),t.start(),"suspended"===Ro().state&&Ro().resume()}(_e(r));u(t,Fs)}}}),n.Audio)}class Ds{constructor(e=!1){this._id=0,this._cancelled=e,this._listeners=new Map}get isCancelled(){return this._cancelled}cancel(){if(!this._cancelled){this._cancelled=!0;for(const[,e]of this._listeners)e()}}addListener(e){const t=this._id;return this._listeners.set(this._id++,e),t}removeListener(e){return this._listeners.delete(e)}register(e,t){const n=this,r=this.addListener(null==t?e:()=>e(t));return{Dispose(){n.removeListener(r)}}}}class Ls extends Error{constructor(){super("The operation was canceled"),Object.setPrototypeOf(this,Ls.prototype)}}class _s{constructor(){this.callCount=0}static get maxTrampolineCallCount(){return 2e3}incrementAndCheck(){return this.callCount++>_s.maxTrampolineCallCount}hijack(e){this.callCount=0,setTimeout(e,0)}}function Os(e){return t=>{if(t.cancelToken.isCancelled)t.onCancel(new Ls);else if(t.trampoline.incrementAndCheck())t.trampoline.hijack(()=>{try{e(t)}catch(e){t.onError(e)}});else try{e(t)}catch(e){t.onError(e)}}}function Us(e,t){return Os(n=>{e({onSuccess:e=>{try{t(e)(n)}catch(e){n.onError(e)}},onError:n.onError,onCancel:n.onCancel,cancelToken:n.cancelToken,trampoline:n.trampoline})})}function Is(e){return Os(t=>t.onSuccess(e))}const ks=new class{Bind(e,t){return Us(e,t)}Combine(e,t){return this.Bind(e,()=>t)}Delay(e){return Os(t=>e()(t))}For(e,t){const n=e[Symbol.iterator]();let r=n.next();return this.While(()=>!r.done,this.Delay(()=>{const e=t(r.value);return r=n.next(),e}))}Return(e){return Is(e)}ReturnFrom(e){return e}TryFinally(e,t){return Os(n=>{e({onSuccess:e=>{t(),n.onSuccess(e)},onError:e=>{t(),n.onError(e)},onCancel:e=>{t(),n.onCancel(e)},cancelToken:n.cancelToken,trampoline:n.trampoline})})}TryWith(e,t){return Os(n=>{e({onSuccess:n.onSuccess,onCancel:n.onCancel,cancelToken:n.cancelToken,trampoline:n.trampoline,onError:e=>{try{t(e)(n)}catch(e){n.onError(e)}}})})}Using(e,t){return this.TryFinally(t(e),()=>e.Dispose())}While(e,t){return e()?this.Bind(t,()=>this.While(e,t)):this.Return(void 0)}Zero(){return Os(e=>e.onSuccess(void 0))}};function Ns(e){}function zs(e){return t=t=>e.then(t[0]).catch(e=>(e instanceof Ls?t[2]:t[1])(e)),Os(e=>t([e.onSuccess,e.onError,e.onCancel]));var t}const Vs=new Ds;function Hs(e,t){return function(e,t){return js(e,t)}(e,t)}function js(e,t,n,r,o){"function"!=typeof t&&(o=t,t=void 0);const i=new _s;e({onSuccess:t||Ns,onError:n||Ns,onCancel:r||Ns,cancelToken:o||Vs,trampoline:i})}const Ws=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const Ys=H((function(e,t,...n){this.tag=0|e,this.name=t,this.fields=n}),X);const Xs=H((function(e,t){this.Hash=e,this.Coders=t}),Z);const Gs=H((function(){this.cache=new Map([])}));function qs(){return this instanceof Gs?Gs.call(this):new Gs}function $s(e,t,n){const r=i(e.cache,t,null);if(r[0])return r[1];{const r=n();return N(e.cache,t,r),r}}qs();const Zs=qs();function Js(e){return e.slice(void 0,1).toLowerCase()+e.slice(1,e.length)}function Ks(e,t){switch(e.tag){case 2:return function(e,t,n,r,o=0){if("string"==typeof e){const n=e;e=Rr(t,null!=r?r:0),t=n,r=void 0}if("function"==typeof n)return r=null==r?-1:r,t.substring(0,o)+t.substring(o).replace(e,(function(){let e=arguments[0];if(r){r--;const t=[],o=arguments.length;for(let e=0;e<o-2;e++)t.push(arguments[e]);t.index=arguments[o-2],t.input=arguments[o-1],e=n(t)}return e}));if(n=n.replace(/\$0/g,e=>"$&"),null!=r){let i;const u=t.substring(o),s=Pr(e,u),a=Pr.length>r?(i=s[r-1],u.substring(0,i.index+i[0].length)):u;return t.substring(0,o)+a.replace(e,n)+t.substring(o+a.length)}return t.replace(e,n)}(Js(t),"[A-Z]","_$0").toLowerCase();case 0:return t;default:return Js(t)}}const Qs=H((function(e,t){this.bound=0|e,this.digits=t}),Z);function ea(e,t){for(;;){const n=e,r=t;if(0===r)return 1;if(r%2!=0)return n*ea(n*n,~~(r/2))|0;e=n*n,t=~~(r/2)}}Nn(2013265921,0,!1),Nn(2013265921,0,!0);ou(28,(function(e){return ea(2,e)}),Int32Array);function ta(e){return e.bound}function na(e,t){return e.digits[t]}function ra(e,t){return Xn(na(e,t),!1,2)}function oa(e,t,n){e.digits[t]=n}function ia(e,t){for(;;){const n=e,r=t;if(0===r)return Nn(1,0,!1);if(r%2!=0)return Ln(n,ia(Ln(n,n),~~(r/2)));e=Ln(n,n),t=~~(r/2)}}function ua(e,t){for(;;){const n=e,r=t;if(0===r)return 1;if(r%2!=0)return n*ua(n*n,~~(r/2))|0;e=n*n,t=~~(r/2)}}const sa=Nn(16777216,0,!1),aa=Nn(16777215,0,!1);Nn(16777215,0,!0);function ca(e){return new Qs(e,new Int32Array(e))}function fa(e){const t=0|function(e,t){for(;;){const n=e,r=t;if(-1===r||0!==n[r])return r+1|0;e=n,t=r-1}}(e.digits,e.bound-1);return e.bound=t,e}function la(e){const t=0|(e<0?0:e);if(t<16777216){const e=ca(1);return e.digits[0]=t,fa(e)}{const e=ca(2);for(let n=0;n<=1;n++)e.digits[n]=~~(t/ua(16777216,n))%16777216;return fa(e)}}const da=la(1),ha=la(0);function va(e){return e.bound-1}function ga(e){return 0===e.bound}function wa(e,t){if(e.bound===t.bound){return function(e,t,n){for(;;){const r=e,o=t,i=n;if(-1===i)return!0;if(r[i]!==o[i])return!1;e=r,t=o,n=i-1}}(e.digits,t.digits,e.bound-1)}return!1}function pa(e,t){if(e.bound<t.bound)return-1;if(e.bound>t.bound)return 1;return 0|function(e,t,n){for(;;){const r=e,o=t,i=n;if(-1===i)return 0;if(r[i]!==o[i])return r[i]<o[i]?-1:1;e=r,t=o,n=i-1}}(e.digits,t.digits,e.bound-1)}function ma(e,t){return-1===pa(e,t)}function xa(e,t,n){for(var r;;){const o=e,i=t,u=n;if(!(kn(i,Nn(0,0,!1))>0))break;{const s=Dn(ra(o,u),i);oa(o,u,(r=In(s,aa),~~Hn(r))),e=o,t=_n(s,sa),n=u+1}}}function Aa(e,t){var n;const r=0|ta(e),o=ca(r+1|0),i=Xn(t,!1,2);let u=Nn(0,0,!1);for(let t=0;t<=r-1;t++){const r=Dn(Dn(u,ra(o,t)),Ln(ra(e,t),i));oa(o,t,(n=In(r,aa),~~Hn(n))),u=_n(r,sa)}return xa(o,u,r),fa(o)}function Sa(e,t){const n=1===ta(e),r=1===ta(t);return n&&r?function(e,t){var n;const r=ca(2),o=Ln(Xn(e,!1,2),Xn(t,!1,2));return oa(r,0,(n=In(o,aa),~~Hn(n))),oa(r,1,~~Hn(_n(o,sa))),fa(r)}(na(e,0),na(t,0)):n?Aa(t,na(e,0)):r?Aa(e,na(t,0)):function(e,t){var n;const r=ca(e.bound+t.bound|0);for(let o=0;o<=e.bound-1;o++){const i=Xn(e.digits[o],!1,2);let u=Nn(0,0,!1),s=0|o;for(let e=0;e<=t.bound-1;e++){const o=Xn(t.digits[e],!1,2),a=Dn(Dn(Xn(r.digits[s],!1,2),u),Ln(i,o));r.digits[s]=(n=In(a,aa),~~Hn(n)),u=_n(a,sa),s+=1}xa(r,u,s)}return fa(r)}(e,t)}const ba=H((function(e,t,n,r,o,i,u){this.bigL=0|e,this.twoToBigL=0|t,this.k=0|n,this.bigK=0|r,this.bigN=0|o,this.split=0|i,this.splits=u}),Z);function ya(e,t,n,r){return new ba(e,ua(2,e),t,n,r,~~(24/e),ou(~~(24/e),(function(t){return ua(2,e*t)}),Int32Array))}const Ta=[ya(1,28,268435456,268435456),ya(2,26,67108864,134217728),ya(3,24,16777216,50331648),ya(4,22,4194304,16777216),ya(5,20,1048576,5242880),ya(6,18,262144,1572864),ya(7,16,65536,458752),ya(8,14,16384,131072),ya(9,12,4096,36864),ya(10,10,1024,10240),ya(11,8,256,2816),ya(12,6,64,768),ya(13,4,16,208)];ou(24,(function(e){return ua(2,e)-1}),Int32Array),ou(24,(function(e){return ua(2,e)}),Int32Array),ou(24,(function(e){return ia(Nn(2,0,!1),e)}),Array);Ta[0].bigN;function Ea(e,t){return Sa(e,t)}function Ra(e,t,n,r){const o=[e.digits,va(e)],i=[n.digits,va(n)],u=Xn(t,!1,2);let s=0,a=Ln(u,Xn(i[0][0],!1,2));for(;kn(a,Nn(0,0,!1))>0||s<i[1];){if(s>o[1])throw new Error("scaleSubInPlace: pre-condition did not apply, result would be -ve");let e,t;const n=In(a,aa);let c;t=~~Hn(n),e=t;c=_n(a,sa),e<=o[0][s+r]?o[0][s+r]=o[0][s+r]-e:(o[0][s+r]=o[0][s+r]+(16777216-e),c=Dn(c,Nn(1,0,!1))),a=s<i[1]?Dn(c,Ln(u,Xn(i[0][s+1],!1,2))):c,s+=1}fa(e)}function Ca(e,t,n,r){const o=[e.digits,va(e)],i=[n.digits,va(n)],u=Xn(t,!1,2);let s=0,a=Ln(u,Xn(i[0][0],!1,2));for(;kn(a,Nn(0,0,!1))>0||s<i[1];){if(s>o[1])throw new Error("scaleSubInPlace: pre-condition did not apply, result would be -ve");let e,t;const n=In(a,aa);let c;t=~~Hn(n),e=t;c=_n(a,sa),e<16777216-o[0][s+r]?o[0][s+r]=o[0][s+r]+e:(o[0][s+r]=e-(16777216-o[0][s+r]),c=Dn(c,Nn(1,0,!1))),a=s<i[1]?Dn(c,Ln(u,Xn(i[0][s+1],!1,2))):c,s+=1}fa(e)}function Pa(e,t,n){const r=[va(t),va(e)];if(r[1]<r[0]+n)return 0;{let a;if(0===r[0])if(r[1]===n)a=~~(e.digits[n]/t.digits[0]);else{const n=_n(Dn(Ln(Xn(e.digits[r[1]],!1,2),sa),Xn(e.digits[r[1]-1],!1,2)),Xn(t.digits[0],!1,2));a=~~Hn(n)}else if(r[1]===r[0]+n)a=~~(e.digits[r[1]]/(t.digits[r[0]]+1));else{const n=_n(Dn(Ln(Xn(e.digits[r[1]],!1,2),sa),Xn(e.digits[r[1]-1],!1,2)),Dn(Xn(t.digits[r[0]],!1,2),Nn(1,0,!1)));a=~~Hn(n)}if(0===a){return 1!=(i=n,u=e,s=0,(o=t).bound+i<u.bound+s?-1:o.bound+i>u.bound+i?1:0|function(e,t,n){e:for(;;){const r=e,o=t,u=n;if(-1===u)return 0;{const a=0|(u<i?0:r[u-i]),c=0|(u<s?0:o[u-s]);if(a===c){e=r,t=o,n=u-1;continue e}return a<c?-1:1}}}(o.digits,u.digits,o.bound+i-1))?1:0}return 0|a}var o,i,u,s}function Ma(e,t){if(ga(t))throw new Error;if(va(e)<va(t))return[ha,e];{const o=new Qs((n=e).bound,(r=n.digits,Int32Array,r.slice())),i=ca(va(e)-va(t)+1+1);let u=0|va(e);const s=0|va(t);let a=u-s|0;const c=function(e){};let f=!1;for(;!f;){c([i,o,a,u]);const e=0|Pa(o,t,a);e>0?(Ra(o,e,t,a),Ca(i,e,da,a),c([i,o,a,u])):(f=0===e&&0===a,f||(u===s+a?(c([i,o,a-1,u]),a-=1):(c([i,o,a-1,u-1]),a-=1,u-=1)))}return[fa(i),fa(o)]}var n,r}la(2);function Fa(e){return la(e)}function Ba(e){return function(e){const t=kn(e,Nn(0,0,!1))<0?Nn(0,0,!1):e,n=ca(3);for(let e=0;e<=2;e++)n.digits[e]=~~Hn(On(_n(t,ia(sa,e)),sa));return fa(n)}(e)}function Da(e){const t=0|va(e),n=function(e,n,r){for(;;){const o=e,i=n,u=r;if(va(u)>t)return new Y([i,u],o);e=new Y([i,u],o),n=i+1,r=Ea(u,u)}}(new Y,0,la(10)),r=function e(t,n,r,o){if(null!=o.tail){const i=Ma(r,o.head[1]);if(t&&ga(i[0])){return e(t,n,i[1],o.tail)}{const r=e(!1,n,i[1],o.tail);return e(t,r,i[0],o.tail)}}{const e=0|function(e){if(1===e.bound)return 0|e.digits[0];{let t=0;for(let n=e.bound-1;n>=0;n--)t=e.digits[n]+16777216*t;return 0|t}}(r);return t&&0===e?n:new Y(f(e),n)}}(!0,new Y,e,n);if(null==r.tail)return"0";{let e;return e=au(r,Array),Yr("",e)}}function La(e){return e.bound<=1}function _a(e){return 0<e.bound?0|e.digits[0]:0}const Oa=H((function(e,t){this.signInt=e,this.v=t}),Z);function Ua(e,t){return this instanceof Oa?Oa.call(this,e,t):new Oa(e,t)}function Ia(e){return La(e)&&_a(e)<Oa.smallLim?Oa.smallPosTab[_a(e)]:e}function ka(e){return e.signInt}function Na(e){return e.v}function za(e,t){const n=[ka(e),ka(t)];switch(-1===n[0]?-1===n[1]?1:0===n[1]?8:1===n[1]?3:9:0===n[0]?-1===n[1]?6:0===n[1]?4:1===n[1]?5:9:1===n[0]?-1===n[1]?2:0===n[1]?7:1===n[1]?0:9:9){case 0:case 1:return wa(Na(e),Na(t));case 2:case 3:return!!ga(Na(e))&&ga(Na(t));case 4:return!0;case 5:case 6:return ga(Na(t));case 7:case 8:return ga(Na(e));case 9:throw new Error("signs should be +/- 1 or 0\\nParameter name: x")}}function Va(e,t){const n=[ka(e),ka(t)];switch(-1===n[0]?-1===n[1]?1:0===n[1]?8:1===n[1]?3:9:0===n[0]?-1===n[1]?6:0===n[1]?4:1===n[1]?5:9:1===n[0]?-1===n[1]?2:0===n[1]?7:1===n[1]?0:9:9){case 0:return ma(Na(e),Na(t));case 1:return ma(Na(t),Na(e));case 2:return!1;case 3:return!ga(Na(e))||!ga(Na(t));case 4:return!1;case 5:return!ga(Na(t));case 6:case 7:return!1;case 8:return!ga(Na(e));case 9:throw new Error("signs should be +/- 1 or 0\\nParameter name: x")}}function Ha(e){return e>=0?Ua.call(this,1,Ia(Fa(e))):-2147483648===e?Ua.call(this,-1,Ia(Ba(Un(Xn(e,!1,2))))):Ua.call(this,-1,Ia(Fa(zt(e))))}function ja(){return Oa.one}function Wa(){return Oa.two}function Ya(){return Oa.zero}Oa.smallLim=4096,Oa.smallPosTab=ou(Oa.smallLim,Fa,Array),Oa.one=Ha(1),Oa.two=Ha(2),Oa.zero=Ha(0),Oa.prototype.toString=function(){const e=this;switch(0|ka(e)){case-1:return ga(Na(e))?"0":"-"+Da(Na(e));case 0:return"0";case 1:return Da(Na(e));default:throw new Error("signs should be +/- 1 or 0")}},Oa.prototype.Equals=function(e){return e instanceof Oa&&za(this,e)},Oa.prototype.GetHashCode=function(){return 0|(0===ka(e=this)?1:ka(e)+function(e){let t=0;for(let n=0;n<=e.bound-1;n++)t=e.digits[n]+(t<<3);return 0|t}(Na(e))|0);var e},Oa.prototype.CompareTo=function(e){if(e instanceof Oa)return 0|(Va(t=this,n=e)?-1:za(t,n)?0:1);throw new Error("the objects are not comparable\\nParameter name: obj");var t,n};Ya(),ja(),Wa();Ya(),ja();function Xa(e,t){const n=new Date(e);return n.offset=null!=t?t:-6e4*(new Date).getTimezoneOffset(),n}function Ga(){return Xa(-621355968e5,0)}function qa(e){const t=or(e),n=$n.exec(e),r=null==n?-6e4*t.getTimezoneOffset():"Z"===n[0]?0:36e5*parseInt(n[1],10)+6e4*parseInt(n[2],10);return Xa(t.getTime(),r)}function $a(e){return void 0===e}function Za(e,t,n){try{return"Expecting "+e+" but instead got:"+(n?"\n":" ")+JSON.stringify(t,null,4)}catch(t){return"Expecting "+e+" but decoder failed. Couldn't report given value due to circular structure."+(n?"\n":" ")}}function Ja(e,t){const n=2===t.tag?Za(t.fields[0],t.fields[1],!0):1===t.tag?Za(t.fields[0],t.fields[1],!1)+"\nReason: "+t.fields[2]:3===t.tag?Za(t.fields[0],t.fields[1],!0):4===t.tag?Za(t.fields[0],t.fields[1],!0)+"\nNode `"+t.fields[2]+"` is unkown.":5===t.tag?"Expecting "+t.fields[0]+".\n"+JSON.stringify(t.fields[1],null,4):7===t.tag?"The following errors were found:\n\n"+Yr("\n\n",t.fields[0]):6===t.tag?"The following `failure` occurred with the decoder: "+t.fields[0]:Za(t.fields[0],t.fields[1],!1);return 7===t.tag?n:"Error at: `"+e+"`\n"+n}function Ka(e,t,n){let r;return r=I(1,t,[e])(n),1===r.tag?new Ne(1,"Error",Ja(r.fields[0][0],r.fields[0][1])):new Ne(0,"Ok",r.fields[0])}function Qa(e,t){try{return Ka("$",e,JSON.parse(t))}catch(e){if(e instanceof SyntaxError)return new Ne(1,"Error","Given an invalid JSON: "+e.message);throw e}}function ec(e,t){const n=Qa(e,t);if(1===n.tag)throw new Error(n.fields[0]);return n.fields[0]}function tc(e){return function(t){if("number"==typeof t){const n=t;if(isFinite(n)&&Math.floor(n)===n){if(-128<=n&&n<=127)return new Ne(0,"Ok",(n+128&255)-128);{const t=[e,new Ws(1,"BadPrimitiveExtra","a sbyte",n,"Value was either too large or too small for a sbyte")];return new Ne(1,"Error",t)}}{const t=[e,new Ws(1,"BadPrimitiveExtra","a sbyte",n,"Value is not an integral value")];return new Ne(1,"Error",t)}}if("string"==typeof t){let n;if(n=Nt(t,511,!1,8),n[0])return new Ne(0,"Ok",n[1]);{const n=[e,new Ws(0,"BadPrimitive","a sbyte",t)];return new Ne(1,"Error",n)}}{const n=[e,new Ws(0,"BadPrimitive","a sbyte",t)];return new Ne(1,"Error",n)}}}function nc(e){return function(t){if("number"==typeof t){const n=t;if(isFinite(n)&&Math.floor(n)===n){if(0<=n&&n<=255)return new Ne(0,"Ok",255&n);{const t=[e,new Ws(1,"BadPrimitiveExtra","a byte",n,"Value was either too large or too small for a byte")];return new Ne(1,"Error",t)}}{const t=[e,new Ws(1,"BadPrimitiveExtra","a byte",n,"Value is not an integral value")];return new Ne(1,"Error",t)}}if("string"==typeof t){let n;if(n=Nt(t,511,!0,8),n[0])return new Ne(0,"Ok",n[1]);{const n=[e,new Ws(0,"BadPrimitive","a byte",t)];return new Ne(1,"Error",n)}}{const n=[e,new Ws(0,"BadPrimitive","a byte",t)];return new Ne(1,"Error",n)}}}function rc(e){return function(t){if("number"==typeof t){const n=t;if(isFinite(n)&&Math.floor(n)===n){if(-32768<=n&&n<=32767)return new Ne(0,"Ok",(n+32768&65535)-32768);{const t=[e,new Ws(1,"BadPrimitiveExtra","an int16",n,"Value was either too large or too small for an int16")];return new Ne(1,"Error",t)}}{const t=[e,new Ws(1,"BadPrimitiveExtra","an int16",n,"Value is not an integral value")];return new Ne(1,"Error",t)}}if("string"==typeof t){let n;if(n=Nt(t,511,!1,16),n[0])return new Ne(0,"Ok",n[1]);{const n=[e,new Ws(0,"BadPrimitive","an int16",t)];return new Ne(1,"Error",n)}}{const n=[e,new Ws(0,"BadPrimitive","an int16",t)];return new Ne(1,"Error",n)}}}function oc(e){return function(t){if("number"==typeof t){const n=t;if(isFinite(n)&&Math.floor(n)===n){if(0<=n&&n<=65535)return new Ne(0,"Ok",65535&n);{const t=[e,new Ws(1,"BadPrimitiveExtra","an uint16",n,"Value was either too large or too small for an uint16")];return new Ne(1,"Error",t)}}{const t=[e,new Ws(1,"BadPrimitiveExtra","an uint16",n,"Value is not an integral value")];return new Ne(1,"Error",t)}}if("string"==typeof t){let n;if(n=Nt(t,511,!0,16),n[0])return new Ne(0,"Ok",n[1]);{const n=[e,new Ws(0,"BadPrimitive","an uint16",t)];return new Ne(1,"Error",n)}}{const n=[e,new Ws(0,"BadPrimitive","an uint16",t)];return new Ne(1,"Error",n)}}}function ic(e){return function(t){if("number"==typeof t){const n=t;if(isFinite(n)&&Math.floor(n)===n){if(-2147483648<=n&&n<=2147483647)return new Ne(0,"Ok",~~n);{const t=[e,new Ws(1,"BadPrimitiveExtra","an int",n,"Value was either too large or too small for an int")];return new Ne(1,"Error",t)}}{const t=[e,new Ws(1,"BadPrimitiveExtra","an int",n,"Value is not an integral value")];return new Ne(1,"Error",t)}}if("string"==typeof t){let n;if(n=Nt(t,511,!1,32),n[0])return new Ne(0,"Ok",n[1]);{const n=[e,new Ws(0,"BadPrimitive","an int",t)];return new Ne(1,"Error",n)}}{const n=[e,new Ws(0,"BadPrimitive","an int",t)];return new Ne(1,"Error",n)}}}function uc(e){return function(t){if("number"==typeof t){const n=t;if(isFinite(n)&&Math.floor(n)===n){if(0<=n&&n<=4294967295)return new Ne(0,"Ok",n>>>0);{const t=[e,new Ws(1,"BadPrimitiveExtra","an uint32",n,"Value was either too large or too small for an uint32")];return new Ne(1,"Error",t)}}{const t=[e,new Ws(1,"BadPrimitiveExtra","an uint32",n,"Value is not an integral value")];return new Ne(1,"Error",t)}}if("string"==typeof t){let n;if(n=Nt(t,511,!0,32),n[0])return new Ne(0,"Ok",n[1]);{const n=[e,new Ws(0,"BadPrimitive","an uint32",t)];return new Ne(1,"Error",n)}}{const n=[e,new Ws(0,"BadPrimitive","an uint32",t)];return new Ne(1,"Error",n)}}}const sc=(()=>{const e=Nn(0,2147483648,!1),t=Nn(4294967295,2147483647,!1);return function(n){return function(r){if("number"==typeof r){const o=r;if(isFinite(o)&&Math.floor(o)===o){if(Wn(e)<=o&&o<=Wn(t))return new Ne(0,"Ok",Vn(o,!1));{const e=[n,new Ws(1,"BadPrimitiveExtra","an int64",o,"Value was either too large or too small for an int64")];return new Ne(1,"Error",e)}}{const e=[n,new Ws(1,"BadPrimitiveExtra","an int64",o,"Value is not an integral value")];return new Ne(1,"Error",e)}}if("string"==typeof r){let e;if(e=qn(r,511,!1),e[0])return new Ne(0,"Ok",e[1]);{const e=[n,new Ws(0,"BadPrimitive","an int64",r)];return new Ne(1,"Error",e)}}{const e=[n,new Ws(0,"BadPrimitive","an int64",r)];return new Ne(1,"Error",e)}}}})();(()=>{const e=Nn(0,0,!0),t=Nn(4294967295,4294967295,!0)})();function ac(e,t){if("string"==typeof t){const r=function(e,t){try{return null==e||""===e.trim()?[!1,rr()]:[!0,ir(e)]}catch(e){return[!1,rr()]}}(t,rr());if(r[0]){const e=1===(n=r[1]).kind?n:nr(n.getTime(),1);return new Ne(0,"Ok",e)}{const n=[e,new Ws(0,"BadPrimitive","a datetime",t)];return new Ne(1,"Error",n)}}{const n=[e,new Ws(0,"BadPrimitive","a datetime",t)];return new Ne(1,"Error",n)}var n}function cc(e,t){if("string"==typeof t){const n=function(e,t){try{return[!0,qa(e)]}catch(e){return[!1,Ga()]}}(t,Ga());if(n[0])return new Ne(0,"Ok",n[1]);{const n=[e,new Ws(0,"BadPrimitive","a datetimeoffset",t)];return new Ne(1,"Error",n)}}{const n=[e,new Ws(0,"BadPrimitive","a datetime",t)];return new Ne(1,"Error",n)}}function fc(e,t){if("string"==typeof t){const n=function(e,t){try{return[!0,Bu(e)]}catch(e){return[!1,0]}}(t);if(n[0])return new Ne(0,"Ok",n[1]);{const n=[e,new Ws(0,"BadPrimitive","a timespan",t)];return new Ne(1,"Error",n)}}{const n=[e,new Ws(0,"BadPrimitive","a timespan",t)];return new Ne(1,"Error",n)}}function lc(e,t,n){let r;if(r=I(1,t,[e])(n),1===r.tag){if(null==n)return new Ne(0,"Ok",void 0);if(1===r.tag)return new Ne(1,"Error",r.fields[0]);throw new Error("The match cases were incomplete")}return new Ne(0,"Ok",Le(r.fields[0]))}function dc(e,t,n){var r;const o=Oe(t,Yr(".",new Y("$",e))),i="an object with path `"+Yr(".",e)+"`";return new Ne(1,"Error",[o,new Ws(4,"BadPath",i,n,(r=cu(e),Oe(r,"")))])}function hc(e,t,n,r){const o=n+".["+f(e)+"]";if(Array.isArray(r)){const n=r;if(e<n.length)return t(o,n[e]);{const t="a longer array. Need index `"+f(e)+"` but there are only `"+(f(0|n.length)+"` entries"),i=[o,new Ws(5,"TooSmallArray",t,r)];return new Ne(1,"Error",i)}}{const e=[o,new Ws(0,"BadPrimitive","an array",r)];return new Ne(1,"Error",e)}}function vc(e,t,n){if(Array.isArray(n)){let r=-1;const o=n;let i;return i=iu((function(n,o){if(r+=1,0===n.tag){const i=e(t+".["+f(r)+"]",o);return 0===i.tag?new Ne(0,"Ok",new Y(i.fields[0],n.fields[0])):new Ne(1,"Error",i.fields[0])}return n}),new Ne(0,"Ok",new Y),o),ze(lu,i)}{const e=[t,new Ws(0,"BadPrimitive","a list",n)];return new Ne(1,"Error",e)}}function gc(e,t,n){if(Array.isArray(n)){let r=-1;const o=n,i=nu(new Array(o.length),0,o.length,null);return iu((function(n,o){if(r+=1,0===n.tag){const i=e(t+".["+f(r)+"]",o);return 0===i.tag?(n.fields[0][r]=i.fields[0],new Ne(0,"Ok",n.fields[0])):new Ne(1,"Error",i.fields[0])}return n}),new Ne(0,"Ok",i),o)}{const e=[t,new Ws(0,"BadPrimitive","an array",n)];return new Ne(1,"Error",e)}}function wc(e,t,n){return new Ne(0,"Ok",e)}function pc(e,t,n,r){const o=t(n,r);return 0===o.tag?e(o.fields[0],n,r):new Ne(1,"Error",o.fields[0])}function mc(e,t,n,r){const o=t(n,r);return 1===o.tag?new Ne(1,"Error",o.fields[0]):new Ne(0,"Ok",e(o.fields[0]))}function xc(e,t,n,r){let o;return o=I(1,n,[t])(r),1===o.tag?(e.push(o.fields[0]),null):o.fields[0]}const Ac=H((function(e,t){const n=this;n.errors=[],n.required={Field:(r,o)=>xc(n.errors,e,(function(e,t){return function(e,t,n,r){if(null!==r&&Object.getPrototypeOf(r||!1)===Object.prototype){const o=r[e];return $a(o)?new Ne(1,"Error",[n,new Ws(3,"BadField","an object with a field named `"+e+"`",r)]):t(n+"."+e,o)}return new Ne(1,"Error",[n,new Ws(2,"BadType","an object",r)])}(r,o,e,t)}),t),At:(r,o)=>xc(n.errors,e,(function(e,t){return function(e,t,n,r){let o;return o=fu((function(t,n){if(null==t[2]){if(null==t[1]){const n=dc(e,t[0],r);return[t[0],t[1],n]}if(null!==t[1]&&Object.getPrototypeOf(t[1]||!1)===Object.prototype){const o=t[1][n];if($a(o)){const n=dc(e,void 0,r);return[t[0],o,n]}return[t[0]+"."+n,o,void 0]}{const e=new Ne(1,"Error",[t[0],new Ws(2,"BadType","an object",t[1])]);return[t[0],t[1],e]}}return[t[0],t[1],t[2]]}),[n,r,void 0],e),null==o[2]?t(o[0],o[1]):o[2]}(r,o,e,t)}),t),Raw:r=>xc(n.errors,e,r,t)},n.optional={Field:(r,o)=>xc(n.errors,e,(function(e,t){return function(e,t,n,r){if(null!==r&&Object.getPrototypeOf(r||!1)===Object.prototype){const o=r[e];return $a(o)?new Ne(0,"Ok",void 0):lc(n+"."+e,t,o)}return new Ne(1,"Error",[n,new Ws(2,"BadType","an object",r)])}(r,o,e,t)}),t),At:(r,o)=>xc(n.errors,e,(function(e,t){return function(e,t,n,r){let o;return o=fu((function(t,n){if(null==t[2]){if(null==t[1]){const n=dc(e,t[0],r);return[t[0],t[1],n]}if(null!==t[1]&&Object.getPrototypeOf(t[1]||!1)===Object.prototype){const e=t[1][n];return[t[0]+"."+n,e,void 0]}{const e=new Ne(1,"Error",[t[0],new Ws(2,"BadType","an object",t[1])]);return[t[0],t[1],e]}}return[t[0],t[1],t[2]]}),[n,r,void 0],e),null==o[2]?$a(o[1])?new Ne(0,"Ok",void 0):lc(o[0],t,o[1]):o[2]}(r,o,e,t)}),t),Raw(r){let o;if(o=I(1,r,[e])(t),1!==o.tag)return Le(o.fields[0]);var i,u;switch(1===o.fields[0][1].tag||2===o.fields[0][1].tag?(i=0,u=o.fields[0][1].fields[1]):3===o.fields[0][1].tag||4===o.fields[0][1].tag?i=1:5===o.fields[0][1].tag||6===o.fields[0][1].tag||7===o.fields[0][1].tag?i=2:(i=0,u=o.fields[0][1].fields[1]),i){case 0:return null==u?void 0:(n.errors.push(o.fields[0]),null);case 1:return;case 2:return n.errors.push(o.fields[0]),null}}}}));function Sc(e,t,n){const r=function(e,t){return this instanceof Ac?Ac.call(this,e,t):new Ac(e,t)}(t,n);let o;o=e(r);const i=du(r.errors);if(null!=i.tail){if(hu(i)>1){const e=gu((function(e){return Ja(e[0],e[1])}),i),n=[t,new Ws(7,"BadOneOf",e)];return new Ne(1,"Error",n)}return new Ne(1,"Error",i.head)}return new Ne(0,"Ok",o)}function bc(e){return li(t={Compare:T},ni(t,e));var t}function yc(e,t,n,r){var o,i,u,s,a,c;if(t.length!==r.length){const f=[n,(i=0|t.length,u=0|r.length,s=Vr(Nr("Expected %i %s but got %i")),a=s(i),c=a(e),o=c(u),new Ws(6,"FailMessage",o))];return new Ne(1,"Error",f)}{const e=new Ne(0,"Ok",new Y);return uu(U(3,k((function(e){return function(t){return function(r){if(0===r.tag){return ze((function(e){return new Y(e,r.fields[0])}),t(n,e))}return r}}}),[0,[0,2],0])),r,t,e)}}function Tc(e,t,n,r,o,i){let u;const s=Te(n);var a;if(a=function(e){return he(e)===r},u=s.find(a),null!=u){const n=u;if(0===i.length){const e=Be(n,[]);return new Ne(0,"Ok",e)}{let r;r=ru((function(n){return Rc(e,t,!1,n[1])}),Fe(n),Array);return ze((function(e){return Be(n,au(e,Array))}),yc("union fields",r,o,i))}}{const e=[o,new Ws(6,"FailMessage","Cannot find case "+r+" in "+ve(n))];return new Ne(1,"Error",e)}}function Ec(e,t,n,r){const o=new K(null);let i;const u=ve(r);let s;if(i=pi(u,o,e),Pe(r)){let e;const n=Ee(r);e=ru((function(e){return[Ks(t,he(e)),Rc(i,t,!1,e[1])]}),n,Array),s=function(t){return function(n){const o=function(e,t,n){if(null===n||Object.getPrototypeOf(n||!1)!==Object.prototype){const e=[t,new Ws(0,"BadPrimitive","an object",n)];return new Ne(1,"Error",e)}{const i=new Ne(0,"Ok",new Y);return r=function(e,r){return 0===r.tag?ze((function(e){return new Y(e,r.fields[0])}),e[1](t+"."+e[0])(n[e[0]])):r},o=i,e.reduceRight((function(e,t){return r(t,e)}),o)}var r,o}(e,t,n);return ze((function(e){return function(e,t){const n=Ee(e);if(n.length!==t.length)throw new Error(`Expected an array of length ${n.length} but got ${t.length}`);return null!=e.construct?new e.construct(...t):J(n.reduce((e,[n,r],o)=>(e[n]=t[o],e),{}))}(r,au(e,Array))}),o)}}}else if(Ce(r))s=function(e){return function(n){if("string"==typeof n){return Tc(i,t,r,n,e,[])}if(Array.isArray(n)){const o=n;let u;return u=o[0],Tc(i,t,r,u,e,o.slice(1,o.length))}{const t=[e,new Ws(0,"BadPrimitive","a string or array",n)];return new Ne(1,"Error",t)}}};else{if(!n){let e;const t=ve(r);throw e=Vr(Nr("Cannot generate auto decoder for %s. Please pass an extra decoder."))(t),new Error(e)}s=function(e){return function(t){return new Ne(1,"Error",[e,new Ws(2,"BadType","an extra coder for "+ve(r),t)])}}}return o.contents=s,s}function Rc(e,t,n,r){var o,i;const u=ve(r),s=xi(u,e);if(null==s){if(ge(r)){let n;const o=we(r);return n=Rc(e,t,!1,o),function(e){return function(t){return gc(U(2,n),e,t)}}}if(me(r)){const e=ve(Ae(r));return"System.SByte"===e?function(e){return function(t){const n=tc(e)(t);if(1===n.tag)return new Ne(1,"Error",n.fields[0]);{let o,i;if(i=Se(r),o=so(n.fields[0],i),o){const e=ye(r,n.fields[0].toString());return new Ne(0,"Ok",e)}{const n=[e,new Ws(1,"BadPrimitiveExtra",ve(r),t,"Unkown value provided for the enum")];return new Ne(1,"Error",n)}}}}:"System.Byte"===e?function(e){return function(t){const n=nc(e)(t);if(1===n.tag)return new Ne(1,"Error",n.fields[0]);{let o,i;if(i=Se(r),o=so(n.fields[0],i),o){const e=ye(r,n.fields[0].toString());return new Ne(0,"Ok",e)}{const n=[e,new Ws(1,"BadPrimitiveExtra",ve(r),t,"Unkown value provided for the enum")];return new Ne(1,"Error",n)}}}}:"System.Int16"===e?function(e){return function(t){const n=rc(e)(t);if(1===n.tag)return new Ne(1,"Error",n.fields[0]);{let u,s;if(s=Se(r),u=so(n.fields[0],s),u){const e=ye(r,(o=(o=n.fields[0])<0&&null!=i&&10!==i?65535+o+1:o).toString(i));return new Ne(0,"Ok",e)}{const n=[e,new Ws(1,"BadPrimitiveExtra",ve(r),t,"Unkown value provided for the enum")];return new Ne(1,"Error",n)}}var o,i}}:"System.UInt16"===e?function(e){return function(t){const n=oc(e)(t);if(1===n.tag)return new Ne(1,"Error",n.fields[0]);{let o,i;if(i=Se(r),o=so(n.fields[0],i),o){const e=ye(r,n.fields[0].toString());return new Ne(0,"Ok",e)}{const n=[e,new Ws(1,"BadPrimitiveExtra",ve(r),t,"Unkown value provided for the enum")];return new Ne(1,"Error",n)}}}}:"System.Int32"===e?function(e){return function(t){const n=ic(e)(t);if(1===n.tag)return new Ne(1,"Error",n.fields[0]);{let o,i;if(i=Se(r),o=so(n.fields[0],i),o){const e=ye(r,f(n.fields[0]));return new Ne(0,"Ok",e)}{const n=[e,new Ws(1,"BadPrimitiveExtra",ve(r),t,"Unkown value provided for the enum")];return new Ne(1,"Error",n)}}}}:"System.UInt32"===e?function(e){return function(t){const n=uc(e)(t);if(1===n.tag)return new Ne(1,"Error",n.fields[0]);{let o,i;if(i=Se(r),o=so(n.fields[0],i),o){const e=ye(r,n.fields[0].toString());return new Ne(0,"Ok",e)}{const n=[e,new Ws(1,"BadPrimitiveExtra",ve(r),t,"Unkown value provided for the enum")];return new Ne(1,"Error",n)}}}}:(o=Hr(Nr("Cannot generate auto decoder for %s.\nThoth.Json.Net only support the folluwing enum types:\n- sbyte\n- byte\n- int16\n- uint16\n- int\n- uint32\nIf you can't use one of these types, please pass an extra decoder.\n                    ")),function(e){const t=o(e);return function(e){const n=t(e);return function(e){return n(e)}}})(ve(r))}if(pe(r)){if(Me(r)){let n;const o=Re(r);return n=ru((function(n){return Rc(e,t,!1,n)}),o,Array),function(e){return function(t){if(Array.isArray(t)){return ze((function(e){return au(e,Array)}),yc("tuple elements",n,e,t))}{const n=[e,new Ws(0,"BadPrimitive","an array",t)];return new Ne(1,"Error",n)}}}}{const o=ve(xe(r));if("Microsoft.FSharp.Core.FSharpOption`1[System.Object]"===o){let n,o;const i=te(r)[0];return o=Rc(e,t,!0,i),n=function(e){return function(t){return n=U(2,o),r=e,null==(i=t)?new Ne(0,"Ok",void 0):ze((function(e){return Le(e)}),n(r,i));var n,r,i}},n}if("Microsoft.FSharp.Collections.FSharpList`1[System.Object]"===o){let n,o;const i=te(r)[0];return o=Rc(e,t,!1,i),n=function(e){return function(t){return vc(U(2,o),e,t)}},n}if("Microsoft.FSharp.Collections.FSharpMap`2[System.Object,System.Object]"===o){let n;const o=te(r)[0];let u;n=Rc(e,t,!1,o);const s=te(r)[1];let f;u=Rc(e,t,!1,s);const l=pu([function(e){return function(t){return function(e,t,n,r){if(null===r||Object.getPrototypeOf(r||!1)!==Object.prototype){const e=[n,new Ws(0,"BadPrimitive","an object",r)];return new Ne(1,"Error",e)}return co((function(o,i){if(0===o.tag){let u;if(u=I(1,e,[n])(i),0===u.tag){const e=t(n+"."+i,r[i]);if(0===e.tag){const t=new Y([u.fields[0],e.fields[0]],o.fields[0]);return new Ne(0,"Ok",t)}return new Ne(1,"Error",e.fields[0])}return new Ne(1,"Error",u.fields[0])}return o}),new Ne(0,"Ok",new Y),Object.keys(r))}(U(2,n),U(2,u),e,t)}},(a=U(2,n),c=U(2,u),i=function(e){return function(t){return pc((function(e,t,n){return pc((function(t,n,r){return wc([e,t])}),(function(e,t){return hc(1,c,e,t)}),t,n)}),(function(e,t){return hc(0,a,e,t)}),e,t)}},function(e){return function(t){return vc(U(2,i),e,t)}})]);return f=function(e){return function(t){return n=e,r=t,function(e,t){e:for(;;){const o=e,i=t;if(null==o.tail){const e=[n,new Ws(7,"BadOneOf",i)];return new Ne(1,"Error",e)}{const u=Ka(n,U(2,o.head),r);if(1===u.tag){e=o.tail,t=vu(i,new Y(u.fields[0],new Y));continue e}return new Ne(0,"Ok",u.fields[0])}}}(l,new Y);var n,r}},function(e){return function(t){return mc((function(e){return bc(e)}),U(2,f),e,t)}}}if("Microsoft.FSharp.Collections.FSharpSet`1[System.Object]"===o){let n;const o=te(r)[0];return n=Rc(e,t,!1,o),function(e){return function(t){const r=gc(U(2,n),e,t);if(0===r.tag){let e;return e=Qi(r.fields[0],{Compare:T}),new Ne(0,"Ok",e)}return new Ne(1,"Error",r.fields[0])}}}return Ec(e,t,n,r)}}return"System.Boolean"===u?function(e){return function(t){return function(e,t){if("boolean"==typeof t)return new Ne(0,"Ok",t);{const n=[e,new Ws(0,"BadPrimitive","a boolean",t)];return new Ne(1,"Error",n)}}(e,t)}}:"Microsoft.FSharp.Core.Unit"===u?function(e){return function(t){return function(e,t){if(null==t)return new Ne(0,"Ok",void 0);{const n=[e,new Ws(0,"BadPrimitive","null",t)];return new Ne(1,"Error",n)}}(e,t)}}:"System.String"===u?function(e){return function(t){return function(e,t){if("string"==typeof t)return new Ne(0,"Ok",t);{const n=[e,new Ws(0,"BadPrimitive","a string",t)];return new Ne(1,"Error",n)}}(e,t)}}:"System.SByte"===u?tc:"System.Byte"===u?nc:"System.Int16"===u?rc:"System.UInt16"===u?oc:"System.Int32"===u?ic:"System.UInt32"===u?uc:"System.Double"===u?function(e){return function(t){return function(e,t){if("number"==typeof t)return new Ne(0,"Ok",t);{const n=[e,new Ws(0,"BadPrimitive","a float",t)];return new Ne(1,"Error",n)}}(e,t)}}:"System.Single"===u?function(e){return function(t){return function(e,t){if("number"==typeof t)return new Ne(0,"Ok",t);{const n=[e,new Ws(0,"BadPrimitive","a float32",t)];return new Ne(1,"Error",n)}}(e,t)}}:"System.DateTime"===u?function(e){return function(t){return ac(e,t)}}:"System.DateTimeOffset"===u?function(e){return function(t){return cc(e,t)}}:"System.TimeSpan"===u?function(e){return function(t){return fc(e,t)}}:"System.Guid"===u?function(e){return function(t){return function(e,t){if("string"==typeof t){const n=Xr(t,!0);if(n[0])return new Ne(0,"Ok",n[1]);{const n=[e,new Ws(0,"BadPrimitive","a guid",t)];return new Ne(1,"Error",n)}}{const n=[e,new Ws(0,"BadPrimitive","a guid",t)];return new Ne(1,"Error",n)}}(e,t)}}:"System.Object"===u?function(e){return function(e){return new Ne(0,"Ok",e)}}:Ec(e,t,n,r)}{const e=s;return function(t){return function(n){return e.contents(t)(n)}}}var a,c}function Cc(e){if(null!=e){return Si((function(e,t){return new K(t[1])}),e.Coders)}return Ti({Compare:S})}Object.defineProperty(Ac.prototype,"Required",{get:function(){return this.required}}),Object.defineProperty(Ac.prototype,"Optional",{get:function(){return this.optional}});H((function(){}));function Pc(e,t,n){const r=n.ResolveType(),o=Oe(e,new Ys(0,"PascalCase"));let i,u;const s=ve(r);let a,c;u=String(o)+s,c=Ie((function(e){return e.Hash}),t),a=Oe(c,""),i=a+u;return $s(Zs,i,(function(){return Rc(Cc(t),o,!1,r)}))}function Mc(e){return String(e)}function Fc(e){const t={};return lo((function(e){t[e[0]]=e[1]}),e),t}function Bc(e){return String(e)}H((function(){}));const Dc=new Xs("",Ti({Compare:S}));function Lc(e){var t,n;return Fc([["x",(t=0|$e(e),t)],["y",(n=0|Ze(e),n)]])}function _c(e){var t,n;return Fc([["width",(t=0|We(e),t)],["height",(n=0|Ye(e),n)]])}const Oc=(()=>{let e,t,n;n=new Xs(Gr(),pi("System.Int64",[Bc,sc],Dc.Coders)),t=new Xs(Gr(),pi("System.Decimal",[Mc,function(e){return function(t){return function(e,t){if("number"==typeof t){let e;return e=new yr(t),new Ne(0,"Ok",e)}if("string"==typeof t){const n=Er(t);if(n[0])return new Ne(0,"Ok",n[1]);{const n=[e,new Ws(0,"BadPrimitive","a decimal",t)];return new Ne(1,"Error",n)}}{const n=[e,new Ws(0,"BadPrimitive","a decimal",t)];return new Ne(1,"Error",n)}}(e,t)}}],n.Coders));const r=function(e){return function(t){return Sc((function(e){return qe(e.Required.Field("x",U(2,ic)),e.Required.Field("y",U(2,ic)))}),e,t)}};e=new Xs(Gr(),pi("Models.Position",[Lc,r],t.Coders));const o=function(e){return function(t){return Sc((function(e){return je(e.Required.Field("width",U(2,ic)),e.Required.Field("height",U(2,ic)))}),e,t)}};return new Xs(Gr(),pi("Models.Size",[_c,o],e.Coders))})(),Uc=document.getElementById("App"),Ic=document.createElement("canvas");Uc.appendChild(Ic);const kc=Ic.getContext("webgl2",J({premultipliedAlpha:!1}));function Nc(e){const t=e.data;switch(t.tag){case 2:return Le(t.fields[0]);case 0:if(""===nt(e))return void(e.data=new ke(3,"Choice4Of4",void 0));{let t;return t=To(0,yo(0,(function(){var t,n;return Eo((t=nt(e),n=Vr(Nr("data/%s.mp3")),n(t)),new Y).then((function(t){return t.arrayBuffer().then((function(t){return Ro().decodeAudioData(t).then((function(t){var n;return n=t,e.data=new ke(2,"Choice3Of4",n),Promise.resolve(null)}))}))}))}))),t.then(),void(e.data=new ke(1,"Choice2Of4",void 0))}default:return}}function zc(e){const t=e.data;switch(t.tag){case 2:return[t.fields[0][0],t.fields[0][1]];case 0:if(""===et(e))return void(e.data=new ke(3,"Choice4Of4",void 0));{e.data=new ke(1,"Choice2Of4",void 0);const t=document.createElement("img");return t.onload=function(n){const r=je(0|~~t.width,0|~~t.height),o=function(e,t,n,r){const o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),o}(e.smooth,kc,t);var i,u;i=o,u=r,e.data=new ke(2,"Choice3Of4",[i,u])},void(t.src="data/"+et(e))}default:return}}const Vc=[],Hc=C(rr()),jc=[];Lo((function(e){jc.push(e)}));const Wc=C((()=>{const e=Du();return wu(_o,e[1]),e[0]})()),Yc=C(new Rt(1,je(0,0),new vt(6,"Empty"),new ke(0,"Choice1Of3",void 0),void 0,void 0,void 0,void 0)),Xc=C(!0),Gc=function(e,t){var n,r,o,u,a,c,f,l,d,h,v,g,p,A,b,y,T,C,P,M,F,B,D,L,_,U,I,k,z,V,H,j,W,Y,X,G,q,$,Z,J,K,Q,ee,te,ne,re,oe,ie,ue,se,ae,ce,fe,le,de,he,ve,ge,we,pe,me,xe,Ae,Se,be,ye,Te,Ee,Re,Ce,Pe,Me,Fe,Be,De,Le,_e,Ue,Ie,ke,Ne,ze,Ve,He,Xe,Ge,Ke,et,tt,nt,rt,ot,ut,st,ct,ft,lt,dt,ht,vt,gt,wt,pt,mt,xt,At,St,bt,yt,Tt,Et,Rt,Ct,Pt,Mt,Ft,Bt,Dt,Lt,_t,Ot,Ut,It,kt,Nt,zt,Vt,Ht,jt,Wt,Yt,Xt,Gt,qt,$t,Zt,Jt,Kt,Qt,en,tn,nn,rn,on,un,sn,an,cn,fn,ln,dn,hn,vn,gn,wn,pn,mn,xn,An,Sn,bn,yn,Tn,En,Rn,Cn,Pn,Mn,Fn,Bn,Dn,Ln,_n,On,Un,In,kn,Nn,zn,Vn,Hn,jn,Wn,Yn,Xn,Gn,qn,$n,Zn,Jn,Kn,Qn,er,tr,nr,rr,or,ir,ar,cr,fr,lr,hr,vr,gr,wr,pr,mr,xr,Ar,Sr,br,yr,Tr,Er,Rr,Cr,Pr,Mr,Fr,Br,Dr,Lr,_r,Or,Ur,Ir,kr,Vr,Hr,jr,Wr,Yr,Xr,Gr,qr,$r,Zr,Jr,Kr,Qr,eo,to,no,ro,io,uo,so,ao,co,fo,ho,go,wo,mo,xo,Ao,So,bo,yo,To,Eo,Ro,Lo,_o,Oo,Io,No,zo;let Vo;const Ho=e.createBuffer(),jo=(Wo=oo((function(){return vo((function(e){return[ko(0,1),ko(0,1),ko(0,1),ko(0,1)]}),po(0,1,2999))})),Array.from(Wo));var Wo;const Yo=new Float32Array(4*jo.length);for(let e=0;e<=jo.length-1;e++){const t=jo[e];Yo[4*e+0]=t[0],Yo[4*e+1]=t[1],Yo[4*e+2]=t[2],Yo[4*e+3]=t[3]}let Xo;e.bindBuffer(e.ARRAY_BUFFER,Ho),e.bufferData(e.ARRAY_BUFFER,Yo,e.STATIC_DRAW),Vo=Ho;const Go=e.createBuffer(),qo=[[0,1],[1,1],[1,0],[0,1],[1,0],[0,0]],$o=new Float32Array(2*qo.length);for(let e=0;e<=qo.length-1;e++){const t=qo[e];$o[2*e+0]=t[0],$o[2*e+1]=t[1]}let Zo;e.bindBuffer(e.ARRAY_BUFFER,Go),e.bufferData(e.ARRAY_BUFFER,$o,e.STATIC_DRAW),Xo=Go;const Jo=e.createBuffer(),Ko=[[0,0],[1,0],[1,1],[0,0],[1,1],[0,1]],Qo=new Float32Array(2*Ko.length);for(let e=0;e<=Ko.length-1;e++){const t=Ko[e];Qo[2*e+0]=t[0],Qo[2*e+1]=t[1]}let ei;e.bindBuffer(e.ARRAY_BUFFER,Jo),e.bufferData(e.ARRAY_BUFFER,Qo,e.STATIC_DRAW),Zo=Jo;const ti=Math.fround(-1),ni=Math.fround(1),ri=Math.fround(-1),oi=Math.fround(1),ii=e.createBuffer(),ui=[[ti,ri],[ni,ri],[ni,oi],[ti,ri],[ni,oi],[ti,oi]],si=new Float32Array(2*ui.length);for(let e=0;e<=ui.length-1;e++){const t=ui[e];si[2*e+0]=t[0],si[2*e+1]=t[1]}let ai;e.bindBuffer(e.ARRAY_BUFFER,ii),e.bufferData(e.ARRAY_BUFFER,si,e.STATIC_DRAW),ei=ii;const ci=Math.fround(0),fi=Math.fround(1),li=Math.fround(0),di=Math.fround(1),hi=e.createBuffer(),vi=[[ci,li],[fi,li],[fi,di],[ci,li],[fi,di],[ci,di]],gi=new Float32Array(2*vi.length);for(let e=0;e<=vi.length-1;e++){const t=vi[e];gi[2*e+0]=t[0],gi[2*e+1]=t[1]}e.bindBuffer(e.ARRAY_BUFFER,hi),e.bufferData(e.ARRAY_BUFFER,gi,e.STATIC_DRAW),ai=hi;const wi=(n=e.createShader(e.VERTEX_SHADER),e.shaderSource(n,"#version 300 es\r\n    precision highp float;\r\n\r\n    uniform mat4 projection;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec2 textureBuffer;\r\n\r\n    in vec4 position;\r\n    in vec4 diffuseTextureSlice;\r\n\r\n    out vec2 diffuseTextureCoord;\r\n\r\n    void main() {\r\n        vec2 screenPosition = (position.zw * vertexBuffer) + position.xy;\r\n        diffuseTextureCoord = (diffuseTextureSlice.zw * textureBuffer) + diffuseTextureSlice.xy;\r\n\r\n        gl_Position = vec4(screenPosition, 0.0, 1.0) * projection;\r\n    }"),e.compileShader(n),r=e.getShaderInfoLog(n),zr(Nr("vertexShader: %s"))(r),o=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(o,"#version 300 es\r\n    precision highp float;\r\n    \r\n    in vec2 diffuseTextureCoord;\r\n\r\n    uniform sampler2D diffuseTexture;\r\n    uniform vec3 color;\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        vec4 c = texture(diffuseTexture, diffuseTextureCoord);\r\n        diffuseColor = vec4(color, c.a);\r\n    }\r\n"),e.compileShader(o),u=e.getShaderInfoLog(o),zr(Nr("fragmentShader: %s"))(u),a=e.createProgram(),e.attachShader(a,n),e.attachShader(a,o),e.linkProgram(a),c=e.getProgramInfoLog(a),zr(Nr("program: %s"))(c),e.detachShader(a,n),e.deleteShader(n),e.detachShader(a,o),e.deleteShader(o),e.useProgram(a),f=nu(new Array(7),0,7,null),l=e.getUniformLocation(a,"projection"),f[0]=l,d=e.getAttribLocation(a,"vertexBuffer"),f[1]=d,h=e.getAttribLocation(a,"textureBuffer"),f[2]=h,v=e.getAttribLocation(a,"position"),f[3]=v,g=e.getAttribLocation(a,"diffuseTextureSlice"),f[4]=g,p=e.getUniformLocation(a,"diffuseTexture"),f[5]=p,A=e.getUniformLocation(a,"color"),f[6]=A,[a,f,e]),pi=(b=e.createShader(e.VERTEX_SHADER),e.shaderSource(b,"#version 300 es\r\n    precision highp float;\r\n\r\n    uniform mat4 projection;\r\n    uniform vec2 resolution;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec2 textureBuffer;\r\n\r\n    in vec4 position;\r\n    in vec4 diffuseTextureSlice;\r\n    in vec2 shadowInfo;\r\n\r\n    out vec2 diffuseTextureCoord;\r\n    out vec2 shadowInfo2;\r\n    out vec2 worldTextureCoord;\r\n    out float sunPower2;\r\n\r\n    uniform vec3 light;\r\n    uniform float radius;\r\n    uniform float sunPower;\r\n\r\n    void main() {\r\n        float angle = atan(position.y - light.y, position.x - light.x);\r\n\r\n        float hypo = length(vec3(position.xy, 0.0) - light);\r\n        float b = 1.0 - (sin(light.z / hypo));\r\n\r\n        float ox = (shadowInfo.y * b) * cos(angle);\r\n        float oy = (shadowInfo.y * b) * sin(angle);\r\n\r\n        vec2 screenPosition = (position.zw * vertexBuffer) + position.xy + vec2(ox, oy);\r\n        diffuseTextureCoord = (diffuseTextureSlice.zw * textureBuffer) + diffuseTextureSlice.xy;\r\n\r\n        gl_Position = vec4(screenPosition, 0.0, 1.0) * projection;\r\n        \r\n        worldTextureCoord = \r\n            vec2(screenPosition.x / resolution.x,\r\n                 1.0 - (screenPosition.y / resolution.y));\r\n\r\n        shadowInfo2 = shadowInfo;\r\n        sunPower2 = mix(sunPower, 0.0, clamp((hypo / radius) * 0.5, 0.0, 1.0));\r\n    }"),e.compileShader(b),y=e.getShaderInfoLog(b),zr(Nr("vertexShader: %s"))(y),T=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(T,"#version 300 es\r\n    precision highp float;\r\n    \r\n    in vec2 diffuseTextureCoord;\r\n    in vec2 shadowInfo2;\r\n    in vec2 worldTextureCoord;\r\n    in float sunPower2;\r\n        \r\n    uniform sampler2D colorTexture;\r\n    uniform sampler2D depthTexture;\r\n\r\n    layout(location = 0) out vec4 diffuseTexture;\r\n\r\n    \r\n    const float devide256 = 0.00390625;\r\n\r\n    vec2 pack (float value) {\r\n        float v = floor(value);\r\n        float y = mod(v, 256.0);\r\n        float x = v - y;\r\n        return vec2(x / 255.0 / 255.0, y / 255.0);\r\n    }\r\n\r\n    float unpack (vec2 color) {\r\n        return floor((color.x * 255.0 * 255.0) + (color.y * 255.0));\r\n    }\r\n\r\n\r\n    void main(void) {\r\n        diffuseTexture = vec4(0.0);\r\n        \r\n        vec4 depthColor = texture(depthTexture, worldTextureCoord);\r\n        float depth = depthColor.z;\r\n\r\n        if (depth == 0.0) {\r\n            vec4 found = texture(colorTexture, diffuseTextureCoord);\r\n            float amount = 0.0;\r\n\r\n            float split = 1.0 / 2.0;\r\n\r\n            if (shadowInfo2.x <= split) {\r\n                amount = mix(found.r, found.g, shadowInfo2.x * 2.0);\r\n            } else {\r\n                amount = mix(found.g, found.b, (shadowInfo2.x - split) * 2.0);\r\n            }\r\n\r\n            float alpha =  mix(0.2, 0.0, shadowInfo2.x);\r\n            float totalAlpha = amount * alpha * sunPower2;\r\n            vec3 c = vec3(1.0) * (1.0 - totalAlpha);\r\n\r\n            diffuseTexture = vec4(c, 1.0);\r\n        } else {\r\n            diffuseTexture = vec4(1.0);\r\n        }\r\n    }\r\n"),e.compileShader(T),C=e.getShaderInfoLog(T),zr(Nr("fragmentShader: %s"))(C),P=e.createProgram(),e.attachShader(P,b),e.attachShader(P,T),e.linkProgram(P),M=e.getProgramInfoLog(P),zr(Nr("program: %s"))(M),e.detachShader(P,b),e.deleteShader(b),e.detachShader(P,T),e.deleteShader(T),e.useProgram(P),F=nu(new Array(12),0,12,null),B=e.getUniformLocation(P,"projection"),F[0]=B,D=e.getUniformLocation(P,"resolution"),F[1]=D,L=e.getAttribLocation(P,"vertexBuffer"),F[2]=L,_=e.getAttribLocation(P,"textureBuffer"),F[3]=_,U=e.getAttribLocation(P,"position"),F[4]=U,I=e.getAttribLocation(P,"diffuseTextureSlice"),F[5]=I,k=e.getAttribLocation(P,"shadowInfo"),F[6]=k,z=e.getUniformLocation(P,"light"),F[7]=z,V=e.getUniformLocation(P,"radius"),F[8]=V,H=e.getUniformLocation(P,"sunPower"),F[9]=H,j=e.getUniformLocation(P,"colorTexture"),F[10]=j,W=e.getUniformLocation(P,"depthTexture"),F[11]=W,[P,F,e]),mi=(Y=e.createShader(e.VERTEX_SHADER),e.shaderSource(Y,"#version 300 es\r\n    precision highp float;\r\n\r\n    uniform mat4 projection;\r\n    uniform vec2 resolution;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec2 textureBuffer;\r\n\r\n    in vec4 position;\r\n    in vec4 diffuseTextureSlice;\r\n    in vec2 shadowInfo;\r\n\r\n    out vec2 diffuseTextureCoord;\r\n    out vec2 shadowInfo2;\r\n    out vec2 worldTextureCoord;\r\n\r\n    out float sunPower2;\r\n\r\n    uniform float sunPower;\r\n    uniform float angle;\r\n    uniform float height;\r\n\r\n    void main() {\r\n        float ox = (shadowInfo.y * (1.0 - height)) * cos(angle);\r\n        float oy = (shadowInfo.y * (1.0 - height)) * sin(angle);\r\n\r\n        vec2 screenPosition = (position.zw * vertexBuffer) + position.xy + vec2(ox, oy);\r\n        diffuseTextureCoord = (diffuseTextureSlice.zw * textureBuffer) + diffuseTextureSlice.xy;\r\n\r\n        gl_Position = vec4(screenPosition, 0.0, 1.0) * projection;\r\n        \r\n        worldTextureCoord = \r\n            vec2(screenPosition.x / resolution.x,\r\n                 1.0 - (screenPosition.y / resolution.y));\r\n\r\n        shadowInfo2 = shadowInfo;\r\n        sunPower2 = sunPower;\r\n    }"),e.compileShader(Y),X=e.getShaderInfoLog(Y),zr(Nr("vertexShader: %s"))(X),G=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(G,"#version 300 es\r\n    precision highp float;\r\n    \r\n    in vec2 diffuseTextureCoord;\r\n    in vec2 shadowInfo2;\r\n    in vec2 worldTextureCoord;\r\n    in float sunPower2;\r\n        \r\n    uniform sampler2D colorTexture;\r\n    uniform sampler2D depthTexture;\r\n\r\n    layout(location = 0) out vec4 diffuseTexture;\r\n\r\n    \r\n    const float devide256 = 0.00390625;\r\n\r\n    vec2 pack (float value) {\r\n        float v = floor(value);\r\n        float y = mod(v, 256.0);\r\n        float x = v - y;\r\n        return vec2(x / 255.0 / 255.0, y / 255.0);\r\n    }\r\n\r\n    float unpack (vec2 color) {\r\n        return floor((color.x * 255.0 * 255.0) + (color.y * 255.0));\r\n    }\r\n\r\n\r\n    void main(void) {\r\n        diffuseTexture = vec4(0.0);\r\n        \r\n        vec4 depthColor = texture(depthTexture, worldTextureCoord);\r\n        float depth = depthColor.z;\r\n\r\n        if (depth == 0.0) {\r\n            vec4 found = texture(colorTexture, diffuseTextureCoord);\r\n            float amount = 0.0;\r\n\r\n            float split = 1.0 / 2.0;\r\n\r\n            if (shadowInfo2.x <= split) {\r\n                amount = mix(found.r, found.g, shadowInfo2.x * 2.0);\r\n            } else {\r\n                amount = mix(found.g, found.b, (shadowInfo2.x - split) * 2.0);\r\n            }\r\n\r\n            float alpha =  mix(0.2, 0.0, shadowInfo2.x);\r\n            float totalAlpha = amount * alpha * sunPower2;\r\n            vec3 c = vec3(1.0) * (1.0 - totalAlpha);\r\n\r\n            diffuseTexture = vec4(c, 1.0);\r\n        } else {\r\n            diffuseTexture = vec4(1.0);\r\n        }\r\n    }\r\n"),e.compileShader(G),q=e.getShaderInfoLog(G),zr(Nr("fragmentShader: %s"))(q),$=e.createProgram(),e.attachShader($,Y),e.attachShader($,G),e.linkProgram($),Z=e.getProgramInfoLog($),zr(Nr("program: %s"))(Z),e.detachShader($,Y),e.deleteShader(Y),e.detachShader($,G),e.deleteShader(G),e.useProgram($),J=nu(new Array(12),0,12,null),K=e.getUniformLocation($,"projection"),J[0]=K,Q=e.getUniformLocation($,"resolution"),J[1]=Q,ee=e.getAttribLocation($,"vertexBuffer"),J[2]=ee,te=e.getAttribLocation($,"textureBuffer"),J[3]=te,ne=e.getAttribLocation($,"position"),J[4]=ne,re=e.getAttribLocation($,"diffuseTextureSlice"),J[5]=re,oe=e.getAttribLocation($,"shadowInfo"),J[6]=oe,ie=e.getUniformLocation($,"sunPower"),J[7]=ie,ue=e.getUniformLocation($,"angle"),J[8]=ue,se=e.getUniformLocation($,"height"),J[9]=se,ae=e.getUniformLocation($,"colorTexture"),J[10]=ae,ce=e.getUniformLocation($,"depthTexture"),J[11]=ce,[$,J,e]),xi=(fe=e.createShader(e.VERTEX_SHADER),e.shaderSource(fe,"#version 300 es\r\n    precision lowp float;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec2 textureCoord;\r\n\r\n    out vec2 vTextureCoord;\r\n\r\n    void main() {\r\n        gl_Position = vec4(vertexBuffer.xy, 0.0, 1.0);\r\n        vTextureCoord = textureCoord;\r\n    }"),e.compileShader(fe),le=e.getShaderInfoLog(fe),zr(Nr("vertexShader: %s"))(le),de=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(de,"#version 300 es\r\n    precision lowp float;\r\n    \r\n    in vec2 vTextureCoord;\r\n\r\n    uniform sampler2D colorTexture;\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        vec4 color = texture(colorTexture, vTextureCoord);\r\n        diffuseColor = vec4(vec3(0.0), (1.0 - color.r));\r\n    }\r\n"),e.compileShader(de),he=e.getShaderInfoLog(de),zr(Nr("fragmentShader: %s"))(he),ve=e.createProgram(),e.attachShader(ve,fe),e.attachShader(ve,de),e.linkProgram(ve),ge=e.getProgramInfoLog(ve),zr(Nr("program: %s"))(ge),e.detachShader(ve,fe),e.deleteShader(fe),e.detachShader(ve,de),e.deleteShader(de),e.useProgram(ve),we=nu(new Array(3),0,3,null),pe=e.getAttribLocation(ve,"vertexBuffer"),we[0]=pe,me=e.getAttribLocation(ve,"textureCoord"),we[1]=me,xe=e.getUniformLocation(ve,"colorTexture"),we[2]=xe,[ve,we,e]),Ai=(Ae=e.createShader(e.VERTEX_SHADER),e.shaderSource(Ae,"#version 300 es\r\n    precision lowp float;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec2 textureCoord;\r\n\r\n    out vec2 vTextureCoord;\r\n\r\n    void main() {\r\n        gl_Position = vec4(vertexBuffer.xy, 0.0, 1.0);\r\n        vTextureCoord = textureCoord;\r\n    }"),e.compileShader(Ae),Se=e.getShaderInfoLog(Ae),zr(Nr("vertexShader: %s"))(Se),be=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(be,"#version 300 es\r\n    precision lowp float;\r\n    \r\n    in vec2 vTextureCoord;\r\n\r\n    uniform sampler2D diffuseTexture;\r\n    uniform sampler2D lightTexture;\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        vec4 c = texture(diffuseTexture, vTextureCoord);\r\n        vec4 l = texture(lightTexture, vTextureCoord);\r\n\r\n        diffuseColor = vec4(c.rgb * l.rgb, c.a);\r\n    }\r\n"),e.compileShader(be),ye=e.getShaderInfoLog(be),zr(Nr("fragmentShader: %s"))(ye),Te=e.createProgram(),e.attachShader(Te,Ae),e.attachShader(Te,be),e.linkProgram(Te),Ee=e.getProgramInfoLog(Te),zr(Nr("program: %s"))(Ee),e.detachShader(Te,Ae),e.deleteShader(Ae),e.detachShader(Te,be),e.deleteShader(be),e.useProgram(Te),Re=nu(new Array(4),0,4,null),Ce=e.getAttribLocation(Te,"vertexBuffer"),Re[0]=Ce,Pe=e.getAttribLocation(Te,"textureCoord"),Re[1]=Pe,Me=e.getUniformLocation(Te,"diffuseTexture"),Re[2]=Me,Fe=e.getUniformLocation(Te,"lightTexture"),Re[3]=Fe,[Te,Re,e]),Si=(Be=e.createShader(e.VERTEX_SHADER),e.shaderSource(Be,"#version 300 es\r\n    precision highp float;\r\n\r\n    uniform mat4 projection;\r\n    in vec2 vertexBuffer;\r\n    in vec4 position;\r\n\r\n    void main() {\r\n        vec2 screenPosition = (position.zw * vertexBuffer) + position.xy;\r\n        gl_Position = vec4(screenPosition, 0.0, 1.0) * projection;\r\n    }"),e.compileShader(Be),De=e.getShaderInfoLog(Be),zr(Nr("vertexShader: %s"))(De),Le=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(Le,"#version 300 es\r\n    precision highp float;\r\n    \r\n    uniform vec4 color;\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        diffuseColor = color;\r\n    }\r\n"),e.compileShader(Le),_e=e.getShaderInfoLog(Le),zr(Nr("fragmentShader: %s"))(_e),Ue=e.createProgram(),e.attachShader(Ue,Be),e.attachShader(Ue,Le),e.linkProgram(Ue),Ie=e.getProgramInfoLog(Ue),zr(Nr("program: %s"))(Ie),e.detachShader(Ue,Be),e.deleteShader(Be),e.detachShader(Ue,Le),e.deleteShader(Le),e.useProgram(Ue),ke=nu(new Array(4),0,4,null),Ne=e.getUniformLocation(Ue,"projection"),ke[0]=Ne,ze=e.getAttribLocation(Ue,"vertexBuffer"),ke[1]=ze,Ve=e.getAttribLocation(Ue,"position"),ke[2]=Ve,He=e.getUniformLocation(Ue,"color"),ke[3]=He,[Ue,ke,e]),bi=(Xe=e.createShader(e.VERTEX_SHADER),e.shaderSource(Xe,"#version 300 es\r\n    precision mediump float;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec2 textureCoord;\r\n\r\n    in vec4 position;\r\n    in vec4 textureSlicePosition;\r\n\r\n    uniform vec2 iResolution;\r\n\r\n    out vec2 vTextureCoord;\r\n    out vec4 vTextureSlicePosition;\r\n    out vec2 vResolution;\r\n\r\n    void main() {\r\n        gl_Position =\r\n            vec4(-1.0 + (((2.0 * position.x) + (position.z * (vertexBuffer.x + 1.0))) / iResolution.x),\r\n                  1.0 - (((2.0 * position.y) - (position.w * (vertexBuffer.y - 1.0))) / iResolution.y),\r\n                  0.0,\r\n                  1.0);\r\n\r\n        vTextureCoord = textureCoord;\r\n        vResolution = iResolution;\r\n        vTextureSlicePosition = textureSlicePosition;\r\n    }"),e.compileShader(Xe),Ge=e.getShaderInfoLog(Xe),zr(Nr("vertexShader: %s"))(Ge),Ke=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(Ke,"#version 300 es\r\n    precision mediump float;\r\n\r\n    \r\n    uniform sampler2D colorTexture;\r\n    uniform vec2 colorTextureSize;\r\n\r\n    in vec2 vTextureCoord;\r\n    in vec2 vResolution;\r\n    in vec4 vTextureSlicePosition;\r\n\r\n    \r\n    vec4 textureColor(vec2 point, vec2 offset) {\r\n        float ox = (vTextureSlicePosition.x + offset.x) / colorTextureSize.x;\r\n        float oy = (vTextureSlicePosition.y + offset.y) / colorTextureSize.y;\r\n\r\n        float px = (vTextureSlicePosition.z / colorTextureSize.x) * point.x;\r\n        float py = (vTextureSlicePosition.w / colorTextureSize.y) * point.y;\r\n\r\n        float x = ox + px;\r\n        float y = oy + py;\r\n\r\n        return texture(colorTexture, vec2(x, y));\r\n    }\r\n\r\n\r\n    uniform float alpha;\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        vec4 foundColor = textureColor(vTextureCoord, vec2(0.0));\r\n\r\n        if (foundColor.a > 0.0 &&\r\n            (textureColor(vTextureCoord, vec2(-1.0, 0.0)).a < 1.0 || textureColor(vTextureCoord, vec2(1.0, 0.0)).a < 1.0 ||\r\n             textureColor(vTextureCoord, vec2(0.0, -1.0)).a < 1.0 || textureColor(vTextureCoord, vec2(0.0, 1.0)).a < 1.0))\r\n        {\r\n            diffuseColor = vec4(foundColor.r, foundColor.b, foundColor.b, foundColor.a * alpha);\r\n        }\r\n        else \r\n        {\r\n            diffuseColor = vec4(0.0);\r\n        }\r\n    }\r\n"),e.compileShader(Ke),et=e.getShaderInfoLog(Ke),zr(Nr("fragmentShader: %s"))(et),tt=e.createProgram(),e.attachShader(tt,Xe),e.attachShader(tt,Ke),e.linkProgram(tt),nt=e.getProgramInfoLog(tt),zr(Nr("program: %s"))(nt),e.detachShader(tt,Xe),e.deleteShader(Xe),e.detachShader(tt,Ke),e.deleteShader(Ke),e.useProgram(tt),rt=nu(new Array(8),0,8,null),ot=e.getAttribLocation(tt,"vertexBuffer"),rt[0]=ot,ut=e.getAttribLocation(tt,"textureCoord"),rt[1]=ut,st=e.getAttribLocation(tt,"position"),rt[2]=st,ct=e.getAttribLocation(tt,"textureSlicePosition"),rt[3]=ct,ft=e.getUniformLocation(tt,"iResolution"),rt[4]=ft,lt=e.getUniformLocation(tt,"colorTexture"),rt[5]=lt,dt=e.getUniformLocation(tt,"colorTextureSize"),rt[6]=dt,ht=e.getUniformLocation(tt,"alpha"),rt[7]=ht,vt=e.createShader(e.VERTEX_SHADER),e.shaderSource(vt,"#version 300 es\r\n    precision mediump float;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec2 textureCoord;\r\n\r\n    in vec4 position;\r\n    in vec4 textureSlicePosition;\r\n\r\n    uniform vec2 iResolution;\r\n\r\n    out vec2 vTextureCoord;\r\n    out vec4 vTextureSlicePosition;\r\n    out vec2 vResolution;\r\n\r\n    void main() {\r\n        gl_Position =\r\n            vec4(-1.0 + (((2.0 * position.x) + (position.z * (vertexBuffer.x + 1.0))) / iResolution.x),\r\n                  1.0 - (((2.0 * position.y) - (position.w * (vertexBuffer.y - 1.0))) / iResolution.y),\r\n                  0.0,\r\n                  1.0);\r\n\r\n        vTextureCoord = textureCoord;\r\n        vResolution = iResolution;\r\n        vTextureSlicePosition = textureSlicePosition;\r\n    }"),e.compileShader(vt),gt=e.getShaderInfoLog(vt),zr(Nr("vertexShader: %s"))(gt),wt=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(wt,"#version 300 es\r\n    precision mediump float;\r\n\r\n    \r\n    uniform sampler2D colorTexture;\r\n    uniform vec2 colorTextureSize;\r\n\r\n    in vec2 vTextureCoord;\r\n    in vec2 vResolution;\r\n    in vec4 vTextureSlicePosition;\r\n\r\n    \r\n    vec4 textureColor(vec2 point, vec2 offset) {\r\n        float ox = (vTextureSlicePosition.x + offset.x) / colorTextureSize.x;\r\n        float oy = (vTextureSlicePosition.y + offset.y) / colorTextureSize.y;\r\n\r\n        float px = (vTextureSlicePosition.z / colorTextureSize.x) * point.x;\r\n        float py = (vTextureSlicePosition.w / colorTextureSize.y) * point.y;\r\n\r\n        float x = ox + px;\r\n        float y = oy + py;\r\n\r\n        return texture(colorTexture, vec2(x, y));\r\n    }\r\n\r\n\r\n    uniform vec4 color;\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        vec4 foundColor = textureColor(vTextureCoord, vec2(0.0));\r\n\r\n        if (foundColor.a > 0.0 &&\r\n            (textureColor(vTextureCoord, vec2(-1.0, 0.0)).a < 1.0 || textureColor(vTextureCoord, vec2(1.0, 0.0)).a < 1.0 ||\r\n             textureColor(vTextureCoord, vec2(0.0, -1.0)).a < 1.0 || textureColor(vTextureCoord, vec2(0.0, 1.0)).a < 1.0))\r\n        {\r\n            diffuseColor = color;\r\n        }\r\n        else \r\n        {\r\n            diffuseColor = vec4(0.0);\r\n        }\r\n    }\r\n"),e.compileShader(wt),pt=e.getShaderInfoLog(wt),zr(Nr("fragmentShader: %s"))(pt),mt=e.createProgram(),e.attachShader(mt,vt),e.attachShader(mt,wt),e.linkProgram(mt),xt=e.getProgramInfoLog(mt),zr(Nr("program: %s"))(xt),e.detachShader(mt,vt),e.deleteShader(vt),e.detachShader(mt,wt),e.deleteShader(wt),e.useProgram(mt),At=nu(new Array(8),0,8,null),St=e.getAttribLocation(mt,"vertexBuffer"),At[0]=St,bt=e.getAttribLocation(mt,"textureCoord"),At[1]=bt,yt=e.getAttribLocation(mt,"position"),At[2]=yt,Tt=e.getAttribLocation(mt,"textureSlicePosition"),At[3]=Tt,Et=e.getUniformLocation(mt,"iResolution"),At[4]=Et,Rt=e.getUniformLocation(mt,"colorTexture"),At[5]=Rt,Ct=e.getUniformLocation(mt,"colorTextureSize"),At[6]=Ct,Pt=e.getUniformLocation(mt,"color"),At[7]=Pt,Mt=e.createShader(e.VERTEX_SHADER),e.shaderSource(Mt,"#version 300 es\r\n    precision highp float;\r\n\r\n    uniform mat4 projection;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec2 textureBuffer;\r\n\r\n    in vec4 position;\r\n    in vec4 diffuseTextureSlice;\r\n    in vec4 heightMapTextureSlice;\r\n    in vec2 effect;\r\n\r\n    out vec2 diffuseTextureCoord;\r\n    out vec2 heightMapTextureCoord;\r\n    out vec2 screenPosition;\r\n    out vec2 currentEffect;\r\n\r\n    void main() {\r\n        screenPosition = (position.zw * vertexBuffer) + position.xy;\r\n        diffuseTextureCoord = (diffuseTextureSlice.zw * textureBuffer) + diffuseTextureSlice.xy;\r\n        heightMapTextureCoord = (heightMapTextureSlice.zw * textureBuffer) + heightMapTextureSlice.xy;\r\n\r\n        gl_Position = vec4(screenPosition, 0.0, 1.0) * projection;\r\n        currentEffect = effect;\r\n    }"),e.compileShader(Mt),Ft=e.getShaderInfoLog(Mt),zr(Nr("vertexShader: %s"))(Ft),Bt=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(Bt,"#version 300 es\r\n    precision highp float;\r\n    \r\n    in vec2 diffuseTextureCoord;\r\n    in vec2 heightMapTextureCoord;\r\n    in vec2 screenPosition;\r\n    in vec2 currentEffect;\r\n\r\n    uniform float time;\r\n        \r\n    uniform sampler2D diffuseTexture;\r\n    uniform sampler2D heightMapTexture;\r\n\r\n    \r\n    const float devide256 = 0.00390625;\r\n\r\n    vec2 pack (float value) {\r\n        float v = floor(value);\r\n        float y = mod(v, 256.0);\r\n        float x = v - y;\r\n        return vec2(x / 255.0 / 255.0, y / 255.0);\r\n    }\r\n\r\n    float unpack (vec2 color) {\r\n        return floor((color.x * 255.0 * 255.0) + (color.y * 255.0));\r\n    }\r\n\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n    layout(location = 1) out vec4 locationColor;\r\n    layout(location = 2) out vec4 locationStaticColor;\r\n\r\n    \r\n    vec2 hash(vec2 p) {                       \r\n        p = vec2( dot(p,vec2(127.1,311.7)),\r\n                  dot(p,vec2(269.5,183.3)) );\r\n        return -1. + 2.*fract(sin(p+20.)*53758.5453123);\r\n    }\r\n\r\n    float noise(vec2 p) {\r\n        vec2 i = floor((p)), f = fract((p));\r\n        vec2 u = f*f*(3.-2.*f);\r\n        return mix( mix( dot( hash( i + vec2(0.,0.) ), f - vec2(0.,0.) ), \r\n                         dot( hash( i + vec2(1.,0.) ), f - vec2(1.,0.) ), u.x),\r\n                    mix( dot( hash( i + vec2(0.,1.) ), f - vec2(0.,1.) ), \r\n                         dot( hash( i + vec2(1.,1.) ), f - vec2(1.,1.) ), u.x), u.y);\r\n    }\r\n\r\n\r\n    void main(void) {\r\n        vec4 heightMapColor = texture(heightMapTexture, heightMapTextureCoord);\r\n        float f = floor(screenPosition.y + (heightMapColor.r * 255.0));\r\n        vec2 c = pack(f);\r\n\r\n        if (currentEffect.x == 1.0) { \r\n            float n1 = noise((diffuseTextureCoord*5.8) - (time * 0.3));\r\n            vec2 point = vec2(\r\n                diffuseTextureCoord.x + (n1*.002),\r\n                diffuseTextureCoord.y\r\n            );\r\n\r\n            diffuseColor = texture(diffuseTexture, point);\r\n            locationColor = vec4(c.x, c.y, heightMapColor.r, diffuseColor.a);\r\n            locationStaticColor = vec4(0.0);\r\n        }\r\n        else if (currentEffect.x == 2.0) { \r\n            float speed = mix(3.0, 3.001, currentEffect.y);\r\n            vec2 point = vec2(\r\n                ((sin((diffuseTextureCoord.y * 10.00) + (time * speed) + (currentEffect.y * 0.1)) * 0.0006)\r\n                 * (heightMapColor.r * 10.0)\r\n                 )\r\n                \r\n                  + diffuseTextureCoord.x,\r\n                diffuseTextureCoord.y\r\n            );\r\n\r\n            diffuseColor = texture(diffuseTexture, point);\r\n            locationColor = vec4(c.x, c.y, heightMapColor.r, diffuseColor.a);\r\n            locationStaticColor = vec4(0.0);\r\n        } else {\r\n            diffuseColor = texture(diffuseTexture, diffuseTextureCoord);\r\n            locationColor = vec4(c.x, c.y, heightMapColor.r, diffuseColor.a);\r\n            locationStaticColor = locationColor;\r\n        }\r\n    }\r\n"),e.compileShader(Bt),Dt=e.getShaderInfoLog(Bt),zr(Nr("fragmentShader: %s"))(Dt),Lt=e.createProgram(),e.attachShader(Lt,Mt),e.attachShader(Lt,Bt),e.linkProgram(Lt),_t=e.getProgramInfoLog(Lt),zr(Nr("program: %s"))(_t),e.detachShader(Lt,Mt),e.deleteShader(Mt),e.detachShader(Lt,Bt),e.deleteShader(Bt),e.useProgram(Lt),Ot=nu(new Array(10),0,10,null),Ut=e.getUniformLocation(Lt,"projection"),Ot[0]=Ut,It=e.getAttribLocation(Lt,"vertexBuffer"),Ot[1]=It,kt=e.getAttribLocation(Lt,"textureBuffer"),Ot[2]=kt,Nt=e.getAttribLocation(Lt,"position"),Ot[3]=Nt,zt=e.getAttribLocation(Lt,"diffuseTextureSlice"),Ot[4]=zt,Vt=e.getAttribLocation(Lt,"heightMapTextureSlice"),Ot[5]=Vt,Ht=e.getAttribLocation(Lt,"effect"),Ot[6]=Ht,jt=e.getUniformLocation(Lt,"time"),Ot[7]=jt,Wt=e.getUniformLocation(Lt,"diffuseTexture"),Ot[8]=Wt,Yt=e.getUniformLocation(Lt,"heightMapTexture"),Ot[9]=Yt,[Lt,Ot,e]),yi=(Xt=e.createShader(e.VERTEX_SHADER),e.shaderSource(Xt,"#version 300 es\r\n    precision lowp float;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec2 textureCoord;\r\n\r\n    out vec2 vTextureCoord;\r\n\r\n    void main() {\r\n        gl_Position = vec4(vertexBuffer.xy, 0.0, 1.0);\r\n        vTextureCoord = textureCoord;\r\n    }"),e.compileShader(Xt),Gt=e.getShaderInfoLog(Xt),zr(Nr("vertexShader: %s"))(Gt),qt=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(qt,"#version 300 es\r\n    precision lowp float;\r\n    \r\n    in vec2 vTextureCoord;\r\n\r\n    uniform sampler2D colorTexture;\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        diffuseColor = texture(colorTexture, vTextureCoord);\r\n    }\r\n"),e.compileShader(qt),$t=e.getShaderInfoLog(qt),zr(Nr("fragmentShader: %s"))($t),Zt=e.createProgram(),e.attachShader(Zt,Xt),e.attachShader(Zt,qt),e.linkProgram(Zt),Jt=e.getProgramInfoLog(Zt),zr(Nr("program: %s"))(Jt),e.detachShader(Zt,Xt),e.deleteShader(Xt),e.detachShader(Zt,qt),e.deleteShader(qt),e.useProgram(Zt),Kt=nu(new Array(3),0,3,null),Qt=e.getAttribLocation(Zt,"vertexBuffer"),Kt[0]=Qt,en=e.getAttribLocation(Zt,"textureCoord"),Kt[1]=en,tn=e.getUniformLocation(Zt,"colorTexture"),Kt[2]=tn,[Zt,Kt,e]),Ti=(nn=e.createShader(e.VERTEX_SHADER),e.shaderSource(nn,"#version 300 es\r\n    precision highp float;\r\n\r\n    uniform mat4 projection;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec2 textureBuffer;\r\n    in vec4 flakes;\r\n\r\n    uniform vec2 resolution;\r\n    uniform vec2 size;\r\n    uniform float time;\r\n    uniform vec2 offset;\r\n\r\n    const vec2 distMin = vec2(0.005);\r\n    const vec2 distMax = vec2(0.01);\r\n\r\n    const vec2 sizeMin = vec2(1.0);\r\n    const vec2 sizeMax = vec2(1.4);\r\n\r\n    out vec2 diffuseTextureCoord;\r\n\r\n    out float height;\r\n    out float wave;\r\n    out vec2 worldTextureCoord;\r\n    out float waveOffset;\r\n\r\n    void main() {\r\n        vec2 timeOffset = vec2(time, time * 0.01);\r\n        vec2 dist = mix(distMin, distMax, flakes.w);\r\n\r\n        vec2 size2 = mix(sizeMin, sizeMax, flakes.w) * size;\r\n        vec2 pos = fract((dist * timeOffset) + flakes.xy + (offset / (resolution + size2)));\r\n\r\n        vec4 position = \r\n            vec4(\r\n                 (pos * (resolution + size2)) - (size2),\r\n                 size2);\r\n\r\n        vec2 screenPosition = (position.zw * vertexBuffer) + position.xy;\r\n\r\n        waveOffset = screenPosition.x - offset.x;\r\n\r\n        worldTextureCoord = \r\n            vec2(screenPosition.x / resolution.x,\r\n                 1.0 - (screenPosition.y / resolution.y));\r\n\r\n        diffuseTextureCoord = textureBuffer;\r\n\r\n        height = mix(0.01, 0.01, flakes.z);\r\n        wave = mix(0.01, 0.1, flakes.w);\r\n\r\n        gl_Position = vec4(screenPosition, 0.0, 1.0) * projection;\r\n    }\r\n\r\n"),e.compileShader(nn),rn=e.getShaderInfoLog(nn),zr(Nr("vertexShader: %s"))(rn),on=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(on,"#version 300 es\r\n    precision highp float;\r\n    \r\n    in vec2 diffuseTextureCoord;\r\n\r\n    in float height;\r\n    in float wave;\r\n    in vec2 worldTextureCoord;\r\n    in float waveOffset;\r\n\r\n    uniform sampler2D diffuseTexture;\r\n    uniform sampler2D depthTexture;\r\n    uniform vec3 fogColor;\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        vec4 depthColor = texture(depthTexture, worldTextureCoord);\r\n        float depth = depthColor.z;\r\n\r\n        vec2 point = \r\n            vec2(diffuseTextureCoord.x,\r\n                 (sin(waveOffset * wave) * 0.04) + diffuseTextureCoord.y);\r\n\r\n        vec4 mainColor = texture(diffuseTexture, point);\r\n\r\n        float a = (50.0 * min(height - depth, 0.0)) + 1.0;\r\n\r\n        diffuseColor = vec4(fogColor, (mainColor.r * a * 0.3 * depthColor.a));\r\n    }\r\n\r\n"),e.compileShader(on),un=e.getShaderInfoLog(on),zr(Nr("fragmentShader: %s"))(un),sn=e.createProgram(),e.attachShader(sn,nn),e.attachShader(sn,on),e.linkProgram(sn),an=e.getProgramInfoLog(sn),zr(Nr("program: %s"))(an),e.detachShader(sn,nn),e.deleteShader(nn),e.detachShader(sn,on),e.deleteShader(on),e.useProgram(sn),cn=nu(new Array(11),0,11,null),fn=e.getUniformLocation(sn,"projection"),cn[0]=fn,ln=e.getAttribLocation(sn,"vertexBuffer"),cn[1]=ln,dn=e.getAttribLocation(sn,"textureBuffer"),cn[2]=dn,hn=e.getAttribLocation(sn,"flakes"),cn[3]=hn,vn=e.getUniformLocation(sn,"resolution"),cn[4]=vn,gn=e.getUniformLocation(sn,"size"),cn[5]=gn,wn=e.getUniformLocation(sn,"time"),cn[6]=wn,pn=e.getUniformLocation(sn,"offset"),cn[7]=pn,mn=e.getUniformLocation(sn,"diffuseTexture"),cn[8]=mn,xn=e.getUniformLocation(sn,"depthTexture"),cn[9]=xn,An=e.getUniformLocation(sn,"fogColor"),cn[10]=An,[sn,cn,e]),Ri=(Sn=e.createShader(e.VERTEX_SHADER),e.shaderSource(Sn,"#version 300 es\r\n    precision highp float;\r\n\r\n    uniform mat4 projection;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec4 flakes;\r\n    \r\n    uniform vec2 resolution;\r\n    uniform float time;\r\n    uniform vec2 offset;\r\n    uniform sampler2D depthStaticTexture;\r\n\r\n    const vec2 distMin = vec2(0.005);\r\n    const vec2 distMax = vec2(0.01);\r\n\r\n    const vec2 size = vec2(2.0);\r\n    const vec2 sizeMin = vec2(1.0);\r\n    const vec2 sizeMax = vec2(1.4);\r\n\r\n    out float alpha;\r\n    out vec2 worldTextureCoord;\r\n    out float depth;\r\n\r\n    \r\n    const float devide256 = 0.00390625;\r\n\r\n    vec2 pack (float value) {\r\n        float v = floor(value);\r\n        float y = mod(v, 256.0);\r\n        float x = v - y;\r\n        return vec2(x / 255.0 / 255.0, y / 255.0);\r\n    }\r\n\r\n    float unpack (vec2 color) {\r\n        return floor((color.x * 255.0 * 255.0) + (color.y * 255.0));\r\n    }\r\n\r\n    \r\n    void main() {\r\n        float timeOffset = fract((time * mix(0.02, 0.04, flakes.w)) + flakes.z);\r\n        alpha = min(1.0, mix(2.0, 0.0, timeOffset));\r\n\r\n        vec2 size = vec2(round(mix(1.0, 3.0, flakes.w))) * vec2(mix(1.5, 1.0, alpha), alpha);\r\n\r\n        //vec2 timeOffset = vec2(0.0, time);\r\n        //vec2 dist = mix(distMin, distMax, flakes.w);\r\n\r\n        vec2 size2 = size;\r\n        vec2 pos = fract(flakes.xy + (offset / (resolution + size2)));\r\n\r\n        vec4 position = \r\n            vec4(\r\n                 (pos * (resolution + size2)) - (size2),\r\n                 size2);\r\n\r\n        float maxHeight = 0.0;\r\n\r\n        vec2 pinnedScreenPosition = position.zw + position.xy;\r\n        vec2 diffuseTextureCoord = vec2(pinnedScreenPosition.x / resolution.x, 1.0 - (pinnedScreenPosition.y / resolution.y));\r\n\r\n        vec4 baseColor = texture(depthStaticTexture, diffuseTextureCoord); \r\n        \r\n        vec4 color = baseColor;\r\n\r\n        for(int i=0;i<255;i++){\r\n            diffuseTextureCoord += vec2(0.0, 1.0 / resolution.y);\r\n\r\n            vec4 found = texture(depthStaticTexture, diffuseTextureCoord); \r\n            \r\n            if (found.xy == baseColor.xy) {\r\n                color = found;\r\n            }\r\n        }\r\n\r\n        vec2 screenPosition = (position.zw * vertexBuffer) + position.xy;\r\n        screenPosition.y -= (color.b - baseColor.b) * 255.0;\r\n\r\n\r\n        timeOffset = min(1.0, mix(0.0, 2.0, timeOffset));\r\n\r\n        screenPosition.x += sin(timeOffset * mix(20.0, 40.0, flakes.z)) * 5.0;\r\n        screenPosition.y -= (1.0 - timeOffset) * resolution.y;\r\n\r\n        worldTextureCoord = \r\n            vec2(screenPosition.x / resolution.x,\r\n                 1.0 - (screenPosition.y / resolution.y));\r\n\r\n        depth = unpack(color.xy);\r\n\r\n        gl_Position = vec4(screenPosition, 0.0, 1.0) * projection;\r\n    }\r\n\r\n"),e.compileShader(Sn),bn=e.getShaderInfoLog(Sn),zr(Nr("vertexShader: %s"))(bn),yn=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(yn,"#version 300 es\r\n    precision highp float;\r\n\r\n    in float alpha;\r\n    in vec2 worldTextureCoord;\r\n    in float depth;\r\n\r\n    uniform sampler2D depthTexture;\r\n\r\n    \r\n    const float devide256 = 0.00390625;\r\n\r\n    vec2 pack (float value) {\r\n        float v = floor(value);\r\n        float y = mod(v, 256.0);\r\n        float x = v - y;\r\n        return vec2(x / 255.0 / 255.0, y / 255.0);\r\n    }\r\n\r\n    float unpack (vec2 color) {\r\n        return floor((color.x * 255.0 * 255.0) + (color.y * 255.0));\r\n    }\r\n\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        vec4 depthColor = texture(depthTexture, worldTextureCoord);\r\n        float worldDepth = unpack(depthColor.xy);\r\n        float a = alpha;\r\n\r\n        if (worldDepth > depth)\r\n        {\r\n            a = 0.0;\r\n        }\r\n\r\n        diffuseColor = vec4(1.0, 1.0, 1.0, a * depthColor.a);\r\n    }\r\n"),e.compileShader(yn),Tn=e.getShaderInfoLog(yn),zr(Nr("fragmentShader: %s"))(Tn),En=e.createProgram(),e.attachShader(En,Sn),e.attachShader(En,yn),e.linkProgram(En),Rn=e.getProgramInfoLog(En),zr(Nr("program: %s"))(Rn),e.detachShader(En,Sn),e.deleteShader(Sn),e.detachShader(En,yn),e.deleteShader(yn),e.useProgram(En),Cn=nu(new Array(8),0,8,null),Pn=e.getUniformLocation(En,"projection"),Cn[0]=Pn,Mn=e.getAttribLocation(En,"vertexBuffer"),Cn[1]=Mn,Fn=e.getAttribLocation(En,"flakes"),Cn[2]=Fn,Bn=e.getUniformLocation(En,"resolution"),Cn[3]=Bn,Dn=e.getUniformLocation(En,"time"),Cn[4]=Dn,Ln=e.getUniformLocation(En,"offset"),Cn[5]=Ln,_n=e.getUniformLocation(En,"depthStaticTexture"),Cn[6]=_n,On=e.getUniformLocation(En,"depthTexture"),Cn[7]=On,[En,Cn,e]);zr(Nr("here"));const Ci=(Un=e.createShader(e.VERTEX_SHADER),e.shaderSource(Un,"#version 300 es\r\n    precision highp float;\r\n\r\n    in vec2 vertexBuffer;\r\n    out vec2 point;\r\n    \r\n    void main() {\r\n        point = (vertexBuffer + vec2(1.0)) / 2.0;\r\n        gl_Position = vec4(vertexBuffer, 0.0, 1.0);\r\n    }\r\n"),e.compileShader(Un),In=e.getShaderInfoLog(Un),zr(Nr("vertexShader: %s"))(In),kn=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(kn,"#version 300 es\r\n    precision lowp float;\r\n    \r\n    in vec2 point;\r\n\r\n    uniform sampler2D diffuseTexture;\r\n    uniform sampler2D depthTexture;\r\n    uniform vec2 resolution;\r\n    uniform float time;\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    #define total 32\r\n    #define ftotal 32.0\r\n\r\n    void main(void) {\r\n        vec4 baseDepthColor = texture(depthTexture, point);\r\n        diffuseColor = vec4(0.0);\r\n\r\n        if (baseDepthColor.z == 0.0) {\r\n            for(int i=1; i <= total; i++) {\r\n\r\n                float fi = float(i);\r\n                vec2 textureCoord = point + vec2((sin((fi + (time * 10.0) )) * 0.6) / resolution.x, (fi * 2.0) / resolution.y);\r\n                vec4 foundDepth = texture(depthTexture, textureCoord); \r\n                float diff = (foundDepth.z * 255.0) - fi;\r\n\r\n                if (diff > -0.5 && diff < 1.5) {\r\n                    diffuseColor =\r\n                        vec4(\r\n                            texture(diffuseTexture, textureCoord).rgb, \r\n                            ((ftotal - fi) / ftotal) * 0.2\r\n                        );\r\n\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n"),e.compileShader(kn),Nn=e.getShaderInfoLog(kn),zr(Nr("fragmentShader: %s"))(Nn),zn=e.createProgram(),e.attachShader(zn,Un),e.attachShader(zn,kn),e.linkProgram(zn),Vn=e.getProgramInfoLog(zn),zr(Nr("program: %s"))(Vn),e.detachShader(zn,Un),e.deleteShader(Un),e.detachShader(zn,kn),e.deleteShader(kn),e.useProgram(zn),Hn=nu(new Array(5),0,5,null),jn=e.getAttribLocation(zn,"vertexBuffer"),Hn[0]=jn,Wn=e.getUniformLocation(zn,"diffuseTexture"),Hn[1]=Wn,Yn=e.getUniformLocation(zn,"depthTexture"),Hn[2]=Yn,Xn=e.getUniformLocation(zn,"resolution"),Hn[3]=Xn,Gn=e.getUniformLocation(zn,"time"),Hn[4]=Gn,[zn,Hn,e]),Pi=(qn=e.createShader(e.VERTEX_SHADER),e.shaderSource(qn,"#version 300 es\r\n    precision highp float;\r\n\r\n    uniform mat4 projection;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec4 flakes;\r\n    \r\n    uniform vec2 resolution;\r\n    uniform vec2 offset;\r\n    uniform float time;\r\n    \r\n    out vec2 worldTextureCoord;\r\n    out vec2 point;\r\n    out float alpha;\r\n\r\n    \r\n    void main() {\r\n        float s = 16.0;\r\n        float p = fract((time * 1.0) + flakes.z);\r\n\r\n        vec2 size = vec2(s, s * 0.75) * mix(0.0, 1.0, p);\r\n        size = floor(size);\r\n\r\n        alpha = mix(0.3, 0.0, p);\r\n\r\n\r\n        vec2 pos = fract(flakes.xy + (offset / (resolution)));\r\n\r\n        vec4 position = \r\n            vec4(\r\n                 (pos * resolution) - (size / 2.0),\r\n                 size);\r\n\r\n        vec2 screenPosition = (position.zw * vertexBuffer) + position.xy;\r\n\r\n        worldTextureCoord = \r\n            vec2(screenPosition.x / resolution.x,\r\n                 1.0 - (screenPosition.y / resolution.y));\r\n\r\n        point = vertexBuffer;\r\n\r\n        gl_Position = vec4(screenPosition, 0.0, 1.0) * projection;\r\n\r\n    }\r\n"),e.compileShader(qn),$n=e.getShaderInfoLog(qn),zr(Nr("vertexShader: %s"))($n),Zn=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(Zn,"#version 300 es\r\n    precision highp float;\r\n    \r\n    in vec2 worldTextureCoord;\r\n    in vec2 point;\r\n    in float alpha;\r\n\r\n    uniform sampler2D depthTexture;\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        diffuseColor = vec4(0.0);\r\n        vec4 baseDepthColor = texture(depthTexture, worldTextureCoord);\r\n        float radius = (length(point - vec2(0.5)) / 2.0) * 4.0;\r\n        \r\n        if (baseDepthColor.z == 0.0 && radius <= 1.0) {\r\n            if (radius >= 0.6) {\r\n                diffuseColor = vec4(0.0, 0.0, 0.0, alpha);\r\n            } else if (radius >= 0.4) {\r\n                diffuseColor = vec4(1.0, 1.0, 1.0, alpha * baseDepthColor.a);\r\n            }\r\n        }\r\n    \r\n    }\r\n"),e.compileShader(Zn),Jn=e.getShaderInfoLog(Zn),zr(Nr("fragmentShader: %s"))(Jn),Kn=e.createProgram(),e.attachShader(Kn,qn),e.attachShader(Kn,Zn),e.linkProgram(Kn),Qn=e.getProgramInfoLog(Kn),zr(Nr("program: %s"))(Qn),e.detachShader(Kn,qn),e.deleteShader(qn),e.detachShader(Kn,Zn),e.deleteShader(Zn),e.useProgram(Kn),er=nu(new Array(7),0,7,null),tr=e.getUniformLocation(Kn,"projection"),er[0]=tr,nr=e.getAttribLocation(Kn,"vertexBuffer"),er[1]=nr,rr=e.getAttribLocation(Kn,"flakes"),er[2]=rr,or=e.getUniformLocation(Kn,"resolution"),er[3]=or,ir=e.getUniformLocation(Kn,"offset"),er[4]=ir,ar=e.getUniformLocation(Kn,"time"),er[5]=ar,cr=e.getUniformLocation(Kn,"depthTexture"),er[6]=cr,[Kn,er,e]),Mi=(fr=e.createShader(e.VERTEX_SHADER),e.shaderSource(fr,"#version 300 es\r\n    precision highp float;\r\n\r\n    uniform mat4 projection;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec4 flakes;\r\n    \r\n    uniform vec2 resolution;\r\n    uniform float time;\r\n    uniform vec2 offset;\r\n    uniform sampler2D depthStaticTexture;\r\n\r\n    const vec2 distMin = vec2(0.005);\r\n    const vec2 distMax = vec2(0.01);\r\n\r\n    const vec2 size = vec2(2.0);\r\n    const vec2 sizeMin = vec2(1.0);\r\n    const vec2 sizeMax = vec2(1.4);\r\n\r\n    out vec2 worldTextureCoord;\r\n    out float depth;\r\n    out vec4 rainColor;\r\n\r\n    \r\n    const float devide256 = 0.00390625;\r\n\r\n    vec2 pack (float value) {\r\n        float v = floor(value);\r\n        float y = mod(v, 256.0);\r\n        float x = v - y;\r\n        return vec2(x / 255.0 / 255.0, y / 255.0);\r\n    }\r\n\r\n    float unpack (vec2 color) {\r\n        return floor((color.x * 255.0 * 255.0) + (color.y * 255.0));\r\n    }\r\n\r\n    \r\n    void main() {\r\n        float timeOffset = fract((time * mix(1.2, 1.4, flakes.w)) + flakes.z);\r\n        float a = mix(0.0, 0.4, vertexBuffer.y);\r\n        rainColor = vec4(0.8, 0.8, 1.0, a);\r\n\r\n        float s = mix(16.0, 64.0, flakes.w);\r\n\r\n        vec2 size = vec2(1.0, s);\r\n\r\n        vec2 size2 = size;\r\n        vec2 pos = fract(flakes.xy + (offset / (resolution + size2)));\r\n\r\n        vec4 position = \r\n            vec4(\r\n                 (pos * (resolution + size2)) - (size2),\r\n                 size2);\r\n\r\n        float maxHeight = 0.0;\r\n\r\n        vec2 pinnedScreenPosition = position.zw + position.xy;\r\n        vec2 diffuseTextureCoord = vec2(pinnedScreenPosition.x / resolution.x, 1.0 - (pinnedScreenPosition.y / resolution.y));\r\n        vec4 color = texture(depthStaticTexture, diffuseTextureCoord); \r\n        \r\n\r\n        vec2 screenPosition = (position.zw * vertexBuffer) + position.xy;\r\n        \r\n        float angle = (vertexBuffer.y) * mix(-(s / 8.0), (s / 8.0), flakes.w);\r\n        float shift = mix(-(s * 1.2), (s * 1.2), flakes.w);\r\n\r\n        screenPosition.x += ((timeOffset) * shift) + (angle);\r\n        screenPosition.y -= (1.0 - timeOffset) * resolution.y;\r\n\r\n        worldTextureCoord = \r\n            vec2(screenPosition.x / resolution.x,\r\n                 1.0 - (screenPosition.y / resolution.y));\r\n\r\n        depth = unpack(color.xy);\r\n\r\n        gl_Position = vec4(screenPosition, 0.0, 1.0) * projection;\r\n    }\r\n\r\n"),e.compileShader(fr),lr=e.getShaderInfoLog(fr),zr(Nr("vertexShader: %s"))(lr),hr=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(hr,"#version 300 es\r\n    precision highp float;\r\n\r\n    in vec2 worldTextureCoord;\r\n    in float depth;\r\n    in vec4 rainColor;\r\n\r\n    uniform sampler2D depthTexture;\r\n\r\n    \r\n    const float devide256 = 0.00390625;\r\n\r\n    vec2 pack (float value) {\r\n        float v = floor(value);\r\n        float y = mod(v, 256.0);\r\n        float x = v - y;\r\n        return vec2(x / 255.0 / 255.0, y / 255.0);\r\n    }\r\n\r\n    float unpack (vec2 color) {\r\n        return floor((color.x * 255.0 * 255.0) + (color.y * 255.0));\r\n    }\r\n\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        vec4 depthColor = texture(depthTexture, worldTextureCoord);\r\n        float worldDepth = unpack(depthColor.xy);\r\n        float a = rainColor.a;\r\n\r\n        if (worldDepth > depth)\r\n        {\r\n            a = 0.0;\r\n        }\r\n\r\n        diffuseColor = vec4(rainColor.rgb, a * depthColor.a);\r\n    }\r\n"),e.compileShader(hr),vr=e.getShaderInfoLog(hr),zr(Nr("fragmentShader: %s"))(vr),gr=e.createProgram(),e.attachShader(gr,fr),e.attachShader(gr,hr),e.linkProgram(gr),wr=e.getProgramInfoLog(gr),zr(Nr("program: %s"))(wr),e.detachShader(gr,fr),e.deleteShader(fr),e.detachShader(gr,hr),e.deleteShader(hr),e.useProgram(gr),pr=nu(new Array(8),0,8,null),mr=e.getUniformLocation(gr,"projection"),pr[0]=mr,xr=e.getAttribLocation(gr,"vertexBuffer"),pr[1]=xr,Ar=e.getAttribLocation(gr,"flakes"),pr[2]=Ar,Sr=e.getUniformLocation(gr,"resolution"),pr[3]=Sr,br=e.getUniformLocation(gr,"time"),pr[4]=br,yr=e.getUniformLocation(gr,"offset"),pr[5]=yr,Tr=e.getUniformLocation(gr,"depthStaticTexture"),pr[6]=Tr,Er=e.getUniformLocation(gr,"depthTexture"),pr[7]=Er,[gr,pr,e]),Fi=(Rr=e.createShader(e.VERTEX_SHADER),e.shaderSource(Rr,"#version 300 es\r\n    precision highp float;\r\n\r\n    uniform mat4 projection;\r\n    uniform vec2 resolution;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec2 textureBuffer;\r\n\r\n    in vec4 position;\r\n    in vec4 diffuseTextureSlice;\r\n    in vec4 heightMapTextureSlice;\r\n\r\n    out vec2 diffuseTextureCoord;\r\n    out vec2 heightMapTextureCoord;\r\n    out vec2 screenPosition;\r\n    out vec2 worldTextureCoord;\r\n\r\n    void main() {\r\n        screenPosition = (position.zw * vertexBuffer) + position.xy;\r\n        diffuseTextureCoord = (diffuseTextureSlice.zw * textureBuffer) + diffuseTextureSlice.xy;\r\n        heightMapTextureCoord = (heightMapTextureSlice.zw * textureBuffer) + heightMapTextureSlice.xy;\r\n\r\n        worldTextureCoord = \r\n            vec2(screenPosition.x / resolution.x,\r\n                 1.0 - (screenPosition.y / resolution.y));\r\n\r\n        gl_Position = vec4(screenPosition, 0.0, 1.0) * projection;\r\n    }"),e.compileShader(Rr),Cr=e.getShaderInfoLog(Rr),zr(Nr("vertexShader: %s"))(Cr),Pr=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(Pr,"#version 300 es\r\n    precision highp float;\r\n    \r\n    in vec2 diffuseTextureCoord;\r\n    in vec2 heightMapTextureCoord;\r\n    in vec2 screenPosition;\r\n    in vec2 worldTextureCoord;\r\n\r\n    uniform sampler2D diffuseTexture;\r\n    uniform sampler2D heightMapTexture;\r\n    uniform sampler2D depthTexture;\r\n\r\n    \r\n    const float devide256 = 0.00390625;\r\n\r\n    vec2 pack (float value) {\r\n        float v = floor(value);\r\n        float y = mod(v, 256.0);\r\n        float x = v - y;\r\n        return vec2(x / 255.0 / 255.0, y / 255.0);\r\n    }\r\n\r\n    float unpack (vec2 color) {\r\n        return floor((color.x * 255.0 * 255.0) + (color.y * 255.0));\r\n    }\r\n\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n    layout(location = 1) out vec4 locationColor;\r\n    layout(location = 2) out vec4 locationStaticColor;\r\n\r\n    void main(void) {\r\n        diffuseColor = texture(diffuseTexture, diffuseTextureCoord);\r\n        locationColor = vec4(0.0);\r\n        locationStaticColor = vec4(0.0);\r\n\r\n        if (diffuseColor.a > 0.0) \r\n        {\r\n            vec4 depthColor = texture(depthTexture, worldTextureCoord);\r\n            float worldDepth = unpack(depthColor.xy);\r\n        \r\n            vec4 heightMapColor = texture(heightMapTexture, heightMapTextureCoord);\r\n            float a = screenPosition.y;\r\n            float b = heightMapColor.r * 255.0;\r\n            float d = a + b;\r\n\r\n            vec2 c = pack(d);\r\n\r\n            locationColor = vec4(c.x, c.y, heightMapColor.r, diffuseColor.a);\r\n\r\n            if (worldDepth > d) {\r\n                if (heightMapColor.r > 15.0 / 255.0){\r\n                    diffuseColor = vec4(0.0, 0.0, 0.0, 0.5);\r\n                } else {\r\n                    diffuseColor = vec4(0.0, 0.0, 0.0, 0.0);\r\n                }\r\n            \r\n                locationColor.a = 0.0;\r\n            }\r\n        }\r\n    }\r\n"),e.compileShader(Pr),Mr=e.getShaderInfoLog(Pr),zr(Nr("fragmentShader: %s"))(Mr),Fr=e.createProgram(),e.attachShader(Fr,Rr),e.attachShader(Fr,Pr),e.linkProgram(Fr),Br=e.getProgramInfoLog(Fr),zr(Nr("program: %s"))(Br),e.detachShader(Fr,Rr),e.deleteShader(Rr),e.detachShader(Fr,Pr),e.deleteShader(Pr),e.useProgram(Fr),Dr=nu(new Array(10),0,10,null),Lr=e.getUniformLocation(Fr,"projection"),Dr[0]=Lr,_r=e.getUniformLocation(Fr,"resolution"),Dr[1]=_r,Or=e.getAttribLocation(Fr,"vertexBuffer"),Dr[2]=Or,Ur=e.getAttribLocation(Fr,"textureBuffer"),Dr[3]=Ur,Ir=e.getAttribLocation(Fr,"position"),Dr[4]=Ir,kr=e.getAttribLocation(Fr,"diffuseTextureSlice"),Dr[5]=kr,Vr=e.getAttribLocation(Fr,"heightMapTextureSlice"),Dr[6]=Vr,Hr=e.getUniformLocation(Fr,"diffuseTexture"),Dr[7]=Hr,jr=e.getUniformLocation(Fr,"heightMapTexture"),Dr[8]=jr,Wr=e.getUniformLocation(Fr,"depthTexture"),Dr[9]=Wr,[Fr,Dr,e]),Bi=(Yr=e.createShader(e.VERTEX_SHADER),e.shaderSource(Yr,"#version 300 es\r\n    precision highp float;\r\n\r\n    uniform mat4 projection;\r\n\r\n    in vec2 vertexBuffer;\r\n    in vec2 textureBuffer;\r\n\r\n    in vec4 position;\r\n    in vec4 diffuseTextureSlice;\r\n\r\n    out vec2 diffuseTextureCoord;\r\n\r\n    void main() {\r\n        vec2 screenPosition = (position.zw * vertexBuffer) + position.xy;\r\n        diffuseTextureCoord = (diffuseTextureSlice.zw * textureBuffer) + diffuseTextureSlice.xy;\r\n\r\n        gl_Position = vec4(screenPosition, 0.0, 1.0) * projection;\r\n    }"),e.compileShader(Yr),Xr=e.getShaderInfoLog(Yr),zr(Nr("vertexShader: %s"))(Xr),Gr=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(Gr,"#version 300 es\r\n    precision highp float;\r\n    \r\n    in vec2 diffuseTextureCoord;\r\n\r\n    uniform sampler2D diffuseTexture;\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        diffuseColor = texture(diffuseTexture, diffuseTextureCoord);\r\n    }\r\n"),e.compileShader(Gr),qr=e.getShaderInfoLog(Gr),zr(Nr("fragmentShader: %s"))(qr),$r=e.createProgram(),e.attachShader($r,Yr),e.attachShader($r,Gr),e.linkProgram($r),Zr=e.getProgramInfoLog($r),zr(Nr("program: %s"))(Zr),e.detachShader($r,Yr),e.deleteShader(Yr),e.detachShader($r,Gr),e.deleteShader(Gr),e.useProgram($r),Jr=nu(new Array(6),0,6,null),Kr=e.getUniformLocation($r,"projection"),Jr[0]=Kr,Qr=e.getAttribLocation($r,"vertexBuffer"),Jr[1]=Qr,eo=e.getAttribLocation($r,"textureBuffer"),Jr[2]=eo,to=e.getAttribLocation($r,"position"),Jr[3]=to,no=e.getAttribLocation($r,"diffuseTextureSlice"),Jr[4]=no,ro=e.getUniformLocation($r,"diffuseTexture"),Jr[5]=ro,[$r,Jr,e]),Di=(io=e.createShader(e.VERTEX_SHADER),e.shaderSource(io,"#version 300 es\r\n    precision highp float;\r\n\r\n    in vec2 vertexBuffer;\r\n\r\n    uniform vec2 resolution;\r\n    uniform mat4 projection;\r\n    uniform float time;\r\n    uniform vec2 point;\r\n\r\n    out vec2 screenPosition;\r\n    out float power;\r\n    out vec2 point2;\r\n\r\n    \r\n    vec2 hash(vec2 p) {                       \r\n        p = vec2( dot(p,vec2(127.1,311.7)),\r\n                  dot(p,vec2(269.5,183.3)) );\r\n        return -1. + 2.*fract(sin(p+20.)*53758.5453123);\r\n    }\r\n\r\n    float noise(vec2 p) {\r\n        vec2 i = floor((p)), f = fract((p));\r\n        vec2 u = f*f*(3.-2.*f);\r\n        return mix( mix( dot( hash( i + vec2(0.,0.) ), f - vec2(0.,0.) ), \r\n                         dot( hash( i + vec2(1.,0.) ), f - vec2(1.,0.) ), u.x),\r\n                    mix( dot( hash( i + vec2(0.,1.) ), f - vec2(0.,1.) ), \r\n                         dot( hash( i + vec2(1.,1.) ), f - vec2(1.,1.) ), u.x), u.y);\r\n    }\r\n\r\n\r\n    void main() {\r\n        float n = abs(noise(vec2(time, point.y)) * 4.0);\r\n        //float n = sin(time);\r\n        power = mix(0.8, 1.0, clamp(n, 0.0, 1.0));\r\n\r\n        screenPosition = (resolution * vertexBuffer) + vec2(0.0);\r\n        gl_Position = vec4(screenPosition, 0.0, 1.0) * projection;\r\n\r\n        point2 = point;\r\n    }"),e.compileShader(io),uo=e.getShaderInfoLog(io),zr(Nr("vertexShader: %s"))(uo),so=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(so,"#version 300 es\r\n    precision mediump float;\r\n    \r\n    in vec2 screenPosition;\r\n    in float power;\r\n    in vec2 point2;\r\n    \r\n    uniform vec3 lightColor;\r\n    uniform float radius;\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n        \r\n\r\n    void main(void) {\r\n        vec2 p = screenPosition - point2;\r\n        float dist = length(p);\r\n\r\n        float att = 1.0 - (dist / radius);\r\n\r\n        diffuseColor = vec4(lightColor.rgb * att * power, 1.0);\r\n    }\r\n"),e.compileShader(so),ao=e.getShaderInfoLog(so),zr(Nr("fragmentShader: %s"))(ao),co=e.createProgram(),e.attachShader(co,io),e.attachShader(co,so),e.linkProgram(co),fo=e.getProgramInfoLog(co),zr(Nr("program: %s"))(fo),e.detachShader(co,io),e.deleteShader(io),e.detachShader(co,so),e.deleteShader(so),e.useProgram(co),ho=nu(new Array(7),0,7,null),go=e.getAttribLocation(co,"vertexBuffer"),ho[0]=go,wo=e.getUniformLocation(co,"resolution"),ho[1]=wo,mo=e.getUniformLocation(co,"projection"),ho[2]=mo,xo=e.getUniformLocation(co,"time"),ho[3]=xo,Ao=e.getUniformLocation(co,"point"),ho[4]=Ao,So=e.getUniformLocation(co,"lightColor"),ho[5]=So,bo=e.getUniformLocation(co,"radius"),ho[6]=bo,[co,ho,e]),Li=(yo=e.createShader(e.VERTEX_SHADER),e.shaderSource(yo,"#version 300 es\r\n    precision lowp float;\r\n\r\n    in vec2 vertexBuffer;\r\n\r\n    void main() {\r\n        gl_Position = vec4(vertexBuffer.xy, 0.0, 1.0);\r\n    }"),e.compileShader(yo),To=e.getShaderInfoLog(yo),zr(Nr("vertexShader: %s"))(To),Eo=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(Eo,"#version 300 es\r\n    precision highp float;\r\n    \r\n    uniform vec3 lightColor;\r\n    uniform float power;\r\n\r\n    layout(location = 0) out vec4 diffuseColor;\r\n\r\n    void main(void) {\r\n        diffuseColor = vec4(lightColor, power);\r\n    }\r\n"),e.compileShader(Eo),Ro=e.getShaderInfoLog(Eo),zr(Nr("fragmentShader: %s"))(Ro),Lo=e.createProgram(),e.attachShader(Lo,yo),e.attachShader(Lo,Eo),e.linkProgram(Lo),_o=e.getProgramInfoLog(Lo),zr(Nr("program: %s"))(_o),e.detachShader(Lo,yo),e.deleteShader(yo),e.detachShader(Lo,Eo),e.deleteShader(Eo),e.useProgram(Lo),Oo=nu(new Array(3),0,3,null),Io=e.getAttribLocation(Lo,"vertexBuffer"),Oo[0]=Io,No=e.getUniformLocation(Lo,"lightColor"),Oo[1]=No,zo=e.getUniformLocation(Lo,"power"),Oo[2]=zo,[Lo,Oo,e]),_i=Ei([],{Equals:m,GetHashCode:w}),Oi=function(t,n,r,o){const u=i(_i,[t,n,r],null);if(u[0])return u[1];{const o=function(e,t,n,r){const o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),Po(t)&&Po(n)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),o}(e,n,r);return N(_i,[t,n,r],o),o}},Ui=new s((function(){return Qe(Uo()("Fog").Frames[0].Layers[0].TextureName,!0)})),Ii=ur(),ki=[],Ni=e.createBuffer(),zi=[],Vi=e.createBuffer(),Hi=[],ji=e.createBuffer(),Wi=[],Yi=e.createBuffer(),Xi=[],Gi=e.createBuffer(),qi=Mo(e),$i=Mo(e),Zi=Mo(e),Ji=Mo(e),Ki=Mo(e),Qi=Mo(e),eu=Mo(e);let tu,ru=ur();return tu=sr(ru,864e5*-1),function(n){return function(r){return function(o){let i,u=dr(n,Ii);i=Fu(u);const s=i/60%1,a=6.283185307179586*s,c=a+fs;let f,l;let d,h;l=as(0,.6,Math.sin(a)),f=cs(0,.6,l);let v;if(h=as(0,5,Math.sin(a)),d=cs(0,1,h),0===o.Weather.tag)v=xs(ws,s);else if(2===o.Weather.tag){let e;e=as(1,0,cs(Fu(dr(n,o.Weather.fields[0])),0,1));const t=xs(ps,s);v=[R(S,e,t[0]),R(S,e,t[1]),R(S,e,t[2])]}else v=xs(gs,s);const g=ls(255,255,255);let w;const p=0|We(r.Resolution),m=0|Ye(r.Resolution);w=je(p+p%r.Scale,m+m%r.Scale);We(w),r.Scale,Ye(w),r.Scale;_i.size>10&&(lo((function(t){var n,r;n=e,r=t[1],n.deleteTexture(r)}),_i),_i.clear());const A=Oi(-1,We(w),Ye(w)),b=Oi(-2,We(w),Ye(w)),y=Oi(-3,We(w),Ye(w)),T=Oi(-4,We(w),Ye(w)),C=Oi(-5,We(w),Ye(w)),P=Oi(-6,We(w),Ye(w)),M=Oi(-7,We(w),Ye(w)),F=Oi(-8,We(w),Ye(w)),B=t(Ui.Value);let D=void 0,L=function(){};const _=function(t,n){const r=yi;r[2].useProgram(r[0]),r[2].enable(r[2].BLEND),function(e){const t=e;t[2].blendEquation(t[2].FUNC_ADD),t[2].blendFunc(t[2].ONE,t[2].ONE_MINUS_SRC_ALPHA)}(yi);const o=yi[1][0];yi[2].bindBuffer(yi[2].ARRAY_BUFFER,ei),yi[2].enableVertexAttribArray(o),yi[2].vertexAttribDivisor(o,0),yi[2].vertexAttribPointer(o,2,yi[2].FLOAT,!1,0,0);const i=yi[1][1];yi[2].bindBuffer(yi[2].ARRAY_BUFFER,ai),yi[2].enableVertexAttribArray(i),yi[2].vertexAttribDivisor(i,0),yi[2].vertexAttribPointer(i,2,yi[2].FLOAT,!1,0,0),Fo(e,$i),Bo(e,0,n),yi[2].activeTexture(yi[2].TEXTURE0),yi[2].bindTexture(yi[2].TEXTURE_2D,t),yi[2].uniform1i(yi[1][2],0);const u=yi;u[2].drawArrays(u[2].TRIANGLES,0,6);const s=yi[1][0];yi[2].disableVertexAttribArray(s);const a=yi[1][1];yi[2].disableVertexAttribArray(a)},U=function(e,t,n){return function(e,t,n){const r=Math.fround(0),o=Math.fround(1),i=Math.fround(2),u=Math.fround(0),s=t,a=n,c=Math.fround(0),f=Math.fround(-1),l=Math.fround(1);return new Float32Array([i/(s-u),r,r,r,r,i/(c-a),r,r,r,r,i/(f-l),r,(u+s)/(u-s),(a+c)/(a-c),(f+l)/(f-l),o])}(0,e/n,t/n)},I=function(t,n,r,u,s,a,l){var h,v,w,p,m,A,b,y;let R,M,F;if(null!=u){R=u.Texture}else R=void 0;if(null!=s){M=s.Texture}else M=void 0;var _,U,I,k,N,z,V,H,j,W,Y,X,G,q,$,Z,J,K,Q,ee,te,ne;switch(null!=D?(h=D[4],v=D[3],w=D[2],p=0|D[1],_=x(D[0],n[0])&&p===n[1]&&x(w,r)&&x(v,R)&&x(h,M)?0:1):_=1,_){case 0:{let e;let t;e=D[4];let n;t=D[3];let r;n=D[2];let o;r=D[1];o=D[0],F=!1;break}case 1:L(),D=[n[0],n[1],r,R,M],F=!0}switch(0===r.tag?null!=u?(U=0,I=u):U=10:1===r.tag?null!=u?(U=1,k=u):U=10:2===r.tag?null!=u?(U=2,N=u):U=10:3===r.tag?null!=u?(U=3,r.fields[3],z=r.fields[2],V=r.fields[1],H=u,j=r.fields[0]):U=10:4===r.tag?(U=4,W=r.fields[0][3],Y=r.fields[0][2],X=r.fields[0][1],G=r.fields[0][0]):7===r.tag?U=5:8===r.tag?U=6:9===r.tag?U=7:11===r.tag?null!=u?(U=8,q=u,$=r.fields[0][2],Z=r.fields[0][3],J=r.fields[0][0],K=r.fields[0][1]):U=10:10===r.tag&&null!=u?(U=9,Q=u):U=10,U){case 0:F&&(L=function(){if(L=function(){},ki.length>0){const n=Bi;n[2].useProgram(n[0]),n[2].enable(n[2].BLEND);const r=Bi;let o;r[2].blendEquation(r[2].FUNC_ADD),r[2].blendFuncSeparate(r[2].SRC_ALPHA,r[2].ONE_MINUS_SRC_ALPHA,r[2].ONE,r[2].ONE),o=t,Bi[2].uniformMatrix4fv(Bi[1][0],!0,o);const i=Bi[1][1];Bi[2].bindBuffer(Bi[2].ARRAY_BUFFER,Xo),Bi[2].enableVertexAttribArray(i),Bi[2].vertexAttribDivisor(i,0),Bi[2].vertexAttribPointer(i,2,Bi[2].FLOAT,!1,0,0);const u=Bi[1][2];Bi[2].bindBuffer(Bi[2].ARRAY_BUFFER,Zo),Bi[2].enableVertexAttribArray(u),Bi[2].vertexAttribDivisor(u,0),Bi[2].vertexAttribPointer(u,2,Bi[2].FLOAT,!1,0,0),Bi[2].activeTexture(Bi[2].TEXTURE0),Bi[2].bindTexture(Bi[2].TEXTURE_2D,I.Texture),Bi[2].uniform1i(Bi[1][5],0);const s=ki.slice(),a=new Float32Array(4*s.length);for(let e=0;e<=s.length-1;e++){const t=s[e];a[4*e+0]=t[0],a[4*e+1]=t[1],a[4*e+2]=t[2],a[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Ni),e.bufferData(e.ARRAY_BUFFER,a,e.STATIC_DRAW);const c=Bi[1][3];Bi[2].bindBuffer(Bi[2].ARRAY_BUFFER,Ni),Bi[2].enableVertexAttribArray(c),Bi[2].vertexAttribDivisor(c,1),Bi[2].vertexAttribPointer(c,4,Bi[2].FLOAT,!1,0,0);const f=zi.slice(),l=new Float32Array(4*f.length);for(let e=0;e<=f.length-1;e++){const t=f[e];l[4*e+0]=t[0],l[4*e+1]=t[1],l[4*e+2]=t[2],l[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Vi),e.bufferData(e.ARRAY_BUFFER,l,e.STATIC_DRAW);const d=Bi[1][4];Bi[2].bindBuffer(Bi[2].ARRAY_BUFFER,Vi),Bi[2].enableVertexAttribArray(d),Bi[2].vertexAttribDivisor(d,1),Bi[2].vertexAttribPointer(d,4,Bi[2].FLOAT,!1,0,0);const h=0|ki.length,v=Bi;v[2].drawArraysInstanced(v[2].TRIANGLES,0,6,h),O(ki),O(zi);const g=Bi[1][1];Bi[2].disableVertexAttribArray(g);const w=Bi[1][2];Bi[2].disableVertexAttribArray(w);const p=Bi[1][3];Bi[2].disableVertexAttribArray(p);const m=Bi[1][4];Bi[2].disableVertexAttribArray(m)}}),ki.push([0|$e(l[0]),0|Ze(l[0]),0|We(l[1]),0|Ye(l[1])]),zi.push(I.TextureSlice);break;case 1:if(null!=s){const n=s;var re,oe;if(F&&(L=function(){if(L=function(){},ki.length>0){const r=bi;r[2].useProgram(r[0]),r[2].enable(r[2].BLEND);const o=bi;let u;o[2].blendEquation(o[2].FUNC_ADD),o[2].blendFuncSeparate(o[2].SRC_ALPHA,o[2].ONE_MINUS_SRC_ALPHA,o[2].ONE,o[2].ONE),bi[2].activeTexture(bi[2].TEXTURE0),bi[2].bindTexture(bi[2].TEXTURE_2D,k.Texture),bi[2].uniform1i(bi[1][8],0),bi[2].activeTexture(bi[2].TEXTURE1),bi[2].bindTexture(bi[2].TEXTURE_2D,n.Texture),bi[2].uniform1i(bi[1][9],1),u=t,bi[2].uniformMatrix4fv(bi[1][0],!0,u);const s=i;bi[2].uniform1f(bi[1][7],s);const a=ki.slice(),c=new Float32Array(4*a.length);for(let e=0;e<=a.length-1;e++){const t=a[e];c[4*e+0]=t[0],c[4*e+1]=t[1],c[4*e+2]=t[2],c[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Ni),e.bufferData(e.ARRAY_BUFFER,c,e.STATIC_DRAW);const f=bi[1][3];bi[2].bindBuffer(bi[2].ARRAY_BUFFER,Ni),bi[2].enableVertexAttribArray(f),bi[2].vertexAttribDivisor(f,1),bi[2].vertexAttribPointer(f,4,bi[2].FLOAT,!1,0,0);const l=zi.slice(),d=new Float32Array(4*l.length);for(let e=0;e<=l.length-1;e++){const t=l[e];d[4*e+0]=t[0],d[4*e+1]=t[1],d[4*e+2]=t[2],d[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Vi),e.bufferData(e.ARRAY_BUFFER,d,e.STATIC_DRAW);const h=bi[1][4];bi[2].bindBuffer(bi[2].ARRAY_BUFFER,Vi),bi[2].enableVertexAttribArray(h),bi[2].vertexAttribDivisor(h,1),bi[2].vertexAttribPointer(h,4,bi[2].FLOAT,!1,0,0);const v=Hi.slice(),g=new Float32Array(4*v.length);for(let e=0;e<=v.length-1;e++){const t=v[e];g[4*e+0]=t[0],g[4*e+1]=t[1],g[4*e+2]=t[2],g[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,ji),e.bufferData(e.ARRAY_BUFFER,g,e.STATIC_DRAW);const w=bi[1][5];bi[2].bindBuffer(bi[2].ARRAY_BUFFER,ji),bi[2].enableVertexAttribArray(w),bi[2].vertexAttribDivisor(w,1),bi[2].vertexAttribPointer(w,4,bi[2].FLOAT,!1,0,0);const p=Wi.slice(),m=new Float32Array(2*p.length);for(let e=0;e<=p.length-1;e++){const t=p[e];m[2*e+0]=t[0],m[2*e+1]=t[1]}e.bindBuffer(e.ARRAY_BUFFER,Yi),e.bufferData(e.ARRAY_BUFFER,m,e.STATIC_DRAW);const x=bi[1][6];bi[2].bindBuffer(bi[2].ARRAY_BUFFER,Yi),bi[2].enableVertexAttribArray(x),bi[2].vertexAttribDivisor(x,1),bi[2].vertexAttribPointer(x,2,bi[2].FLOAT,!1,0,0);const A=bi[1][1];bi[2].bindBuffer(bi[2].ARRAY_BUFFER,Xo),bi[2].enableVertexAttribArray(A),bi[2].vertexAttribDivisor(A,0),bi[2].vertexAttribPointer(A,2,bi[2].FLOAT,!1,0,0);const S=bi[1][2];bi[2].bindBuffer(bi[2].ARRAY_BUFFER,Zo),bi[2].enableVertexAttribArray(S),bi[2].vertexAttribDivisor(S,0),bi[2].vertexAttribPointer(S,2,bi[2].FLOAT,!1,0,0);const b=0|ki.length,y=bi;y[2].drawArraysInstanced(y[2].TRIANGLES,0,6,b);const T=bi[1][1];bi[2].disableVertexAttribArray(T);const E=bi[1][2];bi[2].disableVertexAttribArray(E);const R=bi[1][3];bi[2].disableVertexAttribArray(R);const C=bi[1][4];bi[2].disableVertexAttribArray(C);const P=bi[1][5];bi[2].disableVertexAttribArray(P);const M=bi[1][6];bi[2].disableVertexAttribArray(M)}O(ki),O(zi),O(Hi),O(Wi)}),ki.push([0|$e(l[0]),0|Ze(l[0]),0|We(l[1]),0|Ye(l[1])]),zi.push(k.TextureSlice),Hi.push(n.TextureSlice),null!=a){const e=a;0===e.tag?re=0:1===e.tag?(re=1,oe=e.fields[0]):re=2}else re=2;switch(re){case 0:Wi.push([1,0]);break;case 1:Wi.push([2,oe]);break;case 2:Wi.push([0,0])}}break;case 2:if(null!=s){const r=s;F&&(L=function(){if(L=function(){},ki.length>0){const o=Fi;o[2].useProgram(o[0]),o[2].enable(o[2].BLEND);const i=Fi;let u;i[2].blendEquation(i[2].FUNC_ADD),i[2].blendFuncSeparate(i[2].SRC_ALPHA,i[2].ONE_MINUS_SRC_ALPHA,i[2].ONE,i[2].ONE),Fi[2].activeTexture(Fi[2].TEXTURE0),Fi[2].bindTexture(Fi[2].TEXTURE_2D,N.Texture),Fi[2].uniform1i(Fi[1][7],0),Fi[2].activeTexture(Fi[2].TEXTURE1),Fi[2].bindTexture(Fi[2].TEXTURE_2D,r.Texture),Fi[2].uniform1i(Fi[1][8],1),Fi[2].activeTexture(Fi[2].TEXTURE2),Fi[2].bindTexture(Fi[2].TEXTURE_2D,C),Fi[2].uniform1i(Fi[1][9],2);const s=je(~~(We(n[0])/n[1]),~~(Ye(n[0])/n[1]));let a;u=[0|We(s),0|Ye(s)],Fi[2].uniform2f(Fi[1][1],u[0],u[1]),a=t,Fi[2].uniformMatrix4fv(Fi[1][0],!0,a);const c=ki.slice(),f=new Float32Array(4*c.length);for(let e=0;e<=c.length-1;e++){const t=c[e];f[4*e+0]=t[0],f[4*e+1]=t[1],f[4*e+2]=t[2],f[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Ni),e.bufferData(e.ARRAY_BUFFER,f,e.STATIC_DRAW);const l=Fi[1][4];Fi[2].bindBuffer(Fi[2].ARRAY_BUFFER,Ni),Fi[2].enableVertexAttribArray(l),Fi[2].vertexAttribDivisor(l,1),Fi[2].vertexAttribPointer(l,4,Fi[2].FLOAT,!1,0,0);const d=zi.slice(),h=new Float32Array(4*d.length);for(let e=0;e<=d.length-1;e++){const t=d[e];h[4*e+0]=t[0],h[4*e+1]=t[1],h[4*e+2]=t[2],h[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Vi),e.bufferData(e.ARRAY_BUFFER,h,e.STATIC_DRAW);const v=Fi[1][5];Fi[2].bindBuffer(Fi[2].ARRAY_BUFFER,Vi),Fi[2].enableVertexAttribArray(v),Fi[2].vertexAttribDivisor(v,1),Fi[2].vertexAttribPointer(v,4,Fi[2].FLOAT,!1,0,0);const g=Hi.slice(),w=new Float32Array(4*g.length);for(let e=0;e<=g.length-1;e++){const t=g[e];w[4*e+0]=t[0],w[4*e+1]=t[1],w[4*e+2]=t[2],w[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,ji),e.bufferData(e.ARRAY_BUFFER,w,e.STATIC_DRAW);const p=Fi[1][6];Fi[2].bindBuffer(Fi[2].ARRAY_BUFFER,ji),Fi[2].enableVertexAttribArray(p),Fi[2].vertexAttribDivisor(p,1),Fi[2].vertexAttribPointer(p,4,Fi[2].FLOAT,!1,0,0);const m=Fi[1][2];Fi[2].bindBuffer(Fi[2].ARRAY_BUFFER,Xo),Fi[2].enableVertexAttribArray(m),Fi[2].vertexAttribDivisor(m,0),Fi[2].vertexAttribPointer(m,2,Fi[2].FLOAT,!1,0,0);const x=Fi[1][3];Fi[2].bindBuffer(Fi[2].ARRAY_BUFFER,Zo),Fi[2].enableVertexAttribArray(x),Fi[2].vertexAttribDivisor(x,0),Fi[2].vertexAttribPointer(x,2,Fi[2].FLOAT,!1,0,0);const A=0|ki.length,S=Fi;S[2].drawArraysInstanced(S[2].TRIANGLES,0,6,A),O(ki),O(zi),O(Hi);const b=Fi[1][2];Fi[2].disableVertexAttribArray(b);const y=Fi[1][3];Fi[2].disableVertexAttribArray(y);const T=Fi[1][4];Fi[2].disableVertexAttribArray(T);const E=Fi[1][5];Fi[2].disableVertexAttribArray(E);const R=Fi[1][6];Fi[2].disableVertexAttribArray(R)}}),ki.push([0|$e(l[0]),0|Ze(l[0]),0|We(l[1]),0|Ye(l[1])]),zi.push(N.TextureSlice),Hi.push(r.TextureSlice)}break;case 3:F&&(L=function(){if(L=function(){},ki.length>0){const n=wi;n[2].useProgram(n[0]),n[2].enable(n[2].BLEND);const r=wi;let o;r[2].blendEquation(r[2].FUNC_ADD),r[2].blendFuncSeparate(r[2].SRC_ALPHA,r[2].ONE_MINUS_SRC_ALPHA,r[2].ONE,r[2].ONE),o=t,wi[2].uniformMatrix4fv(wi[1][0],!0,o);const i=wi[1][1];wi[2].bindBuffer(wi[2].ARRAY_BUFFER,Xo),wi[2].enableVertexAttribArray(i),wi[2].vertexAttribDivisor(i,0),wi[2].vertexAttribPointer(i,2,wi[2].FLOAT,!1,0,0);const u=wi[1][2];wi[2].bindBuffer(wi[2].ARRAY_BUFFER,Zo),wi[2].enableVertexAttribArray(u),wi[2].vertexAttribDivisor(u,0),wi[2].vertexAttribPointer(u,2,wi[2].FLOAT,!1,0,0);const s=[j,V,z];wi[2].uniform3f(wi[1][6],s[0],s[1],s[2]),wi[2].activeTexture(wi[2].TEXTURE0),wi[2].bindTexture(wi[2].TEXTURE_2D,H.Texture),wi[2].uniform1i(wi[1][5],0);const a=ki.slice(),c=new Float32Array(4*a.length);for(let e=0;e<=a.length-1;e++){const t=a[e];c[4*e+0]=t[0],c[4*e+1]=t[1],c[4*e+2]=t[2],c[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Ni),e.bufferData(e.ARRAY_BUFFER,c,e.STATIC_DRAW);const f=wi[1][3];wi[2].bindBuffer(wi[2].ARRAY_BUFFER,Ni),wi[2].enableVertexAttribArray(f),wi[2].vertexAttribDivisor(f,1),wi[2].vertexAttribPointer(f,4,wi[2].FLOAT,!1,0,0);const l=zi.slice(),d=new Float32Array(4*l.length);for(let e=0;e<=l.length-1;e++){const t=l[e];d[4*e+0]=t[0],d[4*e+1]=t[1],d[4*e+2]=t[2],d[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Vi),e.bufferData(e.ARRAY_BUFFER,d,e.STATIC_DRAW);const h=wi[1][4];wi[2].bindBuffer(wi[2].ARRAY_BUFFER,Vi),wi[2].enableVertexAttribArray(h),wi[2].vertexAttribDivisor(h,1),wi[2].vertexAttribPointer(h,4,wi[2].FLOAT,!1,0,0);const v=0|ki.length,g=wi;g[2].drawArraysInstanced(g[2].TRIANGLES,0,6,v),O(ki),O(zi);const w=wi[1][1];wi[2].disableVertexAttribArray(w);const p=wi[1][2];wi[2].disableVertexAttribArray(p);const m=wi[1][3];wi[2].disableVertexAttribArray(m);const x=wi[1][4];wi[2].disableVertexAttribArray(x)}}),ki.push([0|$e(l[0]),0|Ze(l[0]),0|We(l[1]),0|Ye(l[1])]),zi.push(H.TextureSlice);break;case 4:F&&(L=function(){if(L=function(){},ki.length>0){const n=Si;n[2].useProgram(n[0]),n[2].enable(n[2].BLEND);const r=Si;r[2].blendEquation(r[2].FUNC_ADD),r[2].blendFuncSeparate(r[2].SRC_ALPHA,r[2].ONE_MINUS_SRC_ALPHA,r[2].ONE,r[2].ONE);const o=[G,X,Y,W];Si[2].uniform4f(Si[1][3],o[0],o[1],o[2],o[3]);const i=Si;i[2].useProgram(i[0]),i[2].enable(i[2].BLEND);const u=Si;let s;u[2].blendEquation(u[2].FUNC_ADD),u[2].blendFuncSeparate(u[2].SRC_ALPHA,u[2].ONE_MINUS_SRC_ALPHA,u[2].ONE,u[2].ONE),s=t,Si[2].uniformMatrix4fv(Si[1][0],!0,s);const a=Si[1][1];Si[2].bindBuffer(Si[2].ARRAY_BUFFER,Xo),Si[2].enableVertexAttribArray(a),Si[2].vertexAttribDivisor(a,0),Si[2].vertexAttribPointer(a,2,Si[2].FLOAT,!1,0,0);const c=ki.slice(),f=new Float32Array(4*c.length);for(let e=0;e<=c.length-1;e++){const t=c[e];f[4*e+0]=t[0],f[4*e+1]=t[1],f[4*e+2]=t[2],f[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Ni),e.bufferData(e.ARRAY_BUFFER,f,e.STATIC_DRAW);const l=Si[1][2];Si[2].bindBuffer(Si[2].ARRAY_BUFFER,Ni),Si[2].enableVertexAttribArray(l),Si[2].vertexAttribDivisor(l,1),Si[2].vertexAttribPointer(l,4,Si[2].FLOAT,!1,0,0);const d=0|ki.length,h=Si;h[2].drawArraysInstanced(h[2].TRIANGLES,0,6,d),O(ki);const v=Si[1][1];Si[2].disableVertexAttribArray(v);const g=Si[1][2];Si[2].disableVertexAttribArray(g)}}),ki.push((m=qe($e(l[0])*n[1],Ze(l[0])*n[1]),A=je(We(l[1])*n[1],Ye(l[1])*n[1]),[0|$e(m),0|Ze(m),0|We(A),0|Ye(A)]));break;case 5:{L(),D=void 0;const e=Ci;e[2].useProgram(e[0]),e[2].enable(e[2].BLEND);const r=Ci;r[2].blendEquation(r[2].FUNC_ADD),r[2].blendFuncSeparate(r[2].SRC_ALPHA,r[2].ONE_MINUS_SRC_ALPHA,r[2].ONE,r[2].ONE);const u=Ci[1][0];let s;Ci[2].bindBuffer(Ci[2].ARRAY_BUFFER,ei),Ci[2].enableVertexAttribArray(u),Ci[2].vertexAttribDivisor(u,0),Ci[2].vertexAttribPointer(u,2,Ci[2].FLOAT,!1,0,0);const a=je(~~(We(n[0])/n[1]),~~(Ye(n[0])/n[1]));s=[0|We(a),0|Ye(a)],Ci[2].uniform2f(Ci[1][3],s[0],s[1]),Ci[2].activeTexture(Ci[2].TEXTURE0),Ci[2].bindTexture(Ci[2].TEXTURE_2D,T),Ci[2].uniform1i(Ci[1][1],0),Ci[2].activeTexture(Ci[2].TEXTURE1),Ci[2].bindTexture(Ci[2].TEXTURE_2D,C),Ci[2].uniform1i(Ci[1][2],1);const c=i;Ci[2].uniform1f(Ci[1][4],c);const f=Ci;f[2].drawArrays(f[2].TRIANGLES,0,6);const l=Ci[1][0];Ci[2].disableVertexAttribArray(l);const d=Pi;d[2].useProgram(d[0]),d[2].enable(d[2].BLEND);const h=Pi;h[2].blendEquation(h[2].FUNC_ADD),h[2].blendFuncSeparate(h[2].SRC_ALPHA,h[2].ONE_MINUS_SRC_ALPHA,h[2].ONE,h[2].ONE);const v=Pi[1][1];Pi[2].bindBuffer(Pi[2].ARRAY_BUFFER,Xo),Pi[2].enableVertexAttribArray(v),Pi[2].vertexAttribDivisor(v,0),Pi[2].vertexAttribPointer(v,2,Pi[2].FLOAT,!1,0,0);const g=[o.Dragger[0],o.Dragger[1]];let w;Pi[2].uniform2f(Pi[1][4],g[0],g[1]),w=t,Pi[2].uniformMatrix4fv(Pi[1][0],!0,w);const p=Pi[1][2];let m;Pi[2].bindBuffer(Pi[2].ARRAY_BUFFER,Vo),Pi[2].enableVertexAttribArray(p),Pi[2].vertexAttribDivisor(p,1),Pi[2].vertexAttribPointer(p,4,Pi[2].FLOAT,!1,0,0);const x=je(~~(We(n[0])/n[1]),~~(Ye(n[0])/n[1]));m=[0|We(x),0|Ye(x)],Pi[2].uniform2f(Pi[1][3],m[0],m[1]),Pi[2].activeTexture(Pi[2].TEXTURE0),Pi[2].bindTexture(Pi[2].TEXTURE_2D,C),Pi[2].uniform1i(Pi[1][6],0);const A=i;Pi[2].uniform1f(Pi[1][5],A);const S=Pi;S[2].drawArraysInstanced(S[2].TRIANGLES,0,6,400);const b=Pi[1][1];Pi[2].disableVertexAttribArray(b);const y=Pi[1][2];Pi[2].disableVertexAttribArray(y);const E=Mi;E[2].useProgram(E[0]),E[2].enable(E[2].BLEND);const R=Mi;R[2].blendEquation(R[2].FUNC_ADD),R[2].blendFuncSeparate(R[2].SRC_ALPHA,R[2].ONE_MINUS_SRC_ALPHA,R[2].ONE,R[2].ONE);const M=Mi[1][1];Mi[2].bindBuffer(Mi[2].ARRAY_BUFFER,Xo),Mi[2].enableVertexAttribArray(M),Mi[2].vertexAttribDivisor(M,0),Mi[2].vertexAttribPointer(M,2,Mi[2].FLOAT,!1,0,0);const F=[o.Dragger[0],o.Dragger[1]];let B;Mi[2].uniform2f(Mi[1][5],F[0],F[1]),B=t,Mi[2].uniformMatrix4fv(Mi[1][0],!0,B);const _=Mi[1][2];let O;Mi[2].bindBuffer(Mi[2].ARRAY_BUFFER,Vo),Mi[2].enableVertexAttribArray(_),Mi[2].vertexAttribDivisor(_,1),Mi[2].vertexAttribPointer(_,4,Mi[2].FLOAT,!1,0,0);const U=je(~~(We(n[0])/n[1]),~~(Ye(n[0])/n[1]));O=[0|We(U),0|Ye(U)],Mi[2].uniform2f(Mi[1][3],O[0],O[1]),Mi[2].activeTexture(Mi[2].TEXTURE0),Mi[2].bindTexture(Mi[2].TEXTURE_2D,P),Mi[2].uniform1i(Mi[1][6],0),Mi[2].activeTexture(Mi[2].TEXTURE1),Mi[2].bindTexture(Mi[2].TEXTURE_2D,C),Mi[2].uniform1i(Mi[1][7],1);const I=i;Mi[2].uniform1f(Mi[1][4],I);const k=Mi;k[2].drawArraysInstanced(k[2].TRIANGLES,0,6,1e3);const N=Mi[1][1];Mi[2].disableVertexAttribArray(N);const z=Mi[1][2];Mi[2].disableVertexAttribArray(z);break}case 6:{L(),D=void 0;const e=Ri;e[2].useProgram(e[0]),e[2].enable(e[2].BLEND);const r=Ri;r[2].blendEquation(r[2].FUNC_ADD),r[2].blendFuncSeparate(r[2].SRC_ALPHA,r[2].ONE_MINUS_SRC_ALPHA,r[2].ONE,r[2].ONE);const u=Ri[1][1];Ri[2].bindBuffer(Ri[2].ARRAY_BUFFER,Xo),Ri[2].enableVertexAttribArray(u),Ri[2].vertexAttribDivisor(u,0),Ri[2].vertexAttribPointer(u,2,Ri[2].FLOAT,!1,0,0);const s=[o.Dragger[0],o.Dragger[1]];let a;Ri[2].uniform2f(Ri[1][5],s[0],s[1]),a=t,Ri[2].uniformMatrix4fv(Ri[1][0],!0,a);const c=Ri[1][2];let f;Ri[2].bindBuffer(Ri[2].ARRAY_BUFFER,Vo),Ri[2].enableVertexAttribArray(c),Ri[2].vertexAttribDivisor(c,1),Ri[2].vertexAttribPointer(c,4,Ri[2].FLOAT,!1,0,0);const l=je(~~(We(n[0])/n[1]),~~(Ye(n[0])/n[1]));f=[0|We(l),0|Ye(l)],Ri[2].uniform2f(Ri[1][3],f[0],f[1]),Ri[2].activeTexture(Ri[2].TEXTURE0),Ri[2].bindTexture(Ri[2].TEXTURE_2D,P),Ri[2].uniform1i(Ri[1][6],0),Ri[2].activeTexture(Ri[2].TEXTURE1),Ri[2].bindTexture(Ri[2].TEXTURE_2D,C),Ri[2].uniform1i(Ri[1][7],1);const d=i;Ri[2].uniform1f(Ri[1][4],d);const h=Ri;h[2].drawArraysInstanced(h[2].TRIANGLES,0,6,3e3);const v=Ri[1][1];Ri[2].disableVertexAttribArray(v);const g=Ri[1][2];Ri[2].disableVertexAttribArray(g);break}case 7:if(L(),D=void 0,null!=B){const e=B[1],r=B[0],u=Ti;u[2].useProgram(u[0]),u[2].enable(u[2].BLEND);const s=Ti;s[2].blendEquation(s[2].FUNC_ADD),s[2].blendFuncSeparate(s[2].SRC_ALPHA,s[2].ONE_MINUS_SRC_ALPHA,s[2].ONE,s[2].ONE);const a=Ti[1][1];Ti[2].bindBuffer(Ti[2].ARRAY_BUFFER,Xo),Ti[2].enableVertexAttribArray(a),Ti[2].vertexAttribDivisor(a,0),Ti[2].vertexAttribPointer(a,2,Ti[2].FLOAT,!1,0,0);const c=Ti[1][2];let f;Ti[2].bindBuffer(Ti[2].ARRAY_BUFFER,Zo),Ti[2].enableVertexAttribArray(c),Ti[2].vertexAttribDivisor(c,0),Ti[2].vertexAttribPointer(c,2,Ti[2].FLOAT,!1,0,0);let l;f=[0|We(e),0|Ye(e)],Ti[2].uniform2f(Ti[1][5],f[0],f[1]);const d=je(~~(We(n[0])/n[1]),~~(Ye(n[0])/n[1]));l=[0|We(d),0|Ye(d)],Ti[2].uniform2f(Ti[1][4],l[0],l[1]);const h=i;Ti[2].uniform1f(Ti[1][6],h);const v=[o.Dragger[0],o.Dragger[1]];let w;Ti[2].uniform2f(Ti[1][7],v[0],v[1]),w=t,Ti[2].uniformMatrix4fv(Ti[1][0],!0,w),Ti[2].activeTexture(Ti[2].TEXTURE0),Ti[2].bindTexture(Ti[2].TEXTURE_2D,r),Ti[2].uniform1i(Ti[1][8],0);const p=Ti[1][3];Ti[2].bindBuffer(Ti[2].ARRAY_BUFFER,Vo),Ti[2].enableVertexAttribArray(p),Ti[2].vertexAttribDivisor(p,1),Ti[2].vertexAttribPointer(p,4,Ti[2].FLOAT,!1,0,0),Ti[2].activeTexture(Ti[2].TEXTURE1),Ti[2].bindTexture(Ti[2].TEXTURE_2D,C),Ti[2].uniform1i(Ti[1][9],1);const m=(ee=g[0],te=g[1],ne=g[2],[ee,te,ne]);let x;Ti[2].uniform3f(Ti[1][10],m[0],m[1],m[2]);x=E(S,1e3,0|~~(~~(Ye(n[0])/n[1])/3));const A=Ti;A[2].drawArraysInstanced(A[2].TRIANGLES,0,6,x);const b=Ti[1][1];Ti[2].disableVertexAttribArray(b);const y=Ti[1][2];Ti[2].disableVertexAttribArray(y);const T=Ti[1][3];Ti[2].disableVertexAttribArray(T)}break;case 8:{F&&(L=function(){if(L=function(){},ki.length>0){const r=pi;r[2].useProgram(r[0]),r[2].enable(r[2].BLEND);const o=pi;let i;o[2].blendEquationSeparate(o[2].MIN,o[2].MAX),o[2].blendFuncSeparate(o[2].SRC_ALPHA,o[2].ONE_MINUS_SRC_ALPHA,o[2].ONE,o[2].ONE),i=t,pi[2].uniformMatrix4fv(pi[1][0],!0,i);const u=pi[1][2];pi[2].bindBuffer(pi[2].ARRAY_BUFFER,Xo),pi[2].enableVertexAttribArray(u),pi[2].vertexAttribDivisor(u,0),pi[2].vertexAttribPointer(u,2,pi[2].FLOAT,!1,0,0);const s=pi[1][3];let a;pi[2].bindBuffer(pi[2].ARRAY_BUFFER,Zo),pi[2].enableVertexAttribArray(s),pi[2].vertexAttribDivisor(s,0),pi[2].vertexAttribPointer(s,2,pi[2].FLOAT,!1,0,0),pi[2].activeTexture(pi[2].TEXTURE1),pi[2].bindTexture(pi[2].TEXTURE_2D,C),pi[2].uniform1i(pi[1][11],1);const c=je(~~(We(n[0])/n[1]),~~(Ye(n[0])/n[1]));a=[0|We(c),0|Ye(c)],pi[2].uniform2f(pi[1][1],a[0],a[1]);const f=[J,K,64];pi[2].uniform3f(pi[1][7],f[0],f[1],f[2]);const l=$;pi[2].uniform1f(pi[1][9],l);const d=Z;pi[2].uniform1f(pi[1][8],d);const h=ki.slice(),v=new Float32Array(4*h.length);for(let e=0;e<=h.length-1;e++){const t=h[e];v[4*e+0]=t[0],v[4*e+1]=t[1],v[4*e+2]=t[2],v[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Ni),e.bufferData(e.ARRAY_BUFFER,v,e.STATIC_DRAW);const g=pi[1][4];pi[2].bindBuffer(pi[2].ARRAY_BUFFER,Ni),pi[2].enableVertexAttribArray(g),pi[2].vertexAttribDivisor(g,1),pi[2].vertexAttribPointer(g,4,pi[2].FLOAT,!1,0,0);const w=zi.slice(),p=new Float32Array(4*w.length);for(let e=0;e<=w.length-1;e++){const t=w[e];p[4*e+0]=t[0],p[4*e+1]=t[1],p[4*e+2]=t[2],p[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Vi),e.bufferData(e.ARRAY_BUFFER,p,e.STATIC_DRAW);const m=pi[1][5];pi[2].bindBuffer(pi[2].ARRAY_BUFFER,Vi),pi[2].enableVertexAttribArray(m),pi[2].vertexAttribDivisor(m,1),pi[2].vertexAttribPointer(m,4,pi[2].FLOAT,!1,0,0);const x=Xi.slice(),A=new Float32Array(2*x.length);for(let e=0;e<=x.length-1;e++){const t=x[e];A[2*e+0]=t[0],A[2*e+1]=t[1]}e.bindBuffer(e.ARRAY_BUFFER,Gi),e.bufferData(e.ARRAY_BUFFER,A,e.STATIC_DRAW);const S=pi[1][6];pi[2].bindBuffer(pi[2].ARRAY_BUFFER,Gi),pi[2].enableVertexAttribArray(S),pi[2].vertexAttribDivisor(S,1),pi[2].vertexAttribPointer(S,2,pi[2].FLOAT,!1,0,0),pi[2].activeTexture(pi[2].TEXTURE0),pi[2].bindTexture(pi[2].TEXTURE_2D,q.Texture),pi[2].uniform1i(pi[1][10],0);const b=0|ki.length,y=pi;y[2].drawArraysInstanced(y[2].TRIANGLES,0,6,b),O(ki),O(zi),O(Xi);const T=pi[1][2];pi[2].disableVertexAttribArray(T);const E=pi[1][3];pi[2].disableVertexAttribArray(E);const R=pi[1][4];pi[2].disableVertexAttribArray(R);const P=pi[1][5];pi[2].disableVertexAttribArray(P);const M=pi[1][6];pi[2].disableVertexAttribArray(M)}});const r=null!=a?2===(b=a).tag?[b.fields[0]-1,b.fields[1]-1]:[0,0]:[0,0];for(let e=r[0];e<=E(S,r[1],64);e++){ki.push([0|$e(l[0]),0|Ze(l[0]),0|We(l[1]),0|Ye(l[1])]),zi.push(q.TextureSlice);const t=e/64;Xi.push([t,e])}break}case 9:{F&&(L=function(){if(L=function(){},ki.length>0){const r=mi;r[2].useProgram(r[0]),r[2].enable(r[2].BLEND);const o=mi;let i;o[2].blendEquationSeparate(o[2].MIN,o[2].MAX),o[2].blendFuncSeparate(o[2].SRC_ALPHA,o[2].ONE_MINUS_SRC_ALPHA,o[2].ONE,o[2].ONE),i=t,mi[2].uniformMatrix4fv(mi[1][0],!0,i);const u=mi[1][2];mi[2].bindBuffer(mi[2].ARRAY_BUFFER,Xo),mi[2].enableVertexAttribArray(u),mi[2].vertexAttribDivisor(u,0),mi[2].vertexAttribPointer(u,2,mi[2].FLOAT,!1,0,0);const s=mi[1][3];let a;mi[2].bindBuffer(mi[2].ARRAY_BUFFER,Zo),mi[2].enableVertexAttribArray(s),mi[2].vertexAttribDivisor(s,0),mi[2].vertexAttribPointer(s,2,mi[2].FLOAT,!1,0,0),mi[2].activeTexture(mi[2].TEXTURE1),mi[2].bindTexture(mi[2].TEXTURE_2D,C),mi[2].uniform1i(mi[1][11],1);const l=je(~~(We(n[0])/n[1]),~~(Ye(n[0])/n[1]));a=[0|We(l),0|Ye(l)],mi[2].uniform2f(mi[1][1],a[0],a[1]);const h=c;mi[2].uniform1f(mi[1][8],h);const v=f;mi[2].uniform1f(mi[1][9],v);const g=d;mi[2].uniform1f(mi[1][7],g);const w=ki.slice(),p=new Float32Array(4*w.length);for(let e=0;e<=w.length-1;e++){const t=w[e];p[4*e+0]=t[0],p[4*e+1]=t[1],p[4*e+2]=t[2],p[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Ni),e.bufferData(e.ARRAY_BUFFER,p,e.STATIC_DRAW);const m=mi[1][4];mi[2].bindBuffer(mi[2].ARRAY_BUFFER,Ni),mi[2].enableVertexAttribArray(m),mi[2].vertexAttribDivisor(m,1),mi[2].vertexAttribPointer(m,4,mi[2].FLOAT,!1,0,0);const x=zi.slice(),A=new Float32Array(4*x.length);for(let e=0;e<=x.length-1;e++){const t=x[e];A[4*e+0]=t[0],A[4*e+1]=t[1],A[4*e+2]=t[2],A[4*e+3]=t[3]}e.bindBuffer(e.ARRAY_BUFFER,Vi),e.bufferData(e.ARRAY_BUFFER,A,e.STATIC_DRAW);const S=mi[1][5];mi[2].bindBuffer(mi[2].ARRAY_BUFFER,Vi),mi[2].enableVertexAttribArray(S),mi[2].vertexAttribDivisor(S,1),mi[2].vertexAttribPointer(S,4,mi[2].FLOAT,!1,0,0);const b=Xi.slice(),y=new Float32Array(2*b.length);for(let e=0;e<=b.length-1;e++){const t=b[e];y[2*e+0]=t[0],y[2*e+1]=t[1]}e.bindBuffer(e.ARRAY_BUFFER,Gi),e.bufferData(e.ARRAY_BUFFER,y,e.STATIC_DRAW);const T=mi[1][6];mi[2].bindBuffer(mi[2].ARRAY_BUFFER,Gi),mi[2].enableVertexAttribArray(T),mi[2].vertexAttribDivisor(T,1),mi[2].vertexAttribPointer(T,2,mi[2].FLOAT,!1,0,0),mi[2].activeTexture(mi[2].TEXTURE0),mi[2].bindTexture(mi[2].TEXTURE_2D,Q.Texture),mi[2].uniform1i(mi[1][10],0);const E=0|ki.length,R=mi;R[2].drawArraysInstanced(R[2].TRIANGLES,0,6,E),O(ki),O(zi),O(Xi);const P=mi[1][2];mi[2].disableVertexAttribArray(P);const M=mi[1][3];mi[2].disableVertexAttribArray(M);const F=mi[1][4];mi[2].disableVertexAttribArray(F);const B=mi[1][5];mi[2].disableVertexAttribArray(B);const D=mi[1][6];mi[2].disableVertexAttribArray(D)}});const r=null!=a?2===(y=a).tag?[y.fields[0]-1,y.fields[1]-1]:[0,0]:[0,0];for(let e=r[0];e<=E(S,r[1],64);e++){ki.push([0|$e(l[0]),0|Ze(l[0]),0|We(l[1]),0|Ye(l[1])]),zi.push(Q.TextureSlice);const t=e/64;Xi.push([t,e])}break}}};let k;Fo(e,qi),k=new Float64Array([e.COLOR_ATTACHMENT0,e.COLOR_ATTACHMENT1,e.COLOR_ATTACHMENT2]),e.drawBuffers(k),Bo(e,0,T),Bo(e,1,C),Bo(e,2,P);const N=0|We(w),z=0|Ye(w);e.viewport(0,0,N,z);We(w),Ye(w);Co(e,0,0,ds[0],ds[1],ds[2],ds[3]),Do(e);const V=0|We(w),H=0|Ye(w);e.viewport(0,0,V,H);We(w),Ye(w);Co(e,0,0,ds[0],ds[1],ds[2],ds[3]);const j=function(e,n,r){var o,i;const u=t(e);if(null!=u){const e=u[1],t=u[0];return new ss(t,(o=We(e),i=Ye(e),[$e(n)/o,Ze(n)/i,We(r)/o,Ye(r)/i]))}},W=[];!function t(r,o,u,s,a,c,f){var l,h;e:for(;;){const z=r,V=o,H=u,Y=s,X=a,G=c,q=f;var g,w;switch(1===q.tag&&x(q.fields[0].Mode,new at(0,"World"))?(g=0,w=q.fields[0]):g=1,g){case 0:{let n;Fo(e,qi),n=new Float64Array([e.COLOR_ATTACHMENT0,e.COLOR_ATTACHMENT1,e.COLOR_ATTACHMENT2]),e.drawBuffers(n),Bo(e,0,A),Bo(e,1,b),Bo(e,2,y);const r=0|We(H),o=0|Ye(H);e.viewport(0,0,r,o);We(H),Ye(H);Co(e,0,0,ds[0],ds[1],ds[2],ds[3]);const i=qe($e(w.Position)+$e(Y),Ze(w.Position)+Ze(Y));for(let e=0;e<=w.Children.length-1;e++)t(z,V,H,i,X,new it(0,"Default"),w.Children[e]);L(),D=void 0,_(A,T),_(b,C),_(y,P),Do(e);const u=0|We(H),s=0|Ye(H);e.viewport(0,0,u,s);break}case 1:var p,m;switch(1===q.tag&&x(q.fields[0].Mode,new at(3,"Weather"))?(p=0,m=q.fields[0]):p=1,p){case 0:{Fo(e,Qi),Bo(e,0,A);const n=0|We(H),r=0|Ye(H);e.viewport(0,0,n,r);We(H),Ye(H);Co(e,0,0,ds[0],ds[1],ds[2],ds[3]);const o=qe($e(m.Position)+$e(Y),Ze(m.Position)+Ze(Y));for(let e=0;e<=m.Children.length-1;e++)t(z,V,H,o,X,new it(0,"Default"),m.Children[e]);L(),D=void 0,_(A,T),Do(e);const i=0|We(H),u=0|Ye(H);e.viewport(0,0,i,u);break}case 1:var E,B;switch(1===q.tag?(x(q.fields[0].Mode,new at(1,"Player")),E=1):E=1,E){case 0:{let n;Fo(e,Zi),Bo(e,0,A),Bo(e,1,b),n=new Float64Array([e.COLOR_ATTACHMENT0,e.COLOR_ATTACHMENT1]),e.drawBuffers(n);We(H),Ye(H);Co(e,0,0,ds[0],ds[1],ds[2],ds[3]);const r=qe($e(B.Position)+$e(Y),Ze(B.Position)+Ze(Y));for(let e=0;e<=B.Children.length-1;e++)t(z,V,H,r,X,new it(0,"Default"),B.Children[e]);L(),D=void 0,_(A,T),_(b,C),Do(e);const o=0|We(H),i=0|Ye(H);e.viewport(0,0,o,i);break}case 1:var O,k,N;switch(1===q.tag?null!=q.fields[0].Mode&&2===q.fields[0].Mode.tag?(O=0,k=q.fields[0].Mode.fields[0],N=q.fields[0]):O=x(q.fields[0].Mode,new at(4,"CompleteWorld"))?1:2:O=2,O){case 0:{const n=qe($e(N.Position)+$e(Y),Ze(N.Position)+Ze(Y));Fo(e,Ki),Bo(e,0,F);const r=0|We(H),o=0|Ye(H);e.viewport(0,0,r,o),Co(e,We(H),Ye(H),1,1,1,1),lo((function(e){W.push([e[0],e[1]]);for(let r=0;r<=N.Children.length-1;r++)t(z,V,H,n,X,new it(11,"ShadowPoint",[$e(e[0]),Ze(e[0]),1,e[1]]),N.Children[r]);L(),D=void 0}),k);const i=Li;i[2].useProgram(i[0]),i[2].enable(i[2].BLEND);const u=Li;u[2].blendEquation(u[2].MAX),u[2].blendFunc(u[2].ONE,u[2].ONE);const s=Li[1][0];Li[2].bindBuffer(Li[2].ARRAY_BUFFER,ei),Li[2].enableVertexAttribArray(s),Li[2].vertexAttribDivisor(s,0),Li[2].vertexAttribPointer(s,2,Li[2].FLOAT,!1,0,0);const a=d;let c,f,l;Li[2].uniform1f(Li[1][2],a),l=R(S,v[1],v[0]),f=R(S,v[2],l),c=[f,f,f],Li[2].uniform3f(Li[1][1],c[0],c[1],c[2]);const h=Li;h[2].drawArrays(h[2].TRIANGLES,0,6);const g=Li[1][0];Li[2].disableVertexAttribArray(g);for(let e=0;e<=N.Children.length-1;e++)t(z,V,H,n,X,new it(10,"ShadowSun"),N.Children[e]);L(),D=void 0,Fo(e,$i),Bo(e,0,T);const w=xi;w[2].useProgram(w[0]),w[2].enable(w[2].BLEND);const p=xi;p[2].blendEquation(p[2].FUNC_ADD),p[2].blendFuncSeparate(p[2].SRC_ALPHA,p[2].ONE_MINUS_SRC_ALPHA,p[2].ONE,p[2].ONE);const m=xi[1][0];xi[2].bindBuffer(xi[2].ARRAY_BUFFER,ei),xi[2].enableVertexAttribArray(m),xi[2].vertexAttribDivisor(m,0),xi[2].vertexAttribPointer(m,2,xi[2].FLOAT,!1,0,0);const x=xi[1][1];xi[2].bindBuffer(xi[2].ARRAY_BUFFER,ai),xi[2].enableVertexAttribArray(x),xi[2].vertexAttribDivisor(x,0),xi[2].vertexAttribPointer(x,2,xi[2].FLOAT,!1,0,0),xi[2].activeTexture(xi[2].TEXTURE0),xi[2].bindTexture(xi[2].TEXTURE_2D,F),xi[2].uniform1i(xi[1][2],0);const A=xi;A[2].drawArrays(A[2].TRIANGLES,0,6);const b=xi[1][0];xi[2].disableVertexAttribArray(b);const y=xi[1][1];xi[2].disableVertexAttribArray(y),Do(e);const E=0|We(H),C=0|Ye(H);e.viewport(0,0,E,C);break}case 1:{Fo(e,eu),Bo(e,0,M);const t=0|We(H),n=0|Ye(H);e.viewport(0,0,t,n);We(H),Ye(H);Co(e,0,0,v[0],v[1],v[2],1);const r=Di;r[2].useProgram(r[0]),r[2].enable(r[2].BLEND);const o=Di;o[2].blendEquation(o[2].MAX),o[2].blendFunc(o[2].ONE,o[2].ONE);const u=Di[1][0];let s,a;Di[2].bindBuffer(Di[2].ARRAY_BUFFER,Xo),Di[2].enableVertexAttribArray(u),Di[2].vertexAttribDivisor(u,0),Di[2].vertexAttribPointer(u,2,Di[2].FLOAT,!1,0,0),s=z,Di[2].uniformMatrix4fv(Di[1][2],!0,s);const c=je(~~(We(H)/X),~~(Ye(H)/X));a=[0|We(c),0|Ye(c)],Di[2].uniform2f(Di[1][1],a[0],a[1]);const f=i;Di[2].uniform1f(Di[1][3],f);const l=[ms[0],ms[1],ms[2]];Di[2].uniform3f(Di[1][5],l[0],l[1],l[2]),lo((function(e){const t=qe($e(e[0])+$e(Y),Ze(e[0])+Ze(Y));let n;n=[0|$e(t),0|Ze(t)],Di[2].uniform2f(Di[1][4],n[0],n[1]);const r=e[1];Di[2].uniform1f(Di[1][6],r);const o=Di;o[2].drawArrays(o[2].TRIANGLES,0,6)}),W);const d=Di[1][0];Di[2].disableVertexAttribArray(d),Do(e);const h=0|We(H),g=0|Ye(H);e.viewport(0,0,h,g);const w=Ai;w[2].useProgram(w[0]),w[2].enable(w[2].BLEND);const p=Ai;p[2].blendEquation(p[2].FUNC_ADD),p[2].blendFuncSeparate(p[2].SRC_ALPHA,p[2].ONE_MINUS_SRC_ALPHA,p[2].ONE,p[2].ONE);const m=Ai[1][0];Ai[2].bindBuffer(Ai[2].ARRAY_BUFFER,ei),Ai[2].enableVertexAttribArray(m),Ai[2].vertexAttribDivisor(m,0),Ai[2].vertexAttribPointer(m,2,Ai[2].FLOAT,!1,0,0);const x=Ai[1][1];Ai[2].bindBuffer(Ai[2].ARRAY_BUFFER,ai),Ai[2].enableVertexAttribArray(x),Ai[2].vertexAttribDivisor(x,0),Ai[2].vertexAttribPointer(x,2,Ai[2].FLOAT,!1,0,0),Ai[2].activeTexture(Ai[2].TEXTURE0),Ai[2].bindTexture(Ai[2].TEXTURE_2D,T),Ai[2].uniform1i(Ai[1][2],0),Ai[2].activeTexture(Ai[2].TEXTURE1),Ai[2].bindTexture(Ai[2].TEXTURE_2D,M),Ai[2].uniform1i(Ai[1][3],1);const A=Ai;A[2].drawArrays(A[2].TRIANGLES,0,6);const S=Ai[1][0];Ai[2].disableVertexAttribArray(S);const b=Ai[1][1];Ai[2].disableVertexAttribArray(b);break}case 2:switch(q.tag){case 0:I(z,[H,X],G,j(q.fields[0].Texture,q.fields[0].TextureSlicePosition,q.fields[0].TextureSliceSize),null!=q.fields[0].HeightMap?(l=q.fields[0].HeightMap,j(l.Texture,l.TextureSlicePosition,l.TextureSliceSize)):void 0,q.fields[0].Effect,[qe($e(q.fields[0].Position)+$e(Y),Ze(q.fields[0].Position)+Ze(Y)),q.fields[0].Size]);break;case 3:{L(),D=void 0;const n=Oi(V,We(q.fields[0].Size),Ye(q.fields[0].Size));Fo(e,Ji),Bo(e,0,n);const r=0|We(q.fields[0].Size),o=0|Ye(q.fields[0].Size);e.viewport(0,0,r,o);We(q.fields[0].Size),Ye(q.fields[0].Size);Co(e,0,0,ds[0],ds[1],ds[2],ds[3]);const i=U(We(q.fields[0].Size),Ye(q.fields[0].Size),1);for(let e=0;e<=q.fields[0].Children.length-1;e++)t(i,V+1,q.fields[0].Size,Je(),1,new it(0,"Default"),q.fields[0].Children[e]);L(),D=void 0,Do(e);const u=0|We(H),s=0|Ye(H);e.viewport(0,0,u,s),I(z,[H,X],q.fields[0].Shader,new ss(n,[0,0,1,1]),void 0,void 0,[(h=Je(),qe($e(h)+$e(Y),Ze(h)+Ze(Y))),q.fields[0].Size]);break}case 2:q.fields[0].Last=q.fields[0].Render(n),r=z,o=V,u=H,s=Y,a=X,c=G,f=q.fields[0].Last;continue e;case 4:case 5:r=z,o=V,u=H,s=Y,a=X,c=G,f=q.fields[0].Last;continue e;case 6:break;default:{const e=qe($e(q.fields[0].Position)+$e(Y),Ze(q.fields[0].Position)+Ze(Y));let n,r;n=Oe(q.fields[0].Shader,G),r=Oe(q.fields[0].Scale,X);const o=r===X?z:U(We(H),Ye(H),r);for(let i=0;i<=q.fields[0].Children.length-1;i++)t(o,V,H,e,r,n,q.fields[0].Children[i])}}}}}}break}}(U(We(w),Ye(w),r.Scale),0,w,qe(0,0),r.Scale,new it(0,"Default"),r.Content),L()}}}}(kc,zc);function qc(e){Ic.width=Uc.clientWidth,Ic.height=Uc.clientHeight;Oo(new Ct(3,"Resolution",~~Ic.clientWidth,~~Ic.clientHeight))}function $c(e){const t=ur();if(Vc.length>0&&fr(t,Hc())>=0){let e,n,r;r=go((e,t)=>[e,t],Vc),n=ao((function(e){return fr(t,e[1][0])>=0}),r),e=xo(n),lo((function(e){_o(e[1][1]),Vc.splice(e[0],1)}),e)}if(jc.length>0){const e=function(e,t){e:for(;;){const n=e,r=t;if(jc.length>0){const o=jc[0];if(jc.splice(0,1),0===o.tag){if(4===o.fields[0].tag){Xc(!0),e=n,t=r;continue e}{const i=us(r,o.fields[0]);wu(Oo,i[1]),e=n,t=i[0];continue e}}if(6===o.fields[0].tag){Vc.push([o.fields[0].fields[0],o.fields[0].fields[1]]),Hc(wo((function(e){return e[0]}),Vc,{Compare:fr})[0]),e=n,t=r;continue e}{const i=Lu(ur(),n,o.fields[0]);wu(_o,i[1]),e=i[0],t=r;continue e}}return[n,r]}}(Wc(),Yc());Wc()===e[0]||(Wc(e[0]),Xc(!0)),Yc()===e[1]||Yc(e[1])}}function Zc(e){var t,n,r,o;Xc()&&(Xc(!1),Yc((n=Wc(),t=Zu()(pu([(o=n,Zu(o.Dragger[0],o.Dragger[1],void 0,void 0,void 0,void 0,void 0,(function(e){let t;t=new Et(1,"Drag",e[0],e[1]),_o(t)}))(new Y(es([o.WorldMapSize,o.WorldMap,o.Players,o.Weather])((function(e,t){const n=ou(t[0][1],(function(e){return ou(t[0][0],(function(e){return[]}),Array)}),Array);Ai((function(e,t){n[e[1]][e[0]].push(t.Items)}),t[1]);const r=[],o=[];return Ai((function(e,t){const n=null!=t.Actions.tail?(t.Actions.head.tag,t.Actions.head.fields[0].Point):void 0;if(null!=n){const e=0|n[1],i=0|n[0];o.push([qe(64*i+32,64*e),400]),r.push([[i,e],t])}}),t[2]),Zu()(pu([Zu(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,new at(0,"World"))(new Y(es([n,"Ground"])((function(e,t){return Zu(void 0,void 0,new it(1,"WorldItem"))(du(oo((function(){return ro((function(e){const n=t[0][e];return ro((function(t){var r;const o=n[t],i=0|(r=0|w([t,e]),Math.abs(r)%256);return io(Zu(64*t,64*e,void 0,void 0,(function(){_o(new Et(2,"Hover",t,e))}),(function(){_o(new Et(3,"Leave",t,e))}),(function(){_o(new Et(4,"Select",t,e))}))(new Y(Zu()(du(oo((function(){return ro((function(e){return ro((function(e){let t;return t=Es(Uo()(e).Frames[0].Layers),vo((function(e){return qu(void 0,void 0,void 0,void 0,void 0,void 0,void 0,e,i)}),t)}),e)}),o)})))),new Y)))}),po(0,1,n.length-1))}),po(0,1,t[0].length-1))}))))})),new Y)),Zu(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,new at(2,"Shadow",du(o)))(du(oo((function(){return to(io(es([n,"Shadow"])((function(e,t){return Zu()(du(oo((function(){return ro((function(e){const n=t[0][e];return ro((function(t){const r=n[t];return io(Zu(64*t,64*e)(du(oo((function(){return ro((function(e){return ro((function(e){let t;return t=Rs(Uo()(e).Frames[0].Layers),vo((function(e){return qu(void 0,void 0,void 0,void 0,void 0,void 0,void 0,e)}),t)}),e)}),r)})))))}),po(0,1,n.length-1))}),po(0,1,t[0].length-1))}))))}))),oo((function(){return ro((function(e){return io(Zu(64*e[0][0],64*e[0][1])(new Y(Cs(Vr(Nr("%s - Shadow"))(e[1].Id),!0,e[1]),new Y)))}),r)})))})))),Zu(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,new at(0,"World"))(du(oo((function(){return ro((function(e){return io(Zu(64*e[0][0],64*e[0][1],new it(2,"Player"))(new Y(Cs(Vr(Nr("%s - Normal"))(e[1].Id),!1,e[1]),new Y)))}),r)})))),Zu(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,new at(3,"Weather"))(du(oo((function(){return 1===t[3].tag?io(Zu(void 0,void 0,new it(8,"Snow"))(new Y(qu(0,0,void 0,We(ns()),Ye(ns())),new Y))):2===t[3].tag?io(Zu(void 0,void 0,new it(7,"Rain"))(new Y(qu(0,0,void 0,We(ns()),Ye(ns())),new Y))):0===t[3].tag?io(Zu(void 0,void 0,new it(9,"Fog"))(new Y(qu(0,0,void 0,We(ns()),Ye(ns())),new Y))):[]})))),Zu(void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,new at(4,"CompleteWorld"))(new Y)]))})),new Y))),(r=n,es([r.Dragger,r.ActivePoint,r.Menu])((function(e,t){return Zu(void 0,void 0,void 0,1)(du(oo((function(){switch(t[2].Visible&&null!=t[1]?0:1){case 0:{const e=0|t[1][1],n=0|t[1][0],r=64*rs()|0,o=t[0][0]*rs()|0,i=t[0][1]*rs()|0,u=es("Menu Sprites")((function(e,t){return[Uo()("Menu - Empty"),Uo()("Menu - Top"),Uo()("Menu - Bottom"),Uo()("Menu - Book")]}));let s,a;a=E(S,5,0|~~(Ye(ts())/Ye(u[0].Size))),s=R(S,3,a);const c=Ye(u[0].Size)*(s-1)+Ye(u[1].Size)+Ye(u[2].Size)|0,f=je(We(u[1].Size)+We(u[3].Size)+10,c),l=n*r+o-We(f)-10|0,d=l>=0;let h,v,g,w;return v=R(S,5,0|(d?l:n*r+o+r+10)),h=E(S,We(ts())-We(u[0].Size)-5|0,v),w=R(S,5,e*r+i-(~~(c/2)-~~(r/2))|0),g=E(S,Ye(ts())-c-5|0,w),io(Zu(h,g)(pu([Yu(f,d?new ju(0,"Left"):new ju(2,"Right"),new Wu(1,"Middle"))(new Y(es("Menu Extra Icons")((function(e,t){return Zu()(du(oo((function(){const e=Uo()("Menu - Build"),t=Uo()("Menu - Grow");let n,r;const o=je(We(u[3].Size)+We(e.Size),Ye(u[3].Size)+Ye(e.Size));let i;r=je(We(o)+We(t.Size),Ye(o)+Ye(t.Size));const s=je(0,4);return i=je(2*We(s),2*Ye(s)),n=je(We(r)+We(i),Ye(r)+Ye(i)),io(Zu(void 0,void 0,void 0,void 0,(function(){}),void 0,(function(){}))(pu([Yu(n,new ju(0,"Left"),new Wu(0,"Top"))(new Y(As(u[3]),new Y)),Yu(n,new ju(0,"Left"),new Wu(1,"Middle"))(new Y(As(e),new Y)),Yu(n,new ju(0,"Left"),new Wu(2,"Bottom"))(new Y(As(t),new Y))])))}))))})),new Y)),Zu(void 0,void 0,void 0,void 0,void 0,void 0,void 0,(function(e){_o(new Et(7,"MenuDrag",e[1]*rs()))}))(new Y(Yu(f,d?new ju(2,"Right"):new ju(0,"Left"))(du(oo((function(){const e=je(We(u[1].Size),c);return to(io(es("Menu Background")((function(t,n){return Zu(void 0,void 0,void 0,void 0,void 0,void 0,(function(){}))(pu([Yu(e,new ju(1,"Center"))(new Y(As(u[1]),new Y)),Yu(e,new ju(1,"Center"),new Wu(1,"Middle"))(du(oo((function(){const e=As(u[0]);return vo((function(t){return Zu(void 0,t*Ye(u[0].Size))(new Y(e,new Y))}),po(0,1,s-2))})))),Yu(e,new ju(1,"Center"),new Wu(2,"Bottom"))(new Y(As(u[2]),new Y))]))}))),oo((function(){const n=Uo()("Menu - Item"),r=As(n);return io(es(t[2])((function(t,o){return Yu(e,new ju(1,"Center"),new Wu(1,"Middle"))(new Y(Ku(We(n.Size),c-Ye(u[1].Size)-Ye(u[2].Size))(new Y(Zu(void 0,o.Offset)(new Y(es([o.Items,o.Selected,o.Hover])((function(e,t){return Zu()(du(oo((function(){return to(ro((function(e){let o;if(o=yu(e,t[0]),x(e,t[1]))return[];if(null!=o){const i=o;return io(Zu(void 0,e*Ye(n.Size),void 0,void 0,(function(){_o(new Et(9,"MenuHover",e))}),(function(){_o(new Et(9,"MenuHover",void 0))}),(function(){_o(new Et(8,"MenuSelectChange",e))}))(du(oo((function(){return to(x(e,t[2])?io(As(Uo()("Menu - Hover"))):io(r),oo((function(){return io(Yu(n.Size,new ju(1,"Center"),new Wu(1,"Middle"))(new Y(As(Uo()(Vr(Nr("Menu Icons - %s - Idle"))(i))),new Y)))})))})))))}return[]}),po(0,1,hu(t[0])-1)),oo((function(){var e,r,o,i,u,s;if(null!=t[1]){const a=0|t[1];let c;if(c=yu(a,t[0]),null!=c){const t=c;return io(Zu(void 0,a*Ye(n.Size))(pu([Zu(void 0,void 0,void 0,void 0,(function(){_o(new Et(9,"MenuHover",a))}),void 0,(function(){_o(new Et(8,"MenuSelectChange",a))}))(pu([(e=Uo()("Menu - Active"),As(e)),Yu(n.Size,new ju(1,"Center"),new Wu(1,"Middle"))(new Y((r=Uo()((o=Vr(Nr("Menu Icons - %s - Active")),o(t))),u="Menu Icon Active",s=r,Qu(u,(function(){return new Ss(ur(),s,-1,void 0)}))((function(e){return Ju((function(t){let n,r,o;if(e.Sprite.Name!==s.Name&&(e.Start=t,e.Sprite=s,e.Slot=-1,e.Result=void 0),o=~~(dr(t,e.Start)/750%e.Sprite.Frames.length),r=R(S,0,o),n=E(S,e.Sprite.Frames.length-1|0,r),n!==e.Slot||null==e.Result){e.Slot=n;const t=Zu()(du(oo((function(){return vo((function(e){return qu(void 0,void 0,void 0,void 0,void 0,void 0,void 0,e)}),e.Sprite.Frames[e.Slot].Layers)}))));e.Result=t}return e.Result}))}))),new Y))])),Zu(0,73)(new Y((i=t,es(i)((function(e,t){return Zu()(du(oo((function(){const e=Uo()("Menu - Name Top"),n=Uo()("Menu - Name Middle"),r=Uo()("Menu - Name Bottom"),o=ys(We(n.Size)-20,t);let i,u;u=$u(o,0,0),i=je($e(u[1])-$e(u[0]),Ze(u[1])-Ze(u[0])+6);const s=je(We(e.Size),Ye(e.Size)+Ye(i)+Ye(r.Size));return to(io(Yu(s,void 0,new Wu(0,"Top"))(new Y(As(e),new Y))),oo((function(){return to(io(Yu(s,void 0,new Wu(2,"Bottom"))(new Y(As(r),new Y))),oo((function(){return to(io(Yu(s,new ju(1,"Center"),new Wu(1,"Middle"))(du(oo((function(){return vo((function(e){return qu(void 0,void 0,void 0,void 0,Ye(i),void 0,void 0,e)}),n.Frames[0].Layers)}))))),oo((function(){return io(Zu(void 0,void 0,new it(3,"Color",66/255,50/255,34/255,1))(new Y(Yu(s,new ju(0,"Left"),new Wu(1,"Middle"))(du(oo((function(){return vo((function(e){return Yu(s,new ju(1,"Center"))(new Y(e,new Y))}),o)})))),new Y)))})))})))})))}))))}))),new Y))])))}return[]}return[]})))}))))})),new Y)),new Y)),new Y))})))})))})))),new Y))])))}case 1:return[]}}))))}))),Ms()])),new Rt(Yc().Scale,Yc().Resolution,t,Yc().MouseItem,Yc().DragItem,Yc().ClickItem,Yc().HoverItem,Yc().BlurItem))),function(e){const t=new Set([]);lo((function(e){let n;n=u(e,t)}),ku.keys()),function e(n){e:for(;;){const r=n;switch(r.tag){case 2:n=r.fields[0].Last;continue e;case 5:r.fields[0].Rendered||(r.fields[0].Last=r.fields[0].Render()),e(r.fields[0].Last),r.fields[0].Rendered=!1;break;case 1:case 3:r.fields[0].Children.forEach(e);break;case 0:case 6:break;default:t.delete(r.fields[0].Key);n=r.fields[0].Last;continue e}break}}(e),lo((function(e){ku.delete(e)}),t),zu.clear()}(Yc().Content)),Gc(ur())(Yc())(Wc()),Bs(Nc,ur(),Wc())}function Jc(e){$c(),Zc();window.requestAnimationFrame(Jc)}window.isTouch?(Ic.ontouchstart=function(e){const t=e.touches[0].clientX,n=e.touches[0].clientY;Oo(new Ct(0,"MouseDown",~~t,~~n)),e.preventDefault()},Ic.ontouchmove=function(e){const t=e.touches[0].clientX,n=e.touches[0].clientY;Oo(new Ct(1,"MouseMove",~~t,~~n,!1)),e.preventDefault()},Ic.ontouchend=function(e){Oo(new Ct(2,"MouseUp",0,0)),e.preventDefault()}):(Ic.onmousemove=function(e){Oo(new Ct(1,"MouseMove",~~e.x,~~e.y,!1))},Ic.onmousedown=function(e){Oo(new Ct(0,"MouseDown",~~e.x,~~e.y))},Ic.onmouseup=function(e){Oo(new Ct(2,"MouseUp",~~e.x,~~e.y))},Ic.onmousewheel=function(e){Oo(new Ct(0,"MouseDown",~~e.x,~~e.y));Oo(new Ct(1,"MouseMove",~~e.x+~~e.wheelDeltaX,~~e.y+~~e.wheelDeltaY,!0));Oo(new Ct(2,"MouseUp",~~e.x,~~e.y));Oo(new Ct(1,"MouseMove",~~e.x,~~e.y,!1))}),window.addEventListener("keydown",(function(e){const t=os();var n;lo((function(t){const n=e.key;1===n.length?t(n[0]):"Backspace"===n&&t("\b")}),null==(n=t)?[]:[_e(n)])})),window.onresize=function(e){qc()},qc(),function(){let e;e=ks.Delay((function(){return ks.While((function(){return!0}),ks.Delay((function(){return ks.Bind((e=1e3,Os(t=>{let n;const r=setTimeout(()=>{t.cancelToken.removeListener(n),t.onSuccess(void 0)},e);n=t.cancelToken.addListener(()=>{clearTimeout(r),t.onCancel(new Ls)})})),(function(){let e;const t=new yt(0,"Update");return e=new Et(11,"Audio",t),_o(e),ks.Zero()}));var e})))})),Hs(e)}(),function(){let e;e=ks.Delay((function(){return x(window.AudioContext,null)?Ro(new window.webkitAudioContext):Ro(new window.AudioContext),ks.Bind(zs(To(0,yo(0,(function(){var e;return Eo((e=Vr(Nr("data/%s")),e("Sprites.json")),new Y).then((function(e){return e.text().then((function(e){return Promise.resolve(ec(U(2,Pc(new Ys(1,"CamelCase"),Oc,{ResolveType:()=>ae(_t())})),e))}))}))})))),(function(e){return ks.Bind(zs(To(0,yo(0,(function(){var e;return Eo((e=Vr(Nr("data/%s")),e("Audio.json")),new Y).then((function(e){return e.text().then((function(e){return Promise.resolve(ec(U(2,Pc(new Ys(1,"CamelCase"),Oc,{ResolveType:()=>ae(ie("Models.AudioResource",[],Ot,()=>[["Name",le],["Duration",oe("System.TimeSpan")]]))})),e))}))}))})))),(function(t){let n,r,o,i;r=gu((function(e){return[e.Name,e]}),e),n=bi(r,{Compare:S}),i=gu((function(e){return[e.Name,e]}),t),o=bi(i,{Compare:S}),Uo((function(e){return mi(e,n)})),Io((function(e){return mi(e,o)}));Jc();return ks.Zero()}))}))})),Hs(e)}()}]);